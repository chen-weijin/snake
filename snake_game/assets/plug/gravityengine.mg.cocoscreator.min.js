System.register("chunks:///_virtual/gravityengine.mg.cocoscreator.min.js", ["./cjs-loader.mjs"], function (e, t) {
    var i;
    return {
        setters: [
            function (e) {
                i = e.default;
            },
        ],
        execute: function () {
            e("default", void 0);
            var r = e("__cjsMetaURL", t.meta.url);
            i.define(
                r,
                function (t, i, r, o, a) {
                    var s, c;
                    (s = this),
                        (c = function () {
                            function e (e, t) {
                                var n,
                                    i = Object.keys(e);
                                return (
                                    Object.getOwnPropertySymbols &&
                                    ((n = Object.getOwnPropertySymbols(e)),
                                        t &&
                                        (n = n.filter(function (t) {
                                            return Object.getOwnPropertyDescriptor(e, t).enumerable;
                                        })),
                                        i.push.apply(i, n)),
                                    i
                                );
                            }
                            function t (t) {
                                for (var n = 1; n < arguments.length; n++) {
                                    var i = null != arguments[n] ? arguments[n] : {};
                                    n % 2
                                        ? e(Object(i), true).forEach(function (e) {
                                            l(t, e, i[e]);
                                        })
                                        : Object.getOwnPropertyDescriptors
                                            ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(i))
                                            : e(Object(i)).forEach(function (e) {
                                                Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(i, e));
                                            });
                                }
                                return t;
                            }
                            function i () {
                                i = function () {
                                    return e;
                                };
                                var e = {},
                                    t = Object.prototype,
                                    r = t.hasOwnProperty,
                                    o =
                                        Object.defineProperty ||
                                        function (e, t, n) {
                                            e[t] = n.value;
                                        },
                                    a = (v = "function" == typeof Symbol ? Symbol : {}).iterator || "@@iterator",
                                    s = v.asyncIterator || "@@asyncIterator",
                                    c = v.toStringTag || "@@toStringTag";
                                function u (e, t, n) {
                                    return (
                                        Object.defineProperty(e, t, {
                                            value: n,
                                            enumerable: true,
                                            configurable: true,
                                            writable: true,
                                        }),
                                        e[t]
                                    );
                                }
                                try {
                                    u({}, "");
                                } catch (t) {
                                    t = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(t);
                                    u = function (e, t, n) {
                                        return (e[t] = n);
                                    };
                                }
                                function l (e, t, n, i) {
                                    var r, a, s, c;
                                    return (
                                        (t = t && t.prototype instanceof d ? t : d),
                                        (t = Object.create(t.prototype)),
                                        (i = new I(i || [])),
                                        o(t, "_invoke", {
                                            value:
                                                ((r = e),
                                                    (a = n),
                                                    (s = i),
                                                    (c = "suspendedStart"),
                                                    function (e, t) {
                                                        if ("executing" === c) throw new Error("Generator is already running");
                                                        if ("completed" === c) {
                                                            if ("throw" === e) throw t;
                                                            return {
                                                                value: void 0,
                                                                done: true,
                                                            };
                                                        }
                                                        for (s.method = e, s.arg = t; ;) {
                                                            var n = s.delegate;
                                                            if (
                                                                n &&
                                                                (n = (function e (t, n) {
                                                                    var i = n.method,
                                                                        r = t.iterator[i];
                                                                    return void 0 === r
                                                                        ? ((n.delegate = null),
                                                                            ("throw" === i &&
                                                                                t.iterator.return &&
                                                                                ((n.method = "return"),
                                                                                    (n.arg = void 0),
                                                                                    e(t, n),
                                                                                    "throw" === n.method)) ||
                                                                            ("return" !== i &&
                                                                                ((n.method = "throw"),
                                                                                    (n.arg = new TypeError(
                                                                                        "The iterator does not provide a '" + i + "' method"
                                                                                    )))),
                                                                            f)
                                                                        : "throw" === (i = p(r, t.iterator, n.arg)).type
                                                                            ? ((n.method = "throw"), (n.arg = i.arg), (n.delegate = null), f)
                                                                            : (r = i.arg)
                                                                                ? r.done
                                                                                    ? ((n[t.resultName] = r.value),
                                                                                        (n.next = t.nextLoc),
                                                                                        "return" !== n.method && ((n.method = "next"), (n.arg = void 0)),
                                                                                        (n.delegate = null),
                                                                                        f)
                                                                                    : r
                                                                                : ((n.method = "throw"),
                                                                                    (n.arg = new TypeError("iterator result is not an object")),
                                                                                    (n.delegate = null),
                                                                                    f);
                                                                })(n, s))
                                                            ) {
                                                                if (n === f) continue;
                                                                return n;
                                                            }
                                                            if ("next" === s.method) s.sent = s._sent = s.arg;
                                                            else if ("throw" === s.method) {
                                                                if ("suspendedStart" === c) throw ((c = "completed"), s.arg);
                                                                s.dispatchException(s.arg);
                                                            } else "return" === s.method && s.abrupt("return", s.arg);
                                                            if (((c = "executing"), "normal" === (n = p(r, a, s)).type)) {
                                                                if (((c = s.done ? "completed" : "suspendedYield"), n.arg === f)) continue;
                                                                return {
                                                                    value: n.arg,
                                                                    done: s.done,
                                                                };
                                                            }
                                                            "throw" === n.type && ((c = "completed"), (s.method = "throw"), (s.arg = n.arg));
                                                        }
                                                    }),
                                        }),
                                        t
                                    );
                                }
                                function p (e, t, n) {
                                    try {
                                        return {
                                            type: "normal",
                                            arg: e.call(t, n),
                                        };
                                    } catch (e) {
                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                        return {
                                            type: "throw",
                                            arg: e,
                                        };
                                    }
                                }
                                e.wrap = l;
                                var f = {};
                                function d () { }
                                function h () { }
                                function g () { }
                                var v,
                                    y,
                                    m =
                                        (u((v = {}), a, function () {
                                            return this;
                                        }),
                                            (y = (y = Object.getPrototypeOf) && y(y(A([])))) && y !== t && r.call(y, a) && (v = y),
                                            (g.prototype = d.prototype = Object.create(v)));
                                function _ (e) {
                                    ["next", "throw", "return"].forEach(function (t) {
                                        u(e, t, function (e) {
                                            return this._invoke(t, e);
                                        });
                                    });
                                }
                                function k (e, t) {
                                    var i;
                                    o(this, "_invoke", {
                                        value: function (o, a) {
                                            function s () {
                                                return new t(function (i, s) {
                                                    !(function i (o, a, s, c) {
                                                        var u;
                                                        if ("throw" !== (o = p(e[o], e, a)).type)
                                                            return (a = (u = o.arg).value) && "object" == n(a) && r.call(a, "__await")
                                                                ? t.resolve(a.__await).then(
                                                                    function (e) {
                                                                        i("next", e, s, c);
                                                                    },
                                                                    function (e) {
                                                                        i("throw", e, s, c);
                                                                    }
                                                                )
                                                                : t.resolve(a).then(
                                                                    function (e) {
                                                                        (u.value = e), s(u);
                                                                    },
                                                                    function (e) {
                                                                        return i("throw", e, s, c);
                                                                    }
                                                                );
                                                        c(o.arg);
                                                    })(o, a, i, s);
                                                });
                                            }
                                            return (i = i ? i.then(s, s) : s());
                                        },
                                    });
                                }
                                function b (e) {
                                    var t = {
                                        tryLoc: e[0],
                                    };
                                    1 in e && (t.catchLoc = e[1]),
                                        2 in e && ((t.finallyLoc = e[2]), (t.afterLoc = e[3])),
                                        this.tryEntries.push(t);
                                }
                                function S (e) {
                                    var t = e.completion || {};
                                    (t.type = "normal"), delete t.arg, (e.completion = t);
                                }
                                function I (e) {
                                    (this.tryEntries = [
                                        {
                                            tryLoc: "root",
                                        },
                                    ]),
                                        e.forEach(b, this),
                                        this.reset(true);
                                }
                                function A (e) {
                                    if (e || "" === e) {
                                        var t,
                                            i = e[a];
                                        if (i) return i.call(e);
                                        if ("function" == typeof e.next) return e;
                                        if (!isNaN(e.length))
                                            return (
                                                (t = -1),
                                                ((i = function n () {
                                                    for (; ++t < e.length;) if (r.call(e, t)) return (n.value = e[t]), (n.done = false), n;
                                                    return (n.value = void 0), (n.done = true), n;
                                                }).next = i)
                                            );
                                    }
                                    throw new TypeError(n(e) + " is not iterable");
                                }
                                return (
                                    o(m, "constructor", {
                                        value: (h.prototype = g),
                                        configurable: true,
                                    }),
                                    o(g, "constructor", {
                                        value: h,
                                        configurable: true,
                                    }),
                                    (h.displayName = u(g, c, "GeneratorFunction")),
                                    (e.isGeneratorFunction = function (e) {
                                        return (
                                            !!(e = "function" == typeof e && e.constructor) &&
                                            (e === h || "GeneratorFunction" === (e.displayName || e.name))
                                        );
                                    }),
                                    (e.mark = function (e) {
                                        return (
                                            Object.setPrototypeOf
                                                ? Object.setPrototypeOf(e, g)
                                                : ((e.__proto__ = g), u(e, c, "GeneratorFunction")),
                                            (e.prototype = Object.create(m)),
                                            e
                                        );
                                    }),
                                    (e.awrap = function (e) {
                                        return {
                                            __await: e,
                                        };
                                    }),
                                    _(k.prototype),
                                    u(k.prototype, s, function () {
                                        return this;
                                    }),
                                    (e.AsyncIterator = k),
                                    (e.async = function (t, n, i, r, o) {
                                        void 0 === o && (o = Promise);
                                        var a = new k(l(t, n, i, r), o);
                                        return e.isGeneratorFunction(n)
                                            ? a
                                            : a.next().then(function (e) {
                                                return e.done ? e.value : a.next();
                                            });
                                    }),
                                    _(m),
                                    u(m, c, "Generator"),
                                    u(m, a, function () {
                                        return this;
                                    }),
                                    u(m, "toString", function () {
                                        return "[object Generator]";
                                    }),
                                    (e.keys = function (e) {
                                        var t,
                                            n = Object(e),
                                            i = [];
                                        for (t in n) i.push(t);
                                        return (
                                            i.reverse(),
                                            function e () {
                                                for (; i.length;) {
                                                    var t = i.pop();
                                                    if (t in n) return (e.value = t), (e.done = false), e;
                                                }
                                                return (e.done = true), e;
                                            }
                                        );
                                    }),
                                    (e.values = A),
                                    (I.prototype = {
                                        constructor: I,
                                        reset: function (e) {
                                            if (
                                                ((this.prev = 0),
                                                    (this.next = 0),
                                                    (this.sent = this._sent = void 0),
                                                    (this.done = false),
                                                    (this.delegate = null),
                                                    (this.method = "next"),
                                                    (this.arg = void 0),
                                                    this.tryEntries.forEach(S),
                                                    !e)
                                            )
                                                for (var t in this)
                                                    "t" === t.charAt(0) && r.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0);
                                        },
                                        stop: function () {
                                            this.done = true;
                                            var e = this.tryEntries[0].completion;
                                            if ("throw" === e.type) throw e.arg;
                                            return this.rval;
                                        },
                                        dispatchException: function (e) {
                                            if (this.done) throw e;
                                            var t = this;
                                            function n (n, i) {
                                                return (
                                                    (a.type = "throw"),
                                                    (a.arg = e),
                                                    (t.next = n),
                                                    i && ((t.method = "next"), (t.arg = void 0)),
                                                    !!i
                                                );
                                            }
                                            for (var i = this.tryEntries.length - 1; 0 <= i; --i) {
                                                var o = this.tryEntries[i],
                                                    a = o.completion;
                                                if ("root" === o.tryLoc) return n("end");
                                                if (o.tryLoc <= this.prev) {
                                                    var s = r.call(o, "catchLoc"),
                                                        c = r.call(o, "finallyLoc");
                                                    if (s && c) {
                                                        if (this.prev < o.catchLoc) return n(o.catchLoc, true);
                                                        if (this.prev < o.finallyLoc) return n(o.finallyLoc);
                                                    } else if (s) {
                                                        if (this.prev < o.catchLoc) return n(o.catchLoc, true);
                                                    } else {
                                                        if (!c) throw new Error("try statement without catch or finally");
                                                        if (this.prev < o.finallyLoc) return n(o.finallyLoc);
                                                    }
                                                }
                                            }
                                        },
                                        abrupt: function (e, t) {
                                            for (var n = this.tryEntries.length - 1; 0 <= n; --n) {
                                                var i = this.tryEntries[n];
                                                if (i.tryLoc <= this.prev && r.call(i, "finallyLoc") && this.prev < i.finallyLoc) {
                                                    var o = i;
                                                    break;
                                                }
                                            }
                                            var a = (o =
                                                o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc ? null : o)
                                                ? o.completion
                                                : {};
                                            return (
                                                (a.type = e),
                                                (a.arg = t),
                                                o ? ((this.method = "next"), (this.next = o.finallyLoc), f) : this.complete(a)
                                            );
                                        },
                                        complete: function (e, t) {
                                            if ("throw" === e.type) throw e.arg;
                                            return (
                                                "break" === e.type || "continue" === e.type
                                                    ? (this.next = e.arg)
                                                    : "return" === e.type
                                                        ? ((this.rval = this.arg = e.arg), (this.method = "return"), (this.next = "end"))
                                                        : "normal" === e.type && t && (this.next = t),
                                                f
                                            );
                                        },
                                        finish: function (e) {
                                            for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                                                var n = this.tryEntries[t];
                                                if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), S(n), f;
                                            }
                                        },
                                        catch: function (e) {
                                            for (var t = this.tryEntries.length - 1; 0 <= t; --t) {
                                                var n,
                                                    i,
                                                    r = this.tryEntries[t];
                                                if (r.tryLoc === e) return "throw" === (n = r.completion).type && ((i = n.arg), S(r)), i;
                                            }
                                            throw new Error("illegal catch attempt");
                                        },
                                        delegateYield: function (e, t, n) {
                                            return (
                                                (this.delegate = {
                                                    iterator: A(e),
                                                    resultName: t,
                                                    nextLoc: n,
                                                }),
                                                "next" === this.method && (this.arg = void 0),
                                                f
                                            );
                                        },
                                    }),
                                    e
                                );
                            }
                            function r (e) {
                                return (r =
                                    "function" == typeof Symbol && "symbol" == n(Symbol.iterator)
                                        ? function (e) {
                                            return n(e);
                                        }
                                        : function (e) {
                                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype
                                                ? "symbol"
                                                : n(e);
                                        })(e);
                            }
                            function o (e, t, n, i, r, o, a) {
                                try {
                                    var s = e[o](a),
                                        c = s.value;
                                } catch (e) {
                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                    return void n(e);
                                }
                                s.done ? t(c) : Promise.resolve(c).then(i, r);
                            }
                            function a (e) {
                                return function () {
                                    var t = this,
                                        n = arguments;
                                    return new Promise(function (i, r) {
                                        var a = e.apply(t, n);
                                        function s (e) {
                                            o(a, i, r, s, c, "next", e);
                                        }
                                        function c (e) {
                                            o(a, i, r, s, c, "throw", e);
                                        }
                                        s(void 0);
                                    });
                                };
                            }
                            function s (e, t) {
                                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
                            }
                            function c (e, t) {
                                for (var n = 0; n < t.length; n++) {
                                    var i = t[n];
                                    (i.enumerable = i.enumerable || false),
                                        (i.configurable = true),
                                        "value" in i && (i.writable = true),
                                        Object.defineProperty(e, h(i.key), i);
                                }
                            }
                            function u (e, t, n) {
                                return (
                                    t && c(e.prototype, t),
                                    n && c(e, n),
                                    Object.defineProperty(e, "prototype", {
                                        writable: false,
                                    }),
                                    e
                                );
                            }
                            function l (e, t, n) {
                                return (
                                    (t = h(t)) in e
                                        ? Object.defineProperty(e, t, {
                                            value: n,
                                            enumerable: true,
                                            configurable: true,
                                            writable: true,
                                        })
                                        : (e[t] = n),
                                    e
                                );
                            }
                            function p (e, t) {
                                return (
                                    (function (e) {
                                        if (Array.isArray(e)) return e;
                                    })(e) ||
                                    (function (e, t) {
                                        var n = null == e ? null : ("undefined" != typeof Symbol && e[Symbol.iterator]) || e["@@iterator"];
                                        if (null != n) {
                                            var i,
                                                r,
                                                o,
                                                a,
                                                s = [],
                                                c = true,
                                                u = false;
                                            try {
                                                if (((o = (n = n.call(e)).next), 0 === t)) {
                                                    if (Object(n) !== n) return;
                                                    c = false;
                                                } else for (; !(c = (i = o.call(n)).done) && (s.push(i.value), s.length !== t); c = true);
                                            } catch (e) {
                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                (u = true), (r = e);
                                            } finally {
                                                try {
                                                    if (!c && null != n.return && ((a = n.return()), Object(a) !== a)) return;
                                                } finally {
                                                    if (u) throw r;
                                                }
                                            }
                                            return s;
                                        }
                                    })(e, t) ||
                                    f(e, t) ||
                                    (function () {
                                        throw new TypeError(
                                            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                                        );
                                    })()
                                );
                            }
                            function f (e, t) {
                                var n;
                                if (e)
                                    return "string" == typeof e
                                        ? d(e, t)
                                        : "Map" ===
                                            (n =
                                                "Object" === (n = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor
                                                    ? e.constructor.name
                                                    : n) || "Set" === n
                                            ? Array.from(e)
                                            : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                                                ? d(e, t)
                                                : void 0;
                            }
                            function d (e, t) {
                                (null == t || t > e.length) && (t = e.length);
                                for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                                return i;
                            }
                            function h (e) {
                                return "symbol" ==
                                    n(
                                        (e = (function (e, t) {
                                            if ("object" != n(e) || null === e) return e;
                                            var i = e[Symbol.toPrimitive];
                                            if (void 0 === i) return String(e);
                                            if ("object" != n((i = i.call(e, "string")))) return i;
                                            throw new TypeError("@@toPrimitive must return a primitive value.");
                                        })(e))
                                    )
                                    ? e
                                    : String(e);
                            }
                            var g = "4.8.32",
                                v = "MG",
                                y = "https://backend.gravity-engine.com/event_center/api/v1",
                                m = (function () {
                                    function e () {
                                        s(this, e),
                                            (this.config = {
                                                persistenceName: "GravityEngine",
                                                persistenceNameOld: "GravityEngine_web",
                                            });
                                    }
                                    return (
                                        u(
                                            e,
                                            [
                                                {
                                                    key: "getConfig",
                                                    value: function () {
                                                        return this.config;
                                                    },
                                                },
                                                {
                                                    key: "getStorage",
                                                    value: function (e, t, n) {
                                                        if (((e = localStorage.getItem(e)), !t))
                                                            return P.isJSONString(e) ? JSON.parse(e) : {};
                                                        P.isJSONString(e) ? n(JSON.parse(e)) : n({});
                                                    },
                                                },
                                                {
                                                    key: "setStorage",
                                                    value: function (e, t) {
                                                        localStorage.setItem(e, t);
                                                    },
                                                },
                                                {
                                                    key: "_setSystemProxy",
                                                    value: function (e) {
                                                        this._sysCallback = e;
                                                    },
                                                },
                                                {
                                                    key: "getSystemInfo",
                                                    value: function (e) {
                                                        var t = {
                                                            mp_platform: "web",
                                                            system: (t = this._getOs()),
                                                            platform: t,
                                                            screenWidth: window.screen.width,
                                                            screenHeight: window.screen.height,
                                                            systemLanguage: navigator.language,
                                                        };
                                                        this._sysCallback && (t = P.extend(t, this._sysCallback(e))),
                                                            e.success(t),
                                                            e.complete();
                                                    },
                                                },
                                                {
                                                    key: "_getOs",
                                                    value: function () {
                                                        var e = navigator.userAgent;
                                                        return /Windows/i.test(e)
                                                            ? /Phone/.test(e) || /WPDesktop/.test(e)
                                                                ? "Windows Phone"
                                                                : "Windows"
                                                            : /(iPhone|iPad|iPod)/.test(e)
                                                                ? "iOS"
                                                                : /Android/.test(e)
                                                                    ? "Android"
                                                                    : /(BlackBerry|PlayBook|BB10)/i.test(e)
                                                                        ? "BlackBerry"
                                                                        : /Mac/i.test(e)
                                                                            ? "MacOS"
                                                                            : /Linux/.test(e)
                                                                                ? "Linux"
                                                                                : /CrOS/.test(e)
                                                                                    ? "ChromeOS"
                                                                                    : "";
                                                    },
                                                },
                                                {
                                                    key: "getNetworkType",
                                                    value: function (e) {
                                                        e.complete();
                                                    },
                                                },
                                                {
                                                    key: "onNetworkStatusChange",
                                                    value: function () { },
                                                },
                                                {
                                                    key: "request",
                                                    value: function (e) {
                                                        var t = {},
                                                            n = new XMLHttpRequest();
                                                        if ((n.open(e.method, e.url), e.header))
                                                            for (var i in e.header) n.setRequestHeader(i, e.header[i]);
                                                        return (
                                                            (n.onreadystatechange = function () {
                                                                4 === n.readyState && 200 === n.status
                                                                    ? ((t.statusCode = 200),
                                                                        P.isJSONString(n.responseText) &&
                                                                        (t.data = JSON.parse(n.responseText)),
                                                                        e.success(t))
                                                                    : 200 !== n.status && ((t.errMsg = "network error"), e.fail(t));
                                                            }),
                                                            (n.ontimeout = function () {
                                                                (t.errMsg = "timeout"), e.fail(t);
                                                            }),
                                                            n.send(e.data),
                                                            n
                                                        );
                                                    },
                                                },
                                                {
                                                    key: "initAutoTrackInstance",
                                                    value: function (e, t) {
                                                        (this.instance = e), (this.autoTrack = t.autoTrack);
                                                        var n = this;
                                                        "onpagehide" in window
                                                            ? (window.onpagehide = function () {
                                                                n.onPageHide(true);
                                                            })
                                                            : (window.onbeforeunload = function () {
                                                                n.onPageHide(true);
                                                            }),
                                                            n.onPageShow(),
                                                            n.autoTrack.appHide && n.instance.timeEvent("ta_page_hide"),
                                                            "onvisibilitychange" in document &&
                                                            (document.onvisibilitychange = function () {
                                                                document.hidden
                                                                    ? n.onPageHide(false)
                                                                    : (n.onPageShow(),
                                                                        n.autoTrack.appHide && n.instance.timeEvent("ta_page_hide"));
                                                            });
                                                    },
                                                },
                                                {
                                                    key: "setGlobal",
                                                    value: function (e, t) {
                                                        window[t] = e;
                                                    },
                                                },
                                                {
                                                    key: "getAppOptions",
                                                    value: function () { },
                                                },
                                                {
                                                    key: "showToast",
                                                    value: function () { },
                                                },
                                                {
                                                    key: "onPageShow",
                                                    value: function () {
                                                        var e;
                                                        this.autoTrack.appShow &&
                                                            (P.extend((e = {}), this.autoTrack.properties),
                                                                P.isFunction(this.autoTrack.callback) &&
                                                                P.extend(e, this.autoTrack.callback("appShow")),
                                                                this.instance._internalTrack("$WebPageView", e));
                                                    },
                                                },
                                                {
                                                    key: "onPageHide",
                                                    value: function (e) {
                                                        var t;
                                                        this.autoTrack.appHide &&
                                                            (P.extend((t = {}), this.autoTrack.properties),
                                                                P.isFunction(this.autoTrack.callback) &&
                                                                P.extend(t, this.autoTrack.callback("appHide")),
                                                                this.instance._internalTrack("$WebPageHide", t, new Date(), null, e));
                                                    },
                                                },
                                            ],
                                            [
                                                {
                                                    key: "createInstance",
                                                    value: function () {
                                                        return new e();
                                                    },
                                                },
                                            ]
                                        ),
                                        e
                                    );
                                })(),
                                _ = (function () {
                                    function e (t, n) {
                                        s(this, e),
                                            (this.taInstance = t),
                                            (this.config = n || {}),
                                            (this.referrer = "Directly open"),
                                            this.config.isPlugin
                                                ? ((t.App = function () {
                                                    App.apply(this, arguments);
                                                }),
                                                    inension(t.Page))
                                                : ((n = App),
                                                    (App = this._initAppExtention(n)),
                                                    (t = Page),
                                                    (Page = this._initPageExtension(t)));
                                    }
                                    return (
                                        u(e, [
                                            {
                                                key: "_initPageExtension",
                                                value: function (e) {
                                                    var t = this;
                                                    return function (n) {
                                                        var i = n.onLoad,
                                                            r = n.onShow,
                                                            o = n.onShareAppMessage,
                                                            a = {};
                                                        return (
                                                            (n.onLoad = function (e) {
                                                                (a = e || {}), "function" == typeof i && i.call(this, e);
                                                            }),
                                                            (n.onShow = function (e) {
                                                                t.onPageShow(a), "function" == typeof r && r.call(this, e);
                                                            }),
                                                            "function" == typeof o &&
                                                            (n.onShareAppMessage = function (e) {
                                                                return (e = o.call(this, e)), t.onPageShare(e);
                                                            }),
                                                            e(n)
                                                        );
                                                    };
                                                },
                                            },
                                            {
                                                key: "_initAppExtention",
                                                value: function (e) {
                                                    var t = this;
                                                    return function (n) {
                                                        var i = n.onLaunch,
                                                            r = n.onShow,
                                                            o = n.onHide;
                                                        return (
                                                            (n.onLaunch = function (e) {
                                                                t.onAppLaunch(e, this), "function" == typeof i && i.call(this, e);
                                                            }),
                                                            (n.onShow = function (e) {
                                                                t.onAppShow(e), "function" == typeof r && r.call(this, e);
                                                            }),
                                                            (n.onHide = function () {
                                                                t.onAppHide(), "function" == typeof o && o.call(this);
                                                            }),
                                                            e(n)
                                                        );
                                                    };
                                                },
                                            },
                                            {
                                                key: "onAppLaunch",
                                                value: function (e, t) {
                                                    this._setAutoTrackProperties(e),
                                                        P.isUndefined(t) || (t[this.taInstance.name] = this.taInstance),
                                                        this.config.appLaunch &&
                                                        ((t = {}),
                                                            e &&
                                                            e.path &&
                                                            ((t.$url_query = P.setQuery(e.query)),
                                                                (t.$scene = String(e.scene || e.from))),
                                                            this.taInstance._internalTrack("$MPLaunch", t));
                                                },
                                            },
                                            {
                                                key: "onAppShow",
                                                value: function (e) {
                                                    var t;
                                                    this.config.appHide && this.taInstance.timeEvent("$MPHide"),
                                                        this._setAutoTrackProperties(e),
                                                        this.config.appShow &&
                                                        ((t = {}),
                                                            e &&
                                                            e.path &&
                                                            ((t.$url_path = this._getPath(e.path)),
                                                                (t.$url_query = P.setQuery(e.query)),
                                                                (t.$scene = String(e.scene || e.from))),
                                                            P.extend(t, this.config.properties),
                                                            P.isFunction(this.config.callback) &&
                                                            P.extend(t, this.config.callback("appShow")),
                                                            this.taInstance._internalTrack("$MPShow", t));
                                                },
                                            },
                                            {
                                                key: "onAppHide",
                                                value: function () {
                                                    var e;
                                                    this.config.appHide &&
                                                        (P.extend((e = {}), this.config.properties),
                                                            P.isFunction(this.config.callback) && P.extend(e, this.config.callback("appHide")),
                                                            this.taInstance._internalTrack("$MPHide", e));
                                                },
                                            },
                                            {
                                                key: "_getCurrentPath",
                                                value: function () {
                                                    var e = "Not to get";
                                                    try {
                                                        var t = getCurrentPages();
                                                        e = t[t.length - 1].route;
                                                    } catch (e) {
                                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                        G.info(e);
                                                    }
                                                    return e;
                                                },
                                            },
                                            {
                                                key: "_setAutoTrackProperties",
                                                value: function (e) {
                                                    this.taInstance._setAutoTrackProperties({});
                                                },
                                            },
                                            {
                                                key: "_getPath",
                                                value: function (e) {
                                                    return "string" == typeof e ? e.replace(/^\//, "") : "Abnormal values";
                                                },
                                            },
                                            {
                                                key: "onPageShare",
                                                value: function (e) {
                                                    if (this.config.pageShare) {
                                                        var t = 1;
                                                        try {
                                                            t = getCurrentPages().length;
                                                        } catch (e) {
                                                            e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                            t = 1;
                                                        }
                                                        this.taInstance._internalTrack("$MPShare", {
                                                            $share_method: "",
                                                            $share_depth: t,
                                                            $url_path: this._getCurrentPath(),
                                                        });
                                                    }
                                                    return P.isObject(e) ? e : {};
                                                },
                                            },
                                            {
                                                key: "onPageShow",
                                                value: function (e) {
                                                    var t;
                                                    this.config.pageShow &&
                                                        ((t = this._getCurrentPath()), P.setQuery(e), (this.referrer = t));
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })(),
                                k = (function () {
                                    function e (t, n, i) {
                                        var r = this;
                                        s(this, e), (this.taInstance = t), (this.config = n || {}), (t = {});
                                        try {
                                            t = i.getLaunchOptionsSync();
                                        } catch (n) {
                                            n = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(n);
                                            t = {};
                                        }
                                        this._onShow(t),
                                            (this.startTracked = true),
                                            i.onShow(function (e) {
                                                r._onShow(e);
                                            }),
                                            i.onHide(function () {
                                                var e;
                                                (r.startTracked = false),
                                                    r.config.appHide &&
                                                    (P.extend((e = {}), r.config.properties),
                                                        P.isFunction(r.config.callback) && P.extend(e, r.config.callback("appHide")),
                                                        r.taInstance._internalTrack("$MPHide", e));
                                            }),
                                            i.onShareAppMessage &&
                                            i.onShareAppMessage(function () {
                                                r.taInstance.track("$MPShare", {
                                                    $share_depth: 1,
                                                    $share_method: "",
                                                    $share_target: "APP_MESSAGE",
                                                }),
                                                    r.taInstance.sdk &&
                                                    r.taInstance.sdk.track("SHARE", {
                                                        target: "APP_MESSAGE",
                                                        trackBy: "GravityEngine",
                                                    });
                                            }),
                                            i.onShareTimeline &&
                                            i.onShareTimeline(function () {
                                                r.taInstance.track("$MPShare", {
                                                    $share_depth: 1,
                                                    $share_method: "",
                                                    $share_target: "TIME_LINE",
                                                }),
                                                    r.taInstance.sdk &&
                                                    r.taInstance.sdk.track("SHARE", {
                                                        target: "TIME_LINE",
                                                        trackBy: "GravityEngine",
                                                    });
                                            }),
                                            i.onAddToFavorites &&
                                            i.onAddToFavorites(function () {
                                                r.taInstance.track("$MPAddFavorites", {
                                                    $url_path: "",
                                                }),
                                                    r.taInstance.sdk &&
                                                    r.taInstance.sdk.track("ADD_TO_WISHLIST", {
                                                        type: "default",
                                                        trackBy: "GravityEngine",
                                                    });
                                            });
                                    }
                                    return (
                                        u(e, [
                                            {
                                                key: "_onShow",
                                                value: function (e) {
                                                    var n;
                                                    P.isObject(e) || (e = {}),
                                                        this.startTracked ||
                                                        (this.config.appHide && this.taInstance.timeEvent("$MPHide"),
                                                            this.config.appShow &&
                                                            (P.extend((n = {}), this.config.properties),
                                                                P.isFunction(this.config.callback) &&
                                                                P.extend(n, this.config.callback("appShow")),
                                                                this.taInstance._internalTrack(
                                                                    "$MPShow",
                                                                    t(
                                                                        t({}, n),
                                                                        {},
                                                                        {
                                                                            $scene: String(
                                                                                (null == (n = e) ? void 0 : n.scene) ||
                                                                                (null == (n = e) ? void 0 : n.from)
                                                                            ),
                                                                            $url_query: P.setQuery(
                                                                                (null == (e = O.getAppOptions()) ? void 0 : e.query) || {}
                                                                            ),
                                                                        }
                                                                    )
                                                                )));
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })(),
                                b = (function () {
                                    function e (t, n, i) {
                                        s(this, e), (this.api = t), (this.config = n), (this._config = i);
                                    }
                                    return (
                                        u(
                                            e,
                                            [
                                                {
                                                    key: "getConfig",
                                                    value: function () {
                                                        return this.config;
                                                    },
                                                },
                                                {
                                                    key: "getStorage",
                                                    value: function (e, t, n) {
                                                        if (!t)
                                                            return "dd_mp" === this._config.platform
                                                                ? ((t = this.api.getStorageSync({
                                                                    key: e,
                                                                })),
                                                                    P.isJSONString(t.data) ? JSON.parse(t.data) : {})
                                                                : ((t = this.api.getStorageSync(e)),
                                                                    P.isJSONString(t) ? JSON.parse(t) : {});
                                                        this.api.getStorage({
                                                            key: e,
                                                            success: function (e) {
                                                                (e = P.isJSONString(e.data) ? JSON.parse(e.data) : {}), n(e);
                                                            },
                                                            fail: function () {
                                                                G.warn("getStorage faild"), n({});
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "setStorage",
                                                    value: function (e, t) {
                                                        this.api.setStorage({
                                                            key: e,
                                                            data: t,
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "_getPlatform",
                                                    value: function () {
                                                        return "";
                                                    },
                                                },
                                                {
                                                    key: "getSystemInfo",
                                                    value: function (e) {
                                                        var t = this._config.mpPlatform;
                                                        this.api.getSystemInfo({
                                                            success: function (n) {
                                                                P.isFunction(t) ? (n.mp_platform = t(n)) : (n.mp_platform = t),
                                                                    e.success(n),
                                                                    "wechat" === t && e.complete();
                                                            },
                                                            complete: function () {
                                                                e.complete();
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "getNetworkType",
                                                    value: function (e) {
                                                        P.isFunction(this.api.getNetworkType)
                                                            ? this.api.getNetworkType({
                                                                success: function (t) {
                                                                    e.success(t);
                                                                },
                                                                complete: function () {
                                                                    e.complete();
                                                                },
                                                            })
                                                            : (e.success({}), e.complete());
                                                    },
                                                },
                                                {
                                                    key: "onNetworkStatusChange",
                                                    value: function (e) {
                                                        P.isFunction(this.api.onNetworkStatusChange)
                                                            ? this.api.onNetworkStatusChange(e)
                                                            : e({});
                                                    },
                                                },
                                                {
                                                    key: "request",
                                                    value: function (e) {
                                                        var t;
                                                        if ("ali_mp" === this._config.platform || "dd_mp" === this._config.platform)
                                                            return (
                                                                ((t = P.extend({}, e)).headers = e.header),
                                                                (t.success = function (t) {
                                                                    (t.statusCode = t.status), e.success(t);
                                                                }),
                                                                (t.fail = function (t) {
                                                                    (t.errMsg = t.errorMessage), e.fail(t);
                                                                }),
                                                                "dd_mp" === this._config.platform
                                                                    ? this.api.httpRequest(t)
                                                                    : this.api.request(t)
                                                            );
                                                        try {
                                                            if ("taobao_mg" !== this._config.platform) return this.api.request(e);
                                                            var n = e,
                                                                i = {},
                                                                r = new XMLHttpRequest();
                                                            if ((r.open(n.method, n.url), n.header))
                                                                for (var o in n.header) r.setRequestHeader(o, n.header[o]);
                                                            return (
                                                                (r.onreadystatechange = function () {
                                                                    4 === r.readyState && 200 === r.status
                                                                        ? ((i.statusCode = 200),
                                                                            P.isJSONString(r.responseText) &&
                                                                            (i.data = JSON.parse(r.responseText)),
                                                                            n.success(i))
                                                                        : 200 !== r.status && ((i.errMsg = "network error"), n.fail(i));
                                                                }),
                                                                (r.ontimeout = function () {
                                                                    (i.errMsg = "timeout"), n.fail(i);
                                                                }),
                                                                r.send(JSON.parse(n.data)),
                                                                r
                                                            );
                                                        } catch (t) { }
                                                    },
                                                },
                                                {
                                                    key: "initAutoTrackInstance",
                                                    value: function (e, t) {
                                                        return (
                                                            P.isObject(t.autoTrack) && (t.autoTrack.isPlugin = t.is_plugin),
                                                            new (this._config.mp ? _ : k)(e, t.autoTrack, this.api)
                                                        );
                                                    },
                                                },
                                                {
                                                    key: "setGlobal",
                                                    value: function (e, t) {
                                                        if (this._config.mp)
                                                            G.warn(
                                                                "GravityAnalytics: we do not set global name for GE instance when you do not enable auto track."
                                                            );
                                                        else if ("ali_mg" !== this._config.platform)
                                                            try {
                                                                GameGlobal[t] = e;
                                                            } catch (e) { }
                                                    },
                                                },
                                                {
                                                    key: "getAppOptions",
                                                    value: function (e) {
                                                        var t = {};
                                                        try {
                                                            t = this.api.getLaunchOptionsSync();
                                                        } catch (e) {
                                                            e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                            t = {};
                                                        }
                                                        if (P.isFunction(e))
                                                            try {
                                                                this._config.mp ? this.api.onAppShow(e) : this.api.onShow(e);
                                                            } catch (e) {
                                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                                G.warn("Cannot register onShow callback.");
                                                            }
                                                        return t;
                                                    },
                                                },
                                                {
                                                    key: "showToast",
                                                    value: function (e) {
                                                        var t;
                                                        P.isFunction(this.api.showToast) &&
                                                            ((t = {
                                                                title: e,
                                                            }),
                                                                ("dd_mp" !== this._config.platform && "ali_mp" !== this._config.platform) ||
                                                                (t.content = e),
                                                                this.api.showToast(t));
                                                    },
                                                },
                                            ],
                                            [
                                                {
                                                    key: "createInstance",
                                                    value: function () {
                                                        return this._createInstance("R_CURRENT_PLATFORM");
                                                    },
                                                },
                                                {
                                                    key: "_createInstance",
                                                    value: function (t) {
                                                        switch (t) {
                                                            case "wechat_mp":
                                                                return new e(
                                                                    wx,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_wechat",
                                                                    },
                                                                    {
                                                                        mpPlatform: "wechat",
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "wechat_mg":
                                                                return new e(
                                                                    wx,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_wechat_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "wechat",
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "qq_mp":
                                                                return new e(
                                                                    qq,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_qq",
                                                                    },
                                                                    {
                                                                        mpPlatform: "qq",
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "qq_mg":
                                                                return new e(
                                                                    qq,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_qq_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "qq",
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "baidu_mp":
                                                                return new e(
                                                                    swan,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_swan",
                                                                    },
                                                                    {
                                                                        mpPlatform: function (e) {
                                                                            return e.host;
                                                                        },
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "baidu_mg":
                                                                return new e(
                                                                    swan,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_swan_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: function (e) {
                                                                            return e.host;
                                                                        },
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "taobao_mg":
                                                                return new e(
                                                                    my,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_taobao_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "taobao",
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "tt_mg":
                                                                return new e(
                                                                    tt,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_tt_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: function (e) {
                                                                            return e.appName;
                                                                        },
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "tt_mp":
                                                                return new e(
                                                                    tt,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_tt",
                                                                    },
                                                                    {
                                                                        mpPlatform: function (e) {
                                                                            return e.appName;
                                                                        },
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "ali_mp":
                                                                return new e(
                                                                    my,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_ali",
                                                                    },
                                                                    {
                                                                        mpPlatform: function (e) {
                                                                            return e.app;
                                                                        },
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "ali_mg":
                                                                return new e(
                                                                    my,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_ali_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: function (e) {
                                                                            return e.app;
                                                                        },
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "dd_mp":
                                                                return new e(
                                                                    dd,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_dd",
                                                                    },
                                                                    {
                                                                        mpPlatform: "dingding",
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "bl_mg":
                                                                return new e(
                                                                    bl,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_bl_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "bilibili",
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "kuaishou_mp":
                                                                return new e(
                                                                    ks,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_kuaishou_program",
                                                                    },
                                                                    {
                                                                        mpPlatform: "kuaishou",
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "kuaishou_mg":
                                                                return new e(
                                                                    ks,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_kuaishou_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "kuaishou_game",
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "qh360_mg":
                                                                return new e(
                                                                    qh,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_qh360",
                                                                    },
                                                                    {
                                                                        mpPlatform: "qh360",
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "tb_mp":
                                                                return new e(
                                                                    my,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_tb",
                                                                    },
                                                                    {
                                                                        mpPlatform: "tb",
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "jd_mp":
                                                                return new e(
                                                                    jd,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_jd",
                                                                    },
                                                                    {
                                                                        mpPlatform: "jd",
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "qh360_mp":
                                                                return new e(
                                                                    qh,
                                                                    {
                                                                        persistenceName: "GravityEngine",
                                                                        persistenceNameOld: "GravityEngine_qh360",
                                                                    },
                                                                    {
                                                                        mpPlatform: "qh360",
                                                                        mp: true,
                                                                        platform: t,
                                                                    }
                                                                );

                                                            case "WEB":
                                                                return new m.createInstance();
                                                        }
                                                    },
                                                },
                                            ]
                                        ),
                                        e
                                    );
                                })(),
                                S = u(function e (t, n) {
                                    var i = this;
                                    s(this, e),
                                        (this.taInstance = t),
                                        (this.config = n || {}),
                                        this.config.appShow && this.taInstance._internalTrack("$MPShow"),
                                        this.config.appHide && this.taInstance.timeEvent("$MPHide"),
                                        qg.onShow(function () {
                                            var e;
                                            i.config.appHide && i.taInstance.timeEvent("$MPHide"),
                                                i.config.appShow &&
                                                (P.extend((e = {}), i.config.properties),
                                                    P.isFunction(i.config.callback) && P.extend(e, i.config.callback("appShow")),
                                                    i.taInstance._internalTrack("$MPShow"));
                                        }),
                                        qg.onHide(function () {
                                            var e;
                                            i.config.appHide &&
                                                (P.extend((e = {}), i.config.properties),
                                                    P.isFunction(i.config.callback) && P.extend(e, i.config.callback("appHide")),
                                                    i.taInstance._internalTrack("$MPHide"));
                                        });
                                }),
                                I = (function () {
                                    function e () {
                                        s(this, e),
                                            (this.config = {
                                                persistenceName: "gravityengine",
                                                persistenceNameOld: "gravityengine_qg_vivo_game",
                                                asyncPersistence: true,
                                            });
                                    }
                                    return (
                                        u(
                                            e,
                                            [
                                                {
                                                    key: "getConfig",
                                                    value: function () {
                                                        return this.config || {};
                                                    },
                                                },
                                                {
                                                    key: "getStorage",
                                                    value: function (e, t, n) {
                                                        if (!t)
                                                            return (
                                                                (t = qg.getStorageSync({
                                                                    key: e,
                                                                })),
                                                                P.isJSONString(t) ? JSON.parse(t) : {}
                                                            );
                                                        qg.getStorage({
                                                            key: e,
                                                            success: function (e) {
                                                                (e = P.isJSONString(e) ? JSON.parse(e) : {}), n(e);
                                                            },
                                                            fail: function () {
                                                                n({});
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "setStorage",
                                                    value: function (e, t) {
                                                        qg.setStorage({
                                                            key: e,
                                                            value: t,
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "getSystemInfo",
                                                    value: function (e) {
                                                        qg.getSystemInfo({
                                                            success: function (t) {
                                                                var n = t,
                                                                    i = [t.osType, t.osVersionName].join(" ");
                                                                (n.brand = t.manufacturer),
                                                                    (n.system = i),
                                                                    (n.mp_platform = "vivo_qg"),
                                                                    e.success(n);
                                                            },
                                                            complete: function () {
                                                                e.complete();
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "getQuickDevice",
                                                    value: function (e) {
                                                        var t = {
                                                            os_name: "android",
                                                            android_id: "",
                                                            imei: "",
                                                            oaid: "",
                                                            mac: "",
                                                            android_version: "",
                                                            api_version: 0,
                                                            rom: {
                                                                gravityengine_qg_huawei_game: "EMUI",
                                                                gravityengine_qg: "MIUI",
                                                                gravityengine_qg_oppo_game: "ColorOS",
                                                                gravityengine_qg_vivo_game: "FuntouchOS",
                                                                gravityengine_qg_mz_game: "Flyme",
                                                            }[e.platform],
                                                            rom_version: "",
                                                            phone_brand: "",
                                                            phone_model: "",
                                                        };
                                                        qg.getSystemInfo({
                                                            success: function (n) {
                                                                var i;
                                                                (t.android_version = n.system),
                                                                    (t.api_version = n.platformVersionCode),
                                                                    (t.rom_version = n.COREVersion),
                                                                    (t.phone_brand = n.brand),
                                                                    (t.phone_model = n.model),
                                                                    qg.getOAID &&
                                                                    ((n =
                                                                        null !=
                                                                            (i = null == (i = (n = qg).getOAID) ? void 0 : i.call(n).oaid)
                                                                            ? i
                                                                            : ""),
                                                                        (t.android_id = n),
                                                                        (t.imei = n),
                                                                        (t.oaid = n)),
                                                                    e.success(t);
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "getNetworkType",
                                                    value: function (e) {
                                                        qg.getNetworkType({
                                                            success: function (t) {
                                                                var n = t;
                                                                (n.networkType = t.type), e.success(n);
                                                            },
                                                            complete: function () {
                                                                e.complete();
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "onNetworkStatusChange",
                                                    value: function (e) {
                                                        qg.subscribeNetworkStatus({
                                                            callback: function (t) {
                                                                var n = t;
                                                                (n.networkType = t.type), e(n);
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "request",
                                                    value: function (e) {
                                                        return qg.request({
                                                            url: e.url,
                                                            data: e.data,
                                                            method: e.method,
                                                            header: e.header,
                                                            success: function (t) {
                                                                e.success(t);
                                                            },
                                                            fail: function (t) {
                                                                e.fail(t);
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "initAutoTrackInstance",
                                                    value: function (e, t) {
                                                        return new S(e, t.autoTrack);
                                                    },
                                                },
                                                {
                                                    key: "setGlobal",
                                                    value: function (e, t) {
                                                        globalThis[t] = e;
                                                    },
                                                },
                                                {
                                                    key: "getAppOptions",
                                                    value: function () {
                                                        try {
                                                            if (!qg.getLaunchOptionsSync) return {};
                                                            var e = qg.getLaunchOptionsSync(),
                                                                t = e.referrerInfo.extraData,
                                                                n = e.query.internal,
                                                                i = n && n.channel ? n.channel : "";
                                                            if (t)
                                                                return {
                                                                    query: t,
                                                                    scene: "",
                                                                };
                                                            if ("deeplink" !== i) return {};
                                                            var r,
                                                                o = n.custom_params,
                                                                a = JSON.parse(o).cus_origin_uri,
                                                                s = new URLSearchParams(a.split("?")[1]),
                                                                c = {},
                                                                u = (function (e, t) {
                                                                    var n,
                                                                        i,
                                                                        r,
                                                                        o,
                                                                        a =
                                                                            ("undefined" != typeof Symbol && e[Symbol.iterator]) ||
                                                                            e["@@iterator"];
                                                                    if (a)
                                                                        return (
                                                                            (i = !(n = true)),
                                                                            {
                                                                                s: function () {
                                                                                    a = a.call(e);
                                                                                },
                                                                                n: function () {
                                                                                    var e = a.next();
                                                                                    return (n = e.done), e;
                                                                                },
                                                                                e: function (e) {
                                                                                    (i = true), (r = e);
                                                                                },
                                                                                f: function () {
                                                                                    try {
                                                                                        n || null == a.return || a.return();
                                                                                    } finally {
                                                                                        if (i) throw r;
                                                                                    }
                                                                                },
                                                                            }
                                                                        );
                                                                    if (
                                                                        Array.isArray(e) ||
                                                                        (a = f(e)) ||
                                                                        (t && e && "number" == typeof e.length)
                                                                    )
                                                                        return (
                                                                            a && (e = a),
                                                                            (o = 0),
                                                                            {
                                                                                s: (t = function () { }),
                                                                                n: function () {
                                                                                    return o >= e.length
                                                                                        ? {
                                                                                            done: true,
                                                                                        }
                                                                                        : {
                                                                                            done: false,
                                                                                            value: e[o++],
                                                                                        };
                                                                                },
                                                                                e: function (e) {
                                                                                    throw e;
                                                                                },
                                                                                f: t,
                                                                            }
                                                                        );
                                                                    throw new TypeError(
                                                                        "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                                                                    );
                                                                })(s);
                                                            try {
                                                                for (u.s(); !(r = u.n()).done;) {
                                                                    var l = p(r.value, 2),
                                                                        d = l[0],
                                                                        h = l[1];
                                                                    c[d] = h;
                                                                }
                                                            } catch (e) {
                                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                                u.e(e);
                                                            } finally {
                                                                u.f();
                                                            }
                                                            return {
                                                                query: c,
                                                                scene: "",
                                                            };
                                                        } catch (e) {
                                                            e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                            return {};
                                                        }
                                                    },
                                                },
                                                {
                                                    key: "showToast",
                                                    value: function (e) {
                                                        qg.showToast({
                                                            message: e,
                                                            duration: 0,
                                                        });
                                                    },
                                                },
                                            ],
                                            [
                                                {
                                                    key: "createInstance",
                                                    value: function () {
                                                        return new e();
                                                    },
                                                },
                                            ]
                                        ),
                                        e
                                    );
                                })(),
                                A = u(function e (t, n, i) {
                                    var r = this;
                                    s(this, e),
                                        (this.taInstance = t),
                                        (this.config = n || {}),
                                        this.config.appShow &&
                                        (P.extend((t = {}), this.config.properties),
                                            P.isFunction(this.config.callback) && P.extend(t, this.config.callback("appShow")),
                                            this.taInstance._internalTrack("$MPShow", t)),
                                        this.config.appHide && this.taInstance.timeEvent("$MPHide"),
                                        i.onShow(function () {
                                            var e;
                                            r.config.appHide && r.taInstance.timeEvent("$MPHide"),
                                                r.config.appShow &&
                                                (P.extend((e = {}), r.config.properties),
                                                    P.isFunction(r.config.callback) && P.extend(e, r.config.callback("appShow")),
                                                    r.taInstance._internalTrack("$MPShow", e));
                                        }),
                                        i.onHide(function () {
                                            var e;
                                            r.config.appHide &&
                                                (P.extend((e = {}), r.config.properties),
                                                    P.isFunction(r.config.callback) && P.extend(e, r.config.callback("appHide")),
                                                    r.taInstance._internalTrack("$MPHide", e));
                                        });
                                }),
                                w = (function () {
                                    function e (t, n, i) {
                                        s(this, e), (this.api = t), (this.config = n), (this._config = i);
                                    }
                                    return (
                                        u(
                                            e,
                                            [
                                                {
                                                    key: "getConfig",
                                                    value: function () {
                                                        return this.config || {};
                                                    },
                                                },
                                                {
                                                    key: "getStorage",
                                                    value: function (e, t, n) {
                                                        if (((e = localStorage.getItem(e)), !t))
                                                            return P.isJSONString(e) ? JSON.parse(e) : {};
                                                        P.isJSONString(e) ? n(JSON.parse(e)) : n({});
                                                    },
                                                },
                                                {
                                                    key: "setStorage",
                                                    value: function (e, t) {
                                                        localStorage.setItem(e, t);
                                                    },
                                                },
                                                {
                                                    key: "getSystemInfo",
                                                    value: function (e) {
                                                        var t = this._config.mpPlatform;
                                                        this.api.getSystemInfo({
                                                            success: function (n) {
                                                                (n.mp_platform = t), e.success(n);
                                                            },
                                                            complete: function () {
                                                                e.complete();
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "getQuickDevice",
                                                    value: function (e) {
                                                        var t = {
                                                            os_name: "android",
                                                            android_id: "",
                                                            imei: "",
                                                            oaid: "",
                                                            mac: "",
                                                            android_version: "",
                                                            api_version: 0,
                                                            rom: {
                                                                gravityengine_qg_huawei_game: "EMUI",
                                                                gravityengine_qg: "MIUI",
                                                                gravityengine_qg_oppo_game: "ColorOS",
                                                                gravityengine_qg_vivo_game: "FuntouchOS",
                                                                gravityengine_qg_mz_game: "Flyme",
                                                            }[e.platform],
                                                            rom_version: "",
                                                            phone_brand: "",
                                                            phone_model: "",
                                                        },
                                                            n = this;
                                                        this.api.getSystemInfo({
                                                            success: function (i) {
                                                                function r () {
                                                                    e.success(t);
                                                                }
                                                                (t.android_version = i.system),
                                                                    (t.api_version = i.platformVersionCode),
                                                                    (t.rom_version = i.COREVersion),
                                                                    (t.phone_brand = i.brand),
                                                                    (t.phone_model = i.model),
                                                                    n.api.getDeviceId
                                                                        ? n.api.getDeviceId({
                                                                            success: function (e) {
                                                                                (t.android_id = e.deviceId),
                                                                                    (t.imei = e.deviceId),
                                                                                    (t.oaid = e.deviceId),
                                                                                    r();
                                                                            },
                                                                        })
                                                                        : n.api.getOAID
                                                                            ? n.api.getOAID({
                                                                                success: function (e) {
                                                                                    (t.android_id = e.oaid),
                                                                                        (t.imei = e.oaid),
                                                                                        (t.oaid = e.oaid),
                                                                                        r();
                                                                                },
                                                                            })
                                                                            : r();
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "getNetworkType",
                                                    value: function (e) {
                                                        this.api.getNetworkType({
                                                            success: function (t) {
                                                                e.success(t);
                                                            },
                                                            complete: function () {
                                                                e.complete();
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "onNetworkStatusChange",
                                                    value: function (e) {
                                                        this.api.onNetworkStatusChange({
                                                            callback: function (t) {
                                                                e(t);
                                                            },
                                                        });
                                                    },
                                                },
                                                {
                                                    key: "request",
                                                    value: function (e) {
                                                        var t = {},
                                                            n = new XMLHttpRequest();
                                                        if ((n.open(e.method, e.url), e.header))
                                                            for (var i in e.header) n.setRequestHeader(i, e.header[i]);
                                                        return (
                                                            (n.onreadystatechange = function () {
                                                                4 === n.readyState && 200 === n.status
                                                                    ? ((t.statusCode = 200),
                                                                        P.isJSONString(n.responseText) &&
                                                                        (t.data = JSON.parse(n.responseText)),
                                                                        e.success(t))
                                                                    : 200 !== n.status && ((t.errMsg = "network error"), e.fail(t));
                                                            }),
                                                            (n.ontimeout = function () {
                                                                (t.errMsg = "timeout"), e.fail(t);
                                                            }),
                                                            n.send(e.data),
                                                            n
                                                        );
                                                    },
                                                },
                                                {
                                                    key: "initAutoTrackInstance",
                                                    value: function (e, t) {
                                                        return new A(e, t.autoTrack, this.api);
                                                    },
                                                },
                                                {
                                                    key: "setGlobal",
                                                    value: function (e, t) {
                                                        globalThis[t] = e;
                                                    },
                                                },
                                                {
                                                    key: "getAppOptions",
                                                    value: function () {
                                                        return "oppo_qg" === this._config.mpPlatform
                                                            ? this.api.getEnterOptionsSync()
                                                            : this.api.getLaunchOptionsSync();
                                                    },
                                                },
                                                {
                                                    key: "showToast",
                                                    value: function (e) {
                                                        this.api.showToast({
                                                            title: e,
                                                            icon: "none",
                                                            duration: 2e3,
                                                        });
                                                    },
                                                },
                                            ],
                                            [
                                                {
                                                    key: "createInstance",
                                                    value: function () {
                                                        return this._createInstance("R_CURRENT_PLATFORM");
                                                    },
                                                },
                                                {
                                                    key: "_createInstance",
                                                    value: function (t) {
                                                        switch (t) {
                                                            case "oppo":
                                                                return new e(
                                                                    qg,
                                                                    {
                                                                        persistenceName: "gravityengine",
                                                                        persistenceNameOld: "gravityengine_qg_oppo_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "oppo_qg",
                                                                    }
                                                                );

                                                            case "huawei":
                                                                return new e(
                                                                    hbs,
                                                                    {
                                                                        persistenceName: "gravityengine",
                                                                        persistenceNameOld: "gravityengine_qg_huawei_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "huawei_qg",
                                                                    }
                                                                );

                                                            case "mz":
                                                                return new e(
                                                                    qg,
                                                                    {
                                                                        persistenceName: "gravityengine",
                                                                        persistenceNameOld: "gravityengine_qg_mz_game",
                                                                    },
                                                                    {
                                                                        mpPlatform: "mz",
                                                                    }
                                                                );

                                                            case "xiaomi":
                                                                return new e(
                                                                    qg,
                                                                    {
                                                                        persistenceName: "gravityengine",
                                                                        persistenceNameOld: "gravityengine_qg",
                                                                    },
                                                                    {
                                                                        mpPlatform: "xiaomi",
                                                                    }
                                                                );
                                                        }
                                                    },
                                                },
                                            ]
                                        ),
                                        e
                                    );
                                })(),
                                E = (function () {
                                    function e () {
                                        s(this, e);
                                    }
                                    return (
                                        u(e, null, [
                                            {
                                                key: "createInstance",
                                                value: function () {
                                                    var e,
                                                        t = Object.freeze({
                                                            WECHAT_GAME: 104,
                                                            QQ_PLAY: 105,
                                                            BAIDU_GAME: 107,
                                                            VIVO_GAME: 108,
                                                            OPPO_GAME: 109,
                                                            HUAWEI_GAME: 110,
                                                            XIAOMI_GAME: 111,
                                                            BYTEDANCE_GAME: 117,
                                                            QTT_GAME: 116,
                                                            LINKSURE: 119,
                                                            ALIPAY_GAME: 113,
                                                            TAOBAO_MINIGAME: 121,
                                                            TAOBAO_MINI_GAME: "TAOBAO_MINI_GAME",
                                                            WECHAT_MINI_GAME: "WECHAT_GAME",
                                                            BAIDU_MINI_GAME: "BAIDU_MINI_GAME",
                                                            XIAOMI_QUICK_GAME: "XIAOMI_QUICK_GAME",
                                                            OPPO_MINI_GAME: "OPPO_MINI_GAME",
                                                            VIVO_MINI_GAME: "VIVO_MINI_GAME",
                                                            HUAWEI_QUICK_GAME: "HUAWEI_QUICK_GAME",
                                                            BYTEDANCE_MINI_GAME: "BYTEDANCE_MINI_GAME",
                                                            QTT_MINI_GAME: "QTT_MINI_GAME",
                                                            LINKSURE_MINI_GAME: "LINKSURE_MINI_GAME",
                                                            ALIPAY_MINI_GAME: "ALIPAY_MINI_GAME",
                                                        });
                                                    return cc.sys.platform === t.WECHAT_GAME || cc.sys.platform === t.WECHAT_MINI_GAME
                                                        ? b._createInstance("wechat_mg")
                                                        : cc.sys.platform === t.BAIDU_GAME || cc.sys.platform === t.BAIDU_MIN_GAME
                                                            ? b._createInstance("baidu_mg")
                                                            : cc.sys.platform === t.TAOBAO_MINI_GAME || cc.sys.platform === t.TAOBAO_MINIGAME
                                                                ? b._createInstance("taobao_mg")
                                                                : cc.sys.platform === t.VIVO_GAME || cc.sys.platform === t.VIVO_MINI_GAME
                                                                    ? I.createInstance()
                                                                    : cc.sys.platform === t.QQ_PLAY
                                                                        ? b._createInstance("qq_mg")
                                                                        : cc.sys.platform === t.OPPO_GAME || cc.sys.platform === t.OPPO_MINI_GAME
                                                                            ? w._createInstance("oppo")
                                                                            : cc.sys.platform === t.HUAWEI_GAME || cc.sys.platform === t.HUAWEI_QUICK_GAME
                                                                                ? w._createInstance("huawei")
                                                                                : cc.sys.platform === t.XIAOMI_GAME || cc.sys.platform === t.XIAOMI_QUICK_GAME
                                                                                    ? w._createInstance("xiaomi")
                                                                                    : cc.sys.platform === t.ALIPAY_GAME || cc.sys.platform === t.ALIPAY_MINI_GAME
                                                                                        ? b._createInstance("ali_mg")
                                                                                        : cc.sys.platform === t.BYTEDANCE_GAME || cc.sys.platform === t.BYTEDANCE_MINI_GAME
                                                                                            ? b._createInstance("tt_mg")
                                                                                            : (((e = m.createInstance())._sysCallback = function () {
                                                                                                return {
                                                                                                    system: cc.sys.os.replace(" ", "") + " " + cc.sys.osVersion,
                                                                                                };
                                                                                            }),
                                                                                                (e.getNetworkType = function (e) {
                                                                                                    var t = {};
                                                                                                    switch (cc.sys.getNetworkType()) {
                                                                                                        case cc.sys.NetworkType.LAN:
                                                                                                            t.networkType = "WIFI";
                                                                                                            break;

                                                                                                        case cc.sys.NetworkType.WWAN:
                                                                                                            t.networkType = "WWAN";
                                                                                                            break;

                                                                                                        default:
                                                                                                            t.networkType = "NONE";
                                                                                                    }
                                                                                                    e.success(t), e.complete();
                                                                                                }),
                                                                                                (e.getSystemInfo = function (t) {
                                                                                                    var n = {
                                                                                                        mp_platform: cc.sys.platform.toString(),
                                                                                                        system: e._getOs(),
                                                                                                        screenWidth: window.screen.width,
                                                                                                        screenHeight: window.screen.height,
                                                                                                    };
                                                                                                    e._sysCallback && (n = P.extend(n, e._sysCallback(t))),
                                                                                                        t.success(n),
                                                                                                        t.complete();
                                                                                                }),
                                                                                                e);
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })(),
                                O = (function () {
                                    function e () {
                                        s(this, e);
                                    }
                                    return (
                                        u(e, null, [
                                            {
                                                key: "_getCurrentPlatform",
                                                value: function () {
                                                    return this.currentPlatform || (this.currentPlatform = E.createInstance());
                                                },
                                            },
                                            {
                                                key: "getConfig",
                                                value: function () {
                                                    return this._getCurrentPlatform().getConfig();
                                                },
                                            },
                                            {
                                                key: "getStorage",
                                                value: function (e, t, n) {
                                                    return this._getCurrentPlatform().getStorage(e, t, n);
                                                },
                                            },
                                            {
                                                key: "setStorage",
                                                value: function (e, t) {
                                                    return this._getCurrentPlatform().setStorage(e, t);
                                                },
                                            },
                                            {
                                                key: "getSystemInfo",
                                                value: function (e) {
                                                    return this._getCurrentPlatform().getSystemInfo(e);
                                                },
                                            },
                                            {
                                                key: "getNetworkType",
                                                value: function (e) {
                                                    return this._getCurrentPlatform().getNetworkType(e);
                                                },
                                            },
                                            {
                                                key: "getQuickDevice",
                                                value: function (e) {
                                                    return this._getCurrentPlatform().getQuickDevice(e);
                                                },
                                            },
                                            {
                                                key: "onNetworkStatusChange",
                                                value: function (e) {
                                                    this._getCurrentPlatform().onNetworkStatusChange(e);
                                                },
                                            },
                                            {
                                                key: "request",
                                                value: function (e) {
                                                    return this._getCurrentPlatform().request(e);
                                                },
                                            },
                                            {
                                                key: "initAutoTrackInstance",
                                                value: function (e, t) {
                                                    return this._getCurrentPlatform().initAutoTrackInstance(e, t);
                                                },
                                            },
                                            {
                                                key: "setGlobal",
                                                value: function (e, t) {
                                                    e && t && this._getCurrentPlatform().setGlobal(e, t);
                                                },
                                            },
                                            {
                                                key: "getAppOptions",
                                                value: function (e) {
                                                    return this._getCurrentPlatform().getAppOptions(e);
                                                },
                                            },
                                            {
                                                key: "showDebugToast",
                                                value: function (e) {
                                                    this._getCurrentPlatform().showToast(e);
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })(),
                                P = {},
                                N = Array.prototype,
                                T = Object.prototype,
                                C = N.slice,
                                x = T.toString,
                                M = Object.prototype.hasOwnProperty,
                                R = N.forEach,
                                D = ((T = Array.isArray), {});
                            function j () {
                                return new RegExp(
                                    /(.*?)\.?([^.]*?)\.(com|net|org|biz|ws|in|me|co\.uk|co|org\.uk|ltd\.uk|plc\.uk|me\.uk|edu|mil|br\.com|cn\.com|eu\.com|hu\.com|no\.com|qc\.com|sa\.com|se\.com|se\.net|us\.com|uy\.com|ac|co\.ac|gv\.ac|or\.ac|ac\.ac|af|am|as|at|ac\.at|co\.at|gv\.at|or\.at|asn\.au|com\.au|edu\.au|org\.au|net\.au|id\.au|be|ac\.be|adm\.br|adv\.br|am\.br|arq\.br|art\.br|bio\.br|cng\.br|cnt\.br|com\.br|ecn\.br|eng\.br|esp\.br|etc\.br|eti\.br|fm\.br|fot\.br|fst\.br|g12\.br|gov\.br|ind\.br|inf\.br|jor\.br|lel\.br|med\.br|mil\.br|net\.br|nom\.br|ntr\.br|odo\.br|org\.br|ppg\.br|pro\.br|psc\.br|psi\.br|rec\.br|slg\.br|tmp\.br|tur\.br|tv\.br|vet\.br|zlg\.br|br|ab\.ca|bc\.ca|mb\.ca|nb\.ca|nf\.ca|ns\.ca|nt\.ca|on\.ca|pe\.ca|qc\.ca|sk\.ca|yk\.ca|ca|cc|ac\.cn|net\.cn|com\.cn|edu\.cn|gov\.cn|org\.cn|bj\.cn|sh\.cn|tj\.cn|cq\.cn|he\.cn|nm\.cn|ln\.cn|jl\.cn|hl\.cn|js\.cn|zj\.cn|ah\.cn|gd\.cn|gx\.cn|hi\.cn|sc\.cn|gz\.cn|yn\.cn|xz\.cn|sn\.cn|gs\.cn|qh\.cn|nx\.cn|xj\.cn|tw\.cn|hk\.cn|mo\.cn|cn|cx|cz|de|dk|fo|com\.ec|tm\.fr|com\.fr|asso\.fr|presse\.fr|fr|gf|gs|co\.il|net\.il|ac\.il|k12\.il|gov\.il|muni\.il|ac\.in|co\.in|org\.in|ernet\.in|gov\.in|net\.in|res\.in|is|it|ac\.jp|co\.jp|go\.jp|or\.jp|ne\.jp|ac\.kr|co\.kr|go\.kr|ne\.kr|nm\.kr|or\.kr|li|lt|lu|asso\.mc|tm\.mc|com\.mm|org\.mm|net\.mm|edu\.mm|gov\.mm|ms|nl|no|nu|pl|ro|org\.ro|store\.ro|tm\.ro|firm\.ro|www\.ro|arts\.ro|rec\.ro|info\.ro|nom\.ro|nt\.ro|se|si|com\.sg|org\.sg|net\.sg|gov\.sg|sk|st|tf|ac\.th|co\.th|go\.th|mi\.th|net\.th|or\.th|tm|to|com\.tr|edu\.tr|gov\.tr|k12\.tr|net\.tr|org\.tr|com\.tw|org\.tw|net\.tw|ac\.uk|uk\.com|uk\.net|gb\.com|gb\.net|vg|sh|kz|ch|info|ua|gov|name|pro|ie|hk|com\.hk|org\.hk|net\.hk|edu\.hk|us|tk|cd|by|ad|lv|eu\.lv|bz|es|jp|cl|ag|mobi|eu|co\.nz|org\.nz|net\.nz|maori\.nz|iwi\.nz|io|la|md|sc|sg|vc|tw|travel|my|se|tv|pt|com\.pt|edu\.pt|asia|fi|com\.ve|net\.ve|fi|org\.ve|web\.ve|info\.ve|co\.ve|tel|im|gr|ru|net\.ru|org\.ru|hr|com\.hr|ly|xyz)$/
                                );
                            }
                            function L (e, t) {
                                var n = e.charAt(0);
                                return (t = t.split(n)), n === e ? t : t[(e = parseInt(e.substring(1), 10)) < 0 ? t.length + e : e - 1];
                            }
                            function q (e, t) {
                                for (
                                    var n, i = e.charAt(0), r = t.split("&"), o = [], a = {}, s = e.substring(1), c = 0, u = r.length;
                                    c < u;
                                    c++
                                )
                                    if ("" !== (o = (o = r[c].match(/(.*?)=(.*)/)) || [r[c], r[c], ""])[1].replace(/\s/g, "")) {
                                        if (((o[2] = ((n = o[2] || ""), P.decodeURIComponent(n.replace(/\+/g, " ")))), s === o[1]))
                                            return o[2];
                                        (n = o[1].match(/(.*)\[([0-9]+)\]/))
                                            ? ((a[n[1]] = a[n[1]] || []), (a[n[1]][n[2]] = o[2]))
                                            : (a[o[1]] = o[2]);
                                    }
                                return i === e ? a : a[s];
                            }
                            (P.isNumber = function (e) {
                                return "number" == typeof e
                                    ? 0 == e - e
                                    : "string" == typeof e && "" !== e.trim() && (Number.isFinite ? Number.isFinite(+e) : isFinite(+e));
                            }),
                                (P.each = function (e, t, n) {
                                    if (null == e) return false;
                                    if (R && e.forEach === R) e.forEach(t, n);
                                    else if (e.length === +e.length) {
                                        for (var i = 0, r = e.length; i < r; i++) if (i in e && t.call(n, e[i], i, e) === D) return false;
                                    } else for (var o in e) if (M.call(e, o) && t.call(n, e[o], o, e) === D) return false;
                                }),
                                (P.sleep = function (e) {
                                    return new Promise(function (t) {
                                        return setTimeout(t, e);
                                    });
                                }),
                                (P.extend = function (e) {
                                    return (
                                        P.each(C.call(arguments, 1), function (t) {
                                            for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                                        }),
                                        e
                                    );
                                }),
                                (P.extend2Layers = function (e) {
                                    return (
                                        P.each(C.call(arguments, 1), function (t) {
                                            for (var n in t)
                                                void 0 !== t[n] &&
                                                    (P.isObject(t[n]) && P.isObject(e[n]) ? P.extend(e[n], t[n]) : (e[n] = t[n]));
                                        }),
                                        e
                                    );
                                }),
                                (P.isArray =
                                    T ||
                                    function (e) {
                                        return "[object Array]" === x.call(e);
                                    }),
                                (P.isFunction = function (e) {
                                    try {
                                        return "function" == typeof e;
                                    } catch (e) {
                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                        return false;
                                    }
                                }),
                                (P.isPromise = function (e) {
                                    return "[object Promise]" === x.call(e) && null != e;
                                }),
                                (P.isObject = function (e) {
                                    return "[object Object]" === x.call(e) && null != e;
                                }),
                                (P.isEmptyObject = function (e) {
                                    if (P.isObject(e)) {
                                        for (var t in e) if (M.call(e, t)) return false;
                                        return true;
                                    }
                                    return false;
                                }),
                                (P.isUndefined = function (e) {
                                    return void 0 === e;
                                }),
                                (P.isString = function (e) {
                                    return "[object String]" === x.call(e);
                                }),
                                (P.isDate = function (e) {
                                    return "[object Date]" === x.call(e);
                                }),
                                (P.isBoolean = function (e) {
                                    return "[object Boolean]" === x.call(e);
                                }),
                                (P.isNumber = function (e) {
                                    return "[object Number]" === x.call(e) && /[\d\.]+/.test(String(e));
                                }),
                                (P.isJSONString = function (e) {
                                    try {
                                        JSON.parse(e);
                                    } catch (e) {
                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                        return false;
                                    }
                                    return true;
                                }),
                                (P.decodeURIComponent = function (e) {
                                    var t = "";
                                    try {
                                        t = decodeURIComponent(e);
                                    } catch (n) {
                                        n = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(n);
                                        t = e;
                                    }
                                    return t;
                                }),
                                (P.encodeURIComponent = function (e) {
                                    var t = "";
                                    try {
                                        t = encodeURIComponent(e);
                                    } catch (n) {
                                        n = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(n);
                                        t = e;
                                    }
                                    return t;
                                }),
                                (P.utf8Encode = function (e) {
                                    for (
                                        var t,
                                        n = "",
                                        i = (t = 0),
                                        r = (e = (e + "").replace(/\r\n/g, "\n").replace(/\r/g, "\n")).length,
                                        o = 0;
                                        o < r;
                                        o++
                                    ) {
                                        var a = e.charCodeAt(o),
                                            s = null;
                                        a < 128
                                            ? t++
                                            : (s =
                                                127 < a && a < 2048
                                                    ? String.fromCharCode((a >> 6) | 192, (63 & a) | 128)
                                                    : String.fromCharCode((a >> 12) | 224, ((a >> 6) & 63) | 128, (63 & a) | 128)),
                                            null !== s && (i < t && (n += e.substring(i, t)), (n += s), (i = t = o + 1));
                                    }
                                    return i < t && (n += e.substring(i, e.length)), n;
                                }),
                                (P.base64Encode = function (e) {
                                    var t,
                                        n,
                                        i,
                                        r,
                                        o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
                                        a = 0,
                                        s = 0,
                                        c = "",
                                        u = [];
                                    if (!e) return e;
                                    for (
                                        e = P.utf8Encode(e);
                                        (t = ((r = (e.charCodeAt(a++) << 16) | (e.charCodeAt(a++) << 8) | e.charCodeAt(a++)) >> 12) & 63),
                                        (n = (r >> 6) & 63),
                                        (i = 63 & r),
                                        (u[s++] = o.charAt((r >> 18) & 63) + o.charAt(t) + o.charAt(n) + o.charAt(i)),
                                        a < e.length;

                                    );
                                    switch (((c = u.join("")), e.length % 3)) {
                                        case 1:
                                            c = c.slice(0, -2) + "==";
                                            break;

                                        case 2:
                                            c = c.slice(0, -1) + "=";
                                    }
                                    return c;
                                }),
                                (P.encodeDates = function (e) {
                                    return (
                                        P.each(e, function (t, n) {
                                            if (P.isDate(t)) e[n] = P.formatDate(t);
                                            else if (P.isObject(t)) e[n] = P.encodeDates(t);
                                            else if (P.isArray(t))
                                                for (var i = 0; i < t.length; i++) P.isDate(t[i]) && (e[n][i] = P.formatDate(t[i]));
                                        }),
                                        e
                                    );
                                }),
                                (P.formatDate = function (e) {
                                    function t (e) {
                                        return e < 10 ? "0" + e : e;
                                    }
                                    return (
                                        e.getFullYear() +
                                        "-" +
                                        t(e.getMonth() + 1) +
                                        "-" +
                                        t(e.getDate()) +
                                        " " +
                                        t(e.getHours()) +
                                        ":" +
                                        t(e.getMinutes()) +
                                        ":" +
                                        t(e.getSeconds()) +
                                        "." +
                                        ((e = e.getMilliseconds()) < 100 && 9 < e ? "0" + e : e < 10 ? "00" + e : e)
                                    );
                                }),
                                (P.searchObjDate = function (e) {
                                    try {
                                        (P.isObject(e) || P.isArray(e)) &&
                                            P.each(e, function (t, n) {
                                                P.isObject(t) || P.isArray(t)
                                                    ? P.searchObjDate(e[n])
                                                    : P.isDate(t) && (e[n] = P.formatDate(t));
                                            });
                                    } catch (e) {
                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                        G.warn(e);
                                    }
                                }),
                                (P.UUID = function () {
                                    var e = new Date().getTime();
                                    return String(Math.random()).replace(".", "").slice(1, 11) + "-" + e;
                                }),
                                (P.UUIDv4 = function () {
                                    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) {
                                        var t = (16 * Math.random()) | 0;
                                        return ("x" === e ? t : (3 & t) | 8).toString(16);
                                    });
                                }),
                                (P.setMpPlatform = function (e) {
                                    P.mpPlatform = e;
                                }),
                                (P.getMpPlatform = function () {
                                    return P.mpPlatform;
                                }),
                                (P.createExtraHeaders = function () {
                                    return {
                                        "GE-Integration-Type": v,
                                        "GE-Integration-Version": g,
                                        "GE-Integration-Count": "1",
                                        "GE-Integration-Extra": P.getMpPlatform(),
                                    };
                                }),
                                (P.checkAppId = function (e) {
                                    if ("number" == typeof e) e = String(e);
                                    else if ("string" != typeof e) return "";
                                    return e.replace(/\s*/g, "");
                                }),
                                (P.checkUrl = function (e) {
                                    return (e = e.replace(/\s*/g, "")), P.url("basic", e);
                                }),
                                (P.url = function (e, t) {
                                    var n,
                                        i = {};
                                    if ("tld?" === e) return j();
                                    if (((t = t || window.location.toString()), !e)) return t;
                                    if (((e = e.toString()), t.match(/^mailto:([^/].+)/)))
                                        (n = t.match(/^mailto:([^/].+)/)), (i.protocol = "mailto"), (i.email = n[1]);
                                    else {
                                        if (
                                            ((t = t.match(/(.*?)\/#!(.*)/) ? (n = t.match(/(.*?)\/#!(.*)/))[1] + n[2] : t).match(
                                                /(.*?)#(.*)/
                                            ) && ((n = t.match(/(.*?)#(.*)/)), (i.hash = n[2]), (t = n[1])),
                                                i.hash && e.match(/^#/))
                                        )
                                            return q(e, i.hash);
                                        if (
                                            (t.match(/(.*?)\?(.*)/) && ((n = t.match(/(.*?)\?(.*)/)), (i.query = n[2]), (t = n[1])),
                                                i.query && e.match(/^\?/))
                                        )
                                            return q(e, i.query);
                                        if (
                                            (t.match(/(.*?):?\/\/(.*)/) &&
                                                ((n = t.match(/(.*?):?\/\/(.*)/)), (i.protocol = n[1].toLowerCase()), (t = n[2])),
                                                t.match(/(.*?)(\/.*)/) && ((n = t.match(/(.*?)(\/.*)/)), (i.path = n[2]), (t = n[1])),
                                                (i.path = (i.path || "").replace(/^([^/])/, "/$1").replace(/\/$/, "")),
                                                (e = e.match(/^[-0-9]+$/) ? e.replace(/^([^/])/, "/$1") : e).match(/^\//))
                                        )
                                            return L(e, i.path.substring(1));
                                        if (
                                            ((n = (n = L("/-1", i.path.substring(1))) && n.match(/(.*?)\.(.*)/)) &&
                                                ((i.file = n[0]), (i.filename = n[1]), (i.fileext = n[2])),
                                                t.match(/(.*):([0-9]+)$/) && ((n = t.match(/(.*):([0-9]+)$/)), (i.port = n[2]), (t = n[1])),
                                                t.match(/(.*?)@(.*)/) && ((n = t.match(/(.*?)@(.*)/)), (i.auth = n[1]), (t = n[2])),
                                                i.auth &&
                                                ((n = i.auth.match(/(.*):(.*)/)),
                                                    (i.user = n ? n[1] : i.auth),
                                                    (i.pass = n ? n[2] : void 0)),
                                                (i.hostname = t.toLowerCase()),
                                                "." === e.charAt(0))
                                        )
                                            return L(e, i.hostname);
                                        j() &&
                                            (n = i.hostname.match(j())) &&
                                            ((i.tld = n[3]), (i.domain = n[2] ? n[2] + "." + n[3] : void 0), (i.sub = n[1] || void 0)),
                                            (t = i.port ? ":" + i.port : ""),
                                            (i.protocol = i.protocol || window.location.protocol.replace(":", "")),
                                            (i.port = i.port || ("https" === i.protocol ? "443" : "80")),
                                            (i.protocol = i.protocol || ("443" === i.port ? "https" : "http")),
                                            (i.basic = i.protocol + "://" + i.hostname + t);
                                    }
                                    return e in i ? i[e] : "{}" === e ? i : "";
                                }),
                                (P.createString = function (e) {
                                    for (var t = e, n = Math.random().toString(36).substr(2); n.length < t;)
                                        n += Math.random().toString(36).substr(2);
                                    return n.substr(0, e);
                                }),
                                (P.createAesKey = function () {
                                    return P.createString(16);
                                }),
                                (P.setQuery = function (e) {
                                    try {
                                        if (!P.isObject(e)) return "";
                                        var t,
                                            n = O.getConfig().persistenceNameOld.includes("GravityEngine_ali"),
                                            i = [];
                                        for (t in e)
                                            (n || e.hasOwnProperty(t)) && i.push(encodeURIComponent(t) + "=" + encodeURIComponent(e[t]));
                                        return i.join("&");
                                    } catch (e) {
                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                        return "";
                                    }
                                }),
                                (P.generateEncryptyData = function (e, t) {
                                    if (void 0 !== t) {
                                        var n = t.publicKey;
                                        if (
                                            ((t = t.version),
                                                void 0 !== n &&
                                                void 0 !== t &&
                                                "undefined" != typeof CryptoJS &&
                                                "undefined" != typeof JSEncrypt)
                                        ) {
                                            var i = P.createAesKey();
                                            try {
                                                var r = CryptoJS.enc.Utf8.parse(i),
                                                    o = CryptoJS.enc.Utf8.parse(JSON.stringify(e)),
                                                    a = P.isUndefined(CryptoJS.pad.Pkcs7) ? CryptoJS.pad.PKCS7 : CryptoJS.pad.Pkcs7,
                                                    s = CryptoJS.AES.encrypt(o, r, {
                                                        mode: CryptoJS.mode.ECB,
                                                        padding: a,
                                                    }).toString(),
                                                    c = new JSEncrypt(),
                                                    u = (c.setPublicKey(n), c.encrypt(i));
                                                return false === u
                                                    ? (G.warn(""), e)
                                                    : {
                                                        pkv: t,
                                                        ekey: u,
                                                        payload: s,
                                                    };
                                            } catch (e) {
                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                G.warn(": " + e);
                                            }
                                        }
                                    }
                                    return e;
                                });
                            var G = "object" === r(G) ? G : {},
                                U =
                                    ((G.info = function () {
                                        if (
                                            "object" === ("undefined" == typeof console ? "undefined" : r(console)) &&
                                            console.log &&
                                            G.enabled
                                        )
                                            try {
                                                return console.log.apply(console, arguments);
                                            } catch (e) {
                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                console.log(arguments[0]);
                                            }
                                    }),
                                        (G.warn = function () {
                                            if (
                                                "object" === ("undefined" == typeof console ? "undefined" : r(console)) &&
                                                console.log &&
                                                G.enabled
                                            )
                                                try {
                                                    return console.warn.apply(console, arguments);
                                                } catch (e) {
                                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                    console.warn(arguments[0]);
                                                }
                                        }),
                                        /^\$?[a-zA-Z][a-zA-Z0-9_]{0,49}$/),
                                F = (function () {
                                    function e () {
                                        s(this, e);
                                    }
                                    return (
                                        u(e, null, [
                                            {
                                                key: "stripProperties",
                                                value: function (e) {
                                                    return (
                                                        P.isObject(e) &&
                                                        P.each(e, function (e, t) {
                                                            P.isString(e) ||
                                                                P.isNumber(e) ||
                                                                P.isDate(e) ||
                                                                P.isBoolean(e) ||
                                                                P.isArray(e) ||
                                                                P.isObject(e) ||
                                                                G.warn(
                                                                    "Your data -",
                                                                    t,
                                                                    e,
                                                                    "- format does not meet requirements and may not be stored correctly. Attribute values only support String, Number, Date, Boolean, Array, Object"
                                                                );
                                                        }),
                                                        e
                                                    );
                                                },
                                            },
                                            {
                                                key: "_checkPropertiesKey",
                                                value: function (e) {
                                                    var t = true;
                                                    return (
                                                        P.each(e, function (e, n) {
                                                            U.test(n) || (G.warn("Invalid KEY: " + n), (t = false));
                                                        }),
                                                        t
                                                    );
                                                },
                                            },
                                            {
                                                key: "event",
                                                value: function (e) {
                                                    return (
                                                        !(!P.isString(e) || !U.test(e)) ||
                                                        (G.warn(
                                                            "Check the parameter format. The eventName must start with an English letter and contain no more than 50 characters including letters, digits, and underscores: " +
                                                            e
                                                        ),
                                                            false)
                                                    );
                                                },
                                            },
                                            {
                                                key: "propertyName",
                                                value: function (e) {
                                                    return (
                                                        !(!P.isString(e) || !U.test(e)) ||
                                                        (G.warn(
                                                            "Check the parameter format. PropertyName must start with a letter and contain letters, digits, and underscores (_). The value is a string of no more than 50 characters: " +
                                                            e
                                                        ),
                                                            false)
                                                    );
                                                },
                                            },
                                            {
                                                key: "properties",
                                                value: function (e) {
                                                    return (
                                                        this.stripProperties(e),
                                                        !(
                                                            e &&
                                                            (P.isObject(e)
                                                                ? !this._checkPropertiesKey(e) &&
                                                                (G.warn(
                                                                    "Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"
                                                                ),
                                                                    1)
                                                                : (G.warn("properties can be none, but it must be an object"), 1))
                                                        )
                                                    );
                                                },
                                            },
                                            {
                                                key: "propertiesMust",
                                                value: function (e) {
                                                    return (
                                                        this.stripProperties(e),
                                                        void 0 === e || !P.isObject(e) || P.isEmptyObject(e)
                                                            ? (G.warn("properties must be an object with a value"), false)
                                                            : !!this._checkPropertiesKey(e) ||
                                                            (G.warn(
                                                                "Check the parameter format. The properties key must start with a letter, contain digits, letters, and underscores (_), and contain a maximum of 50 characters"
                                                            ),
                                                                false)
                                                    );
                                                },
                                            },
                                            {
                                                key: "userId",
                                                value: function (e) {
                                                    return (
                                                        !(!P.isString(e) || !/^.{1,64}$/.test(e)) ||
                                                        (G.warn(
                                                            "The user ID must be a string of less than 64 characters and cannot be null"
                                                        ),
                                                            false)
                                                    );
                                                },
                                            },
                                            {
                                                key: "userAddProperties",
                                                value: function (e) {
                                                    if (!this.propertiesMust(e)) return false;
                                                    for (var t in e)
                                                        if (!P.isNumber(e[t]))
                                                            return G.warn("The attributes of userAdd need to be Number"), false;
                                                    return true;
                                                },
                                            },
                                            {
                                                key: "userAppendProperties",
                                                value: function (e) {
                                                    if (!this.propertiesMust(e)) return false;
                                                    for (var t in e)
                                                        if (!P.isArray(e[t]))
                                                            return G.warn("The attribute of userAppend must be Array"), false;
                                                    return true;
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })();
                            function $ (e, t, n) {
                                return (
                                    (t = te(t)) in e
                                        ? Object.defineProperty(e, t, {
                                            value: n,
                                            enumerable: true,
                                            configurable: true,
                                            writable: true,
                                        })
                                        : (e[t] = n),
                                    e
                                );
                            }
                            function J (e) {
                                return (
                                    (function (e) {
                                        if (Array.isArray(e)) return H(e);
                                    })(e) ||
                                    (function () {
                                        if (("undefined" != typeof Symbol && null != e[Symbol.iterator]) || null != e["@@iterator"])
                                            return Array.from(e);
                                    })() ||
                                    V(e) ||
                                    (function () {
                                        throw new TypeError(
                                            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                                        );
                                    })()
                                );
                            }
                            function V (e, t) {
                                var n;
                                if (e)
                                    return "string" == typeof e
                                        ? H(e, t)
                                        : "Map" ===
                                            (n =
                                                "Object" === (n = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor
                                                    ? e.constructor.name
                                                    : n) || "Set" === n
                                            ? Array.from(e)
                                            : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                                                ? H(e, t)
                                                : void 0;
                            }
                            function H (e, t) {
                                (null == t || t > e.length) && (t = e.length);
                                for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
                                return i;
                            }
                            function B (e, t) {
                                if ("function" != typeof t && null !== t)
                                    throw new TypeError("Super expression must either be null or a function");
                                (e.prototype = Object.create(t && t.prototype, {
                                    constructor: {
                                        value: e,
                                        writable: true,
                                        configurable: true,
                                    },
                                })),
                                    Object.defineProperty(e, "prototype", {
                                        writable: false,
                                    }),
                                    t &&
                                    (function (e, t) {
                                        (Object.setPrototypeOf
                                            ? Object.setPrototypeOf.bind()
                                            : function (e, t) {
                                                return (e.__proto__ = t), e;
                                            })(e, t);
                                    })(e, t);
                            }
                            function W (e) {
                                var t = (function () {
                                    if ("undefined" == typeof Reflect || !Reflect.construct) return false;
                                    if (Reflect.construct.sham) return false;
                                    if ("function" == typeof Proxy) return true;
                                    try {
                                        return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })), true;
                                    } catch (e) {
                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                        return false;
                                    }
                                })();
                                return function () {
                                    var n,
                                        i = Q(e);
                                    return K(
                                        this,
                                        t ? ((n = Q(this).constructor), Reflect.construct(i, arguments, n)) : i.apply(this, arguments)
                                    );
                                };
                            }
                            function K (e, t) {
                                if (t && ("object" === Y(t) || "function" == typeof t)) return t;
                                if (void 0 !== t) throw new TypeError("Derived constructors may only return object or undefined");
                                return z(e);
                            }
                            function z (e) {
                                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return e;
                            }
                            function Q (e) {
                                return (Q = Object.setPrototypeOf
                                    ? Object.getPrototypeOf.bind()
                                    : function (e) {
                                        return e.__proto__ || Object.getPrototypeOf(e);
                                    })(e);
                            }
                            function Y (e) {
                                return (Y =
                                    "function" == typeof Symbol && "symbol" == r(Symbol.iterator)
                                        ? function (e) {
                                            return r(e);
                                        }
                                        : function (e) {
                                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype
                                                ? "symbol"
                                                : r(e);
                                        })(e);
                            }
                            function X (e, t) {
                                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
                            }
                            function Z (e, t) {
                                for (var n = 0; n < t.length; n++) {
                                    var i = t[n];
                                    (i.enumerable = i.enumerable || false),
                                        (i.configurable = true),
                                        "value" in i && (i.writable = true),
                                        Object.defineProperty(e, te(i.key), i);
                                }
                            }
                            function ee (e, t, n) {
                                t && Z(e.prototype, t),
                                    n && Z(e, n),
                                    Object.defineProperty(e, "prototype", {
                                        writable: false,
                                    });
                            }
                            function te (e) {
                                return (
                                    (e = (function (e) {
                                        if ("object" !== Y(e) || null === e) return e;
                                        var t = e[Symbol.toPrimitive];
                                        if (void 0 === t) return String(e);
                                        if ("object" !== Y((t = t.call(e, "string")))) return t;
                                        throw new TypeError("@@toPrimitive must return a primitive value.");
                                    })(e)),
                                    "symbol" === Y(e) ? e : String(e)
                                );
                            }
                            var ne,
                                ie,
                                re,
                                oe,
                                ae,
                                se,
                                ce,
                                ue,
                                le = "LOCAL_ID",
                                pe = "CLICK_ID",
                                fe = "QUEUE_LOST_MAP",
                                de = "REMOTE_CONFIG",
                                he = "REMOTE_COMMON_CONFIG",
                                ge = "OPENID",
                                ve = {
                                    init: "init",
                                    reporting: "reporting",
                                    fail: "fail",
                                },
                                ye = {
                                    maxSdkInstance: 4,
                                    maxQueueLength: 500,
                                    actionParamMaxLength: 1e4,
                                    autoTrack: true,
                                    reportThreshold: 5,
                                    reportDelay: 1,
                                    inspectDelay: 30,
                                    cgiBatchSize: 50,
                                    requestConcurrency: 4,
                                    requestTimeout: 1e4,
                                    signVersion: "1.0",
                                    realTimeActionList: ["START_APP", "REGISTER", "PURCHASE"],
                                },
                                me = "JS_RUN_ERROR",
                                _e = "REQUEST_ERROR",
                                ke = "UNKNOWN",
                                be = "TICKET_INTERVAL_CHANGE",
                                Se =
                                    ((ie = function (e) {
                                        return "".concat("@dn-sdk/minigame", "_").concat("production", "_").concat(e);
                                    }),
                                    {
                                        getSync: function (e) {
                                            var t;
                                            try {
                                                t = wx.getStorageSync(ie(e));
                                            } catch (e) {
                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                console.error("storage get error", e);
                                            }
                                            return t;
                                        },
                                        setSync: function (e, t) {
                                            try {
                                                wx.setStorageSync(ie(e), t);
                                            } catch (e) {
                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                return console.error("storage set error", e), false;
                                            }
                                            return true;
                                        },
                                    }),
                                Ie = function () {
                                    var e, t, n;
                                    return (
                                        oe ||
                                        ((n = (n = (t =
                                            (null ==
                                                (t =
                                                    void 0 ===
                                                        (t = (e = (function () {
                                                            if (ne) return ne;
                                                            try {
                                                                return (ne = wx.getSystemInfoSync());
                                                            } catch (e) {
                                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                                return {};
                                                            }
                                                        })()).system)
                                                        ? ""
                                                        : t)
                                                ? void 0
                                                : t.split(" ")) || [])[0])
                                            ? -1 < (n = (null == n ? void 0 : n.toUpperCase()) || "").indexOf("ANDROID")
                                                ? "ANDROID"
                                                : -1 < n.indexOf("IOS")
                                                    ? "IOS"
                                                    : -1 < n.indexOf("MAC")
                                                        ? "OSX"
                                                        : -1 < n.indexOf("WINDOWS")
                                                            ? "WINDOWS"
                                                            : ke
                                            : ke),
                                            (t =
                                                !(t = t) || t.length <= 0
                                                    ? ""
                                                    : 2 === t.length
                                                        ? t[1]
                                                        : 3 === t.length && "Windows" === t[0]
                                                            ? "".concat(t[1], " ").concat(t[2])
                                                            : t[t.length - 1]),
                                            (oe = {
                                                benchmark_level: e.benchmarkLevel,
                                                device_brand: e.brand,
                                                screen_height: Math.floor(e.screenHeight),
                                                screen_width: Math.floor(e.screenWidth),
                                                wx_lib_version: e.SDKVersion,
                                                wx_version: e.version,
                                                wx_platform: e.platform,
                                                device_model: e.model,
                                                os: n,
                                                os_version: t,
                                            })),
                                        oe
                                    );
                                },
                                Ae = function () {
                                    try {
                                        if (re) return re;
                                        (re = re || Se.getSync(le) || "") || ((re = Ue()), Se.setSync(le, re));
                                    } catch (e) { }
                                    return re;
                                },
                                we =
                                    ((se = !(ae = "unknown")),
                                        function () {
                                            if (!se)
                                                try {
                                                    wx.getNetworkType({
                                                        success: function (e) {
                                                            ae = e.networkType;
                                                        },
                                                        fail: function () {
                                                            ae = "unknown";
                                                        },
                                                    }),
                                                        wx.onNetworkStatusChange(function (e) {
                                                            ae = e.networkType;
                                                        }),
                                                        (se = true);
                                                } catch (e) { }
                                            return ae;
                                        }),
                                Ee =
                                    (we(),
                                        (ue = ""),
                                        function () {
                                            return (ue = ue || Se.getSync(ge) || "");
                                        }),
                                Oe = function () {
                                    if (ce) return ce;
                                    try {
                                        var e = wx.getAccountInfoSync();
                                        return qe(e.miniProgram) ? (ce = e.miniProgram) : {};
                                    } catch (e) {
                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                        return {};
                                    }
                                };
                            function Pe (e, t) {
                                try {
                                    var n = Ie(),
                                        i = {
                                            sdk_version: "1.5.3",
                                            sdk_name: "@dn-sdk/minigame",
                                            device_brand: null == n ? void 0 : n.device_brand,
                                            device_model: null == n ? void 0 : n.device_model,
                                            wx_version: null == n ? void 0 : n.wx_version,
                                            wx_lib_version: null == n ? void 0 : n.wx_lib_version,
                                            wx_platform: null == n ? void 0 : n.wx_platform,
                                            os: null == n ? void 0 : n.os,
                                            os_version: null == n ? void 0 : n.os_version,
                                            local_id: Ae(),
                                        },
                                        r = Object.assign(i, e);
                                    wx.request({
                                        url: "https://api.datanexus.qq.com/data-nexus-trace/log",
                                        data: r,
                                        method: "POST",
                                        timeout: ye.requestTimeout,
                                        success: function (e) {
                                            "function" == typeof t && 200 === (null == e ? void 0 : e.statusCode) && t();
                                        },
                                    });
                                } catch (n) {
                                    n = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(n);
                                    We.error(n);
                                }
                            }
                            ee(Te, null, [
                                {
                                    key: "revise",
                                    value: function (e) {
                                        0 < e && !this.isRevised && ((this.offsetTime = e - Date.now()), (this.isRevised = true));
                                    },
                                },
                                {
                                    key: "getRevisedcurrentTimeMillis",
                                    value: function () {
                                        return this.isRevised ? Date.now() + this.offsetTime : -1;
                                    },
                                },
                            ]);
                            var Ne = Te;
                            function Te () {
                                X(this, Te);
                            }
                            function Ce (e) {
                                return new Promise(function (t, n) {
                                    wx.request({
                                        method: "POST",
                                        url: "https://api.datanexus.qq.com/data-nexus-config/v1/sdk/config/get",
                                        data: e,
                                        timeout: ye.requestTimeout,
                                        success: function (e) {
                                            xe(e, t, "config/get", n), Re(e);
                                        },
                                        fail: function (e) {
                                            Me(e, "config/get", n);
                                        },
                                    });
                                });
                            }
                            function xe (e, t, n, i) {
                                var r,
                                    o = null == e ? void 0 : e.statusCode,
                                    a = null == (a = null == e ? void 0 : e.data) ? void 0 : a.code;
                                200 !== o || 0 !== a
                                    ? ((r = 200 !== o ? ("number" == typeof o ? -1 * o : -888) : a),
                                        Pe({
                                            log_type: "REQUEST_CONFIG_ERROR",
                                            message: "cgiName: "
                                                .concat(n, ", statusCode: ")
                                                .concat(o, ", code: ")
                                                .concat(a, ", traceid: ")
                                                .concat(null == (n = null == e ? void 0 : e.data) ? void 0 : n.trace_id),
                                            code: r,
                                        }),
                                        null != i && i(null == (o = null == e ? void 0 : e.data) ? void 0 : o.data))
                                    : t(null == (a = e.data) ? void 0 : a.data);
                            }
                            function Me (e, t, n) {
                                Pe({
                                    log_type: _e,
                                    message: "cgiName: ".concat(t, " , message: ").concat(null == e ? void 0 : e.errMsg, " "),
                                    code: "number" == typeof (null == e ? void 0 : e.errno) ? -1 * e.errno : -999,
                                }),
                                    null != n && n(e);
                            }
                            function Re (e) {
                                17266752e5 < (e = +(null == (e = null == e ? void 0 : e.header) ? void 0 : e["Server-Time"])) &&
                                    Ne.revise(e);
                            }
                            function De (e) {
                                return "[object Array]" === Le.call(e);
                            }
                            function je (e) {
                                return "[object Function]" === Le.call(e);
                            }
                            (Ne.offsetTime = 0), (Ne.isRevised = false);
                            var Le = Object.prototype.toString,
                                qe = function (e) {
                                    return "[object Object]" === Le.call(e);
                                },
                                Ge = new Date().getTime();
                            function Ue () {
                                var e = new Date().getTime(),
                                    t = Math.abs(1e3 * (e - Ge));
                                return "xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g, function (n) {
                                    var i = 16 * Math.random();
                                    return (
                                        0 < e
                                            ? ((i = (e + i) % 16 | 0), (e = Math.floor(e / 16)))
                                            : ((i = (t + i) % 16 | 0), (t = Math.floor(t / 16))),
                                        ("x" === n ? i : (3 & i) | 8).toString(16).replace(/-/g, "")
                                    );
                                });
                            }
                            function Fe (e, t) {
                                [e, t].forEach(Je);
                                for (var n = He(e), i = He(t), r = 0; r < Math.max(n.length - 1, i.length - 1); r++) {
                                    var o = parseInt(n[r] || "0", 10),
                                        a = parseInt(i[r] || "0", 10);
                                    if (a < o) return 1;
                                    if (o < a) return -1;
                                }
                                if (((e = n[n.length - 1]), (t = i[i.length - 1]), e && t))
                                    for (
                                        var s = e.split(".").map(Ve), c = t.split(".").map(Ve), u = 0;
                                        u < Math.max(s.length, c.length);
                                        u++
                                    ) {
                                        if (void 0 === s[u] || ("string" == typeof c[u] && "number" == typeof s[u])) return -1;
                                        if (void 0 === c[u] || ("string" == typeof s[u] && "number" == typeof c[u]) || s[u] > c[u])
                                            return 1;
                                        if (c[u] > s[u]) return -1;
                                    }
                                else if (e || t) return e ? -1 : 1;
                                return 0;
                            }
                            var $e =
                                /^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,
                                Je = function (e) {
                                    if ("string" != typeof e) throw new TypeError("Invalid argument expected string");
                                    if (!$e.test(e)) throw new Error("Invalid argument not valid semver ('".concat(e, "' received)"));
                                },
                                Ve = function (e) {
                                    return isNaN(Number(e)) ? e : Number(e);
                                },
                                He = function (e) {
                                    var t =
                                        -1 === (t = e = e.replace(/^v/, "").replace(/\+.*$/, "")).indexOf("-")
                                            ? t.length
                                            : t.indexOf("-"),
                                        n = e.substring(0, t).split(".");
                                    return n.push(e.substring(t + 1)), n;
                                };
                            function Be (e, t) {
                                return Object.prototype.hasOwnProperty.call(e, t);
                            }
                            ee(Ke, null, [
                                {
                                    key: "error",
                                    value: function (e) {
                                        for (var t, n = arguments.length, i = new Array(1 < n ? n - 1 : 0), r = 1; r < n; r++)
                                            i[r - 1] = arguments[r];
                                        (t = console).error.apply(t, ["".concat("[@dn-sdk/minigame v1.5.3]", ": ").concat(e)].concat(i));
                                    },
                                },
                                {
                                    key: "info",
                                    value: function (e) {
                                        for (var t, n = arguments.length, i = new Array(1 < n ? n - 1 : 0), r = 1; r < n; r++)
                                            i[r - 1] = arguments[r];
                                        Ke.debug &&
                                            (t = console).info.apply(t, ["".concat("[@dn-sdk/minigame v1.5.3]", ": ").concat(e)].concat(i));
                                    },
                                },
                                {
                                    key: "log",
                                    value: function (e) {
                                        for (var t, n = arguments.length, i = new Array(1 < n ? n - 1 : 0), r = 1; r < n; r++)
                                            i[r - 1] = arguments[r];
                                        Ke.debug &&
                                            (t = console).log.apply(t, ["".concat("[@dn-sdk/minigame v1.5.3]", ": ").concat(e)].concat(i));
                                    },
                                },
                                {
                                    key: "warn",
                                    value: function (e) {
                                        for (var t, n = arguments.length, i = new Array(1 < n ? n - 1 : 0), r = 1; r < n; r++)
                                            i[r - 1] = arguments[r];
                                        (t = console).warn.apply(t, ["".concat("[@dn-sdk/minigame v1.5.3]", ": ").concat(e)].concat(i));
                                    },
                                },
                                {
                                    key: "devLog",
                                    value: function (e) {
                                        for (var t, n = arguments.length, i = new Array(1 < n ? n - 1 : 0), r = 1; r < n; r++)
                                            i[r - 1] = arguments[r];
                                        Ke.isDev &&
                                            (t = console).log.apply(t, ["".concat("[@dn-sdk/minigame v1.5.3]", ": ").concat(e)].concat(i));
                                    },
                                },
                            ]);
                            var We = Ke;
                            function Ke () {
                                X(this, Ke);
                            }
                            (We.debug = false), (We.isDev = false);
                            var ze;
                            function Qe (e, t, n) {
                                var i = n.value;
                                return (
                                    (n.value = function () {
                                        for (var n = arguments.length, r = new Array(n), o = 0; o < n; o++) r[o] = arguments[o];
                                        try {
                                            return i.apply(this, r);
                                        } catch (n) {
                                            n = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(n);
                                            try {
                                                We.error.apply(
                                                    We,
                                                    ["calling ".concat(e.constructor.name, ".").concat(t, " error with arguments")].concat(
                                                        r
                                                    )
                                                ),
                                                    We.error(n);
                                                var a = {
                                                    log_type: me,
                                                    message: "[safeExcutable] "
                                                        .concat(e.constructor.name, ".")
                                                        .concat(t, ": ")
                                                        .concat(null == n ? void 0 : n.message),
                                                    err_stack: null == n ? void 0 : n.stack,
                                                };
                                                je(this.reportLog) ? this.reportLog(a) : Pe(a);
                                            } catch (a) { }
                                        }
                                    }),
                                    n
                                );
                            }
                            function Ye (e, t, n) {
                                var i = n.value;
                                return (
                                    (n.value = function () {
                                        if (this.inited) {
                                            for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                                            return i.apply(this, t);
                                        }
                                        We.error("");
                                    }),
                                    n
                                );
                            }
                            function Xe (e, t, n, i) {
                                for (var r, o = 1 < i ? void 0 : i ? et(t, n) : t, a = e.length - 1; 0 <= a; a--)
                                    (r = e[a]) && (o = (i ? r(t, n, o) : r(o)) || o);
                                i && o && Ze(t, n, o);
                            }
                            var Ze = Object.defineProperty,
                                et = Object.getOwnPropertyDescriptor;
                            function nt (e) {
                                var t = e.userActionSetId;
                                (e = void 0 === (e = e.maxLength) ? 500 : e),
                                    X(this, nt),
                                    (this.lostActionMaps = {}),
                                    (this.stack = []),
                                    (this.localStorageKey = ""),
                                    (this.localStorageKey = "".concat("QUEUE_ACTIONS", "_").concat(null == t ? void 0 : t.toString())),
                                    (this.maxLength = e),
                                    (this.userActionSetId = t),
                                    this.setTimeStamp(),
                                    this.init();
                            }
                            function it (e, t, n, i) {
                                for (var r, o = 1 < i ? void 0 : i ? at(t, n) : t, a = e.length - 1; 0 <= a; a--)
                                    (r = e[a]) && (o = (i ? r(t, n, o) : r(o)) || o);
                                i && o && ot(t, n, o);
                            }
                            Xe(
                                [Qe],
                                (ee(nt, [
                                    {
                                        key: "getItems",
                                        value: function () {
                                            return this.stack;
                                        },
                                    },
                                    {
                                        key: "getStorage",
                                        value: function () {
                                            var e = (null == Se ? void 0 : Se.getSync(this.localStorageKey)) || "[]";
                                            return JSON.parse(e);
                                        },
                                    },
                                    {
                                        key: "reportLostNum",
                                        value: function () {
                                            var e,
                                                t = this,
                                                n = Object.assign({}, this.lostActionMaps),
                                                i = [];
                                            for (e in n) {
                                                var r = null == e ? void 0 : e.split("_");
                                                i.push({
                                                    queue_lost_session_id: r[0],
                                                    queue_lost_timestamp: r[1],
                                                    queue_lost_num: n[e],
                                                });
                                            }
                                            i.length &&
                                                (this.setTimeStamp(),
                                                    i.forEach(function (e) {
                                                        var n = Object.assign(
                                                            {},
                                                            {
                                                                user_action_set_id: t.userActionSetId,
                                                                log_type: "QUEUE_LOST_NUM",
                                                            },
                                                            e
                                                        ),
                                                            i = null == e ? void 0 : e.queue_lost_session_id,
                                                            r =
                                                                ((e = null == e ? void 0 : e.queue_lost_timestamp),
                                                                    "".concat(i, "_").concat(e));
                                                        Pe(n, function () {
                                                            Be(t.lostActionMaps, r) &&
                                                                (delete t.lostActionMaps[r], Se.setSync(fe, JSON.stringify(t.lostActionMaps)));
                                                        });
                                                    }));
                                        },
                                    },
                                    {
                                        key: "getLostMaps",
                                        value: function () {
                                            return this.lostActionMaps;
                                        },
                                    },
                                    {
                                        key: "init",
                                        value: function () {
                                            var e = this,
                                                t =
                                                    null == (t = this.getStorage())
                                                        ? void 0
                                                        : t.map(function (e) {
                                                            return e.inner_status === (null == ve ? void 0 : ve.reporting)
                                                                ? Object.assign({}, e, {
                                                                    inner_status: null == ve ? void 0 : ve.fail,
                                                                    is_retry: true,
                                                                    retry_count: e.retry_count + 1,
                                                                })
                                                                : e;
                                                        });
                                            (this.stack = t),
                                                (this.lostActionMaps = JSON.parse(Se.getSync(fe) || "{}")),
                                                setTimeout(function () {
                                                    e.reportLostNum();
                                                }, 1e3);
                                        },
                                    },
                                    {
                                        key: "addItem",
                                        value: function (e) {
                                            var t;
                                            null != (t = null == this ? void 0 : this.stack) && t.push(e);
                                        },
                                    },
                                    {
                                        key: "removeItems",
                                        value: function (e) {
                                            var t =
                                                null == (t = null == this ? void 0 : this.stack)
                                                    ? void 0
                                                    : t.filter(function (t) {
                                                        return !(null != e && e.includes(null == t ? void 0 : t.action_id));
                                                    });
                                            this.stack = t;
                                        },
                                    },
                                    {
                                        key: "updateForReportFail",
                                        value: function (e) {
                                            var t;
                                            this.stack =
                                                null == (t = this.stack)
                                                    ? void 0
                                                    : t.map(function (t) {
                                                        return null != e && e.includes(null == t ? void 0 : t.action_id)
                                                            ? Object.assign({}, t, {
                                                                inner_status: null == ve ? void 0 : ve.fail,
                                                                retry_count: t.retry_count + 1,
                                                                is_retry: true,
                                                            })
                                                            : t;
                                                    });
                                        },
                                    },
                                    {
                                        key: "updateForReporting",
                                        value: function (e) {
                                            var t;
                                            this.stack =
                                                null == (t = this.stack)
                                                    ? void 0
                                                    : t.map(function (t) {
                                                        return null != e && e.includes(null == t ? void 0 : t.action_id)
                                                            ? Object.assign({}, t, {
                                                                inner_status: null == ve ? void 0 : ve.reporting,
                                                            })
                                                            : t;
                                                    });
                                        },
                                    },
                                    {
                                        key: "updateAllStack",
                                        value: function (e) {
                                            this.stack = e;
                                        },
                                    },
                                    {
                                        key: "updateToStorage",
                                        value: function () {
                                            Se.setSync(this.localStorageKey, JSON.stringify(this.stack));
                                        },
                                    },
                                    {
                                        key: "updateLostAction",
                                        value: function (e) {
                                            var t;
                                            e &&
                                                ((e = "".concat(e, "_").concat(this.timeStamp)),
                                                    (t = this.lostActionMaps[e] || 0),
                                                    (this.lostActionMaps[e] = t + 1),
                                                    Se.setSync(fe, JSON.stringify(this.lostActionMaps)));
                                        },
                                    },
                                    {
                                        key: "setTimeStamp",
                                        value: function () {
                                            this.timeStamp = Date.now().toString();
                                        },
                                    },
                                ]),
                                    (N = nt)).prototype,
                                "getItems",
                                1
                            ),
                                Xe([Qe], N.prototype, "getStorage", 1),
                                Xe([Qe], N.prototype, "reportLostNum", 1),
                                Xe([Qe], N.prototype, "getLostMaps", 1),
                                Xe([Qe], N.prototype, "init", 1),
                                Xe([Qe], N.prototype, "addItem", 1),
                                Xe([Qe], N.prototype, "removeItems", 1),
                                Xe([Qe], N.prototype, "updateForReportFail", 1),
                                Xe([Qe], N.prototype, "updateForReporting", 1),
                                Xe([Qe], N.prototype, "updateAllStack", 1),
                                Xe([Qe], N.prototype, "updateToStorage", 1),
                                Xe([Qe], N.prototype, "updateLostAction", 1);
                            var rt,
                                ot = Object.defineProperty,
                                at = Object.getOwnPropertyDescriptor,
                                st =
                                    (B(ct, N),
                                        (rt = W(ct)),
                                        ee(ct, [
                                            {
                                                key: "getReportableActions",
                                                value: function () {
                                                    var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 100,
                                                        t = this.getItems(),
                                                        n = [];
                                                    return (
                                                        null != t &&
                                                        t.forEach(function (t) {
                                                            (null == n ? void 0 : n.length) < e &&
                                                                (null == t ? void 0 : t.inner_status) !==
                                                                (null == ve ? void 0 : ve.reporting) &&
                                                                null != n &&
                                                                n.push(t);
                                                        }),
                                                        n
                                                    );
                                                },
                                            },
                                            {
                                                key: "addAction",
                                                value: function (e) {
                                                    var t,
                                                        n = this.getItems();
                                                    (null == n ? void 0 : n.length) >= this.maxLength
                                                        ? ((t = "".concat(
                                                            this.maxLength,
                                                            "SDK"
                                                        )),
                                                            We.warn(t),
                                                            Pe({
                                                                user_action_set_id: this.userActionSetId,
                                                                log_type: "JS_QUEUE_LOG",
                                                                message: t,
                                                            }),
                                                            (t = this.sortQueue(e, n)),
                                                            We.debug &&
                                                            We.info("".concat(this.maxLength, ""), t.concat([])),
                                                            (n = t.pop()),
                                                            this.updateAllStack(t),
                                                            this.updateLostAction((null == n ? void 0 : n.session_id) || ""))
                                                        : this.addItem(e),
                                                        this.updateToStorage();
                                                },
                                            },
                                            {
                                                key: "removeActions",
                                                value: function (e) {
                                                    this.removeItems(e), this.updateToStorage();
                                                },
                                            },
                                            {
                                                key: "updateActionsForReportFail",
                                                value: function (e) {
                                                    this.updateForReportFail(e), this.updateToStorage();
                                                },
                                            },
                                            {
                                                key: "updateActionsForReporting",
                                                value: function (e) {
                                                    this.updateForReporting(e), this.updateToStorage();
                                                },
                                            },
                                            {
                                                key: "getReportableActionsLength",
                                                value: function () {
                                                    var e = this.getItems().filter(function (e) {
                                                        return (null == e ? void 0 : e.inner_status) !== (null == ve ? void 0 : ve.reporting);
                                                    });
                                                    return null == e ? void 0 : e.length;
                                                },
                                            },
                                            {
                                                key: "sortQueue",
                                                value: function (e, t) {
                                                    function n (e) {
                                                        return r[e.action_id] || (r[e.action_id] = i.caculateWeight(o, e)), r[e.action_id];
                                                    }
                                                    var i = this,
                                                        r = {},
                                                        o = null == e ? void 0 : e.action_time;
                                                    return (t = t.concat([e])).sort(function (e, t) {
                                                        return n(t) - n(e);
                                                    });
                                                },
                                            },
                                            {
                                                key: "caculateWeight",
                                                value: function (e, t) {
                                                    var n = 0,
                                                        i = (o = this.formatWeight(e, null == t ? void 0 : t.action_time)).ogWeight,
                                                        r = o.sdkWeight,
                                                        o = o.userWeight,
                                                        a =
                                                            (null != (a = this.ogEvents) &&
                                                                a.includes(null == t ? void 0 : t.action_type) &&
                                                                (n += i),
                                                                null != t && t.is_sdk_auto_track ? (n += r) : (n += o),
                                                                e - (null == t ? void 0 : t.action_time) + 1);
                                                    return 0 < a ? n + 1 / a : n;
                                                },
                                            },
                                            {
                                                key: "formatWeight",
                                                value: function (e, t) {
                                                    var n = 1e3,
                                                        i = 10,
                                                        r = 100;
                                                    return (
                                                        2592e6 < e - t && ((n /= 100), (i /= 100), (r /= 100)),
                                                        {
                                                            ogWeight: n,
                                                            sdkWeight: i,
                                                            userWeight: r,
                                                        }
                                                    );
                                                },
                                            },
                                        ]),
                                        ct);
                            function ct (e) {
                                var t = e.userActionSetId,
                                    n = void 0 === (n = e.maxLength) ? 500 : n;
                                return (
                                    (e = void 0 === (e = e.ogEvents) ? [] : e),
                                    X(this, ct),
                                    ((t = rt.call(this, {
                                        userActionSetId: t,
                                        maxLength: n,
                                    })).ogEvents = e),
                                    t
                                );
                            }
                            function ut () {
                                X(this, ut), (this.events = {});
                            }
                            it([Qe], st.prototype, "getReportableActions", 1),
                                it([Qe], st.prototype, "addAction", 1),
                                it([Qe], st.prototype, "removeActions", 1),
                                it([Qe], st.prototype, "updateActionsForReportFail", 1),
                                it([Qe], st.prototype, "updateActionsForReporting", 1),
                                it([Qe], st.prototype, "getReportableActionsLength", 1),
                                it([Qe], st.prototype, "sortQueue", 1),
                                it([Qe], st.prototype, "caculateWeight", 1),
                                it([Qe], st.prototype, "formatWeight", 1),
                                ee(
                                    ut,
                                    [
                                        {
                                            key: "subscribe",
                                            value: function (e, t) {
                                                ut.checkCallback(t), De(this.events[e]) ? this.events[e].push(t) : (this.events[e] = [t]);
                                            },
                                        },
                                        {
                                            key: "once",
                                            value: function (e, t) {
                                                ut.checkCallback(t), this.subscribe(this.onceEventName(e), t);
                                            },
                                        },
                                        {
                                            key: "unsubscribe",
                                            value: function (e, t) {
                                                ut.checkCallback(t),
                                                    De(this.events[e]) &&
                                                    (this.events[e] = this.events[e].filter(function (e) {
                                                        return e !== t;
                                                    })),
                                                    De(this.events[this.onceEventName(e)]) &&
                                                    (this.events[this.onceEventName(e)] = this.events[this.onceEventName(e)].filter(
                                                        function (e) {
                                                            return e !== t;
                                                        }
                                                    ));
                                            },
                                        },
                                        {
                                            key: "publish",
                                            value: function (e) {
                                                for (var t = arguments.length, n = new Array(1 < t ? t - 1 : 0), i = 1; i < t; i++)
                                                    n[i - 1] = arguments[i];
                                                var r = Date.now();
                                                De(this.events[e]) &&
                                                    this.events[e].forEach(function (e) {
                                                        return e.apply(void 0, [r].concat(n));
                                                    }),
                                                    De(this.events[this.onceEventName(e)]) &&
                                                    (this.events[this.onceEventName(e)].forEach(function (e) {
                                                        return e.apply(void 0, [r].concat(n));
                                                    }),
                                                        (this.events[this.onceEventName(e)] = []));
                                            },
                                        },
                                        {
                                            key: "onceEventName",
                                            value: function (e) {
                                                return "once_event_prefix_".concat(e);
                                            },
                                        },
                                    ],
                                    [
                                        {
                                            key: "checkCallback",
                                            value: function (e) {
                                                je(e) || We.error(ut.ERROR_CALLBACK_IS_NOT_A_FUNCTION);
                                            },
                                        },
                                    ]
                                ),
                                ((T = ut).ERROR_CALLBACK_IS_NOT_A_FUNCTION = "callback ");
                            var lt = new T(),
                                pt = [
                                    "REGISTER",
                                    "VIEW_CONTENT",
                                    "ADD_TO_CART",
                                    "PURCHASE",
                                    "COMPLETE_ORDER",
                                    "ADD_TO_WISHLIST",
                                    "START_APP",
                                    "CREATE_ROLE",
                                    "AUTHORIZE",
                                    "TUTORIAL_FINISH",
                                    "START_PAY",
                                    "FINISH_PAY",
                                ],
                                ft = ["REGISTER", "START_APP", "RE_ACTIVE"],
                                dt = ["TICKET", "ENTER_FOREGROUND", "ENTER_BACKGROUND"];
                            ee(mt, [
                                {
                                    key: "getChannelClaimActionList",
                                    value: function () {
                                        return this.channelClaimActionList;
                                    },
                                },
                                {
                                    key: "getNoClaimActionList",
                                    value: function () {
                                        return this.noClaimActionList;
                                    },
                                },
                                {
                                    key: "getRealTimeActionList",
                                    value: function () {
                                        return this.realTimeActionList;
                                    },
                                },
                                {
                                    key: "getTicketInterval",
                                    value: function () {
                                        return this.ticketInterval;
                                    },
                                },
                                {
                                    key: "getRequestTimeout",
                                    value: function () {
                                        return this.requestTimeout;
                                    },
                                },
                                {
                                    key: "loadConfig",
                                    value: function () {
                                        var e,
                                            t = this;
                                        try {
                                            "undefined" != typeof wx &&
                                                ((e = Se.getSync(he)) && this.updateConfig(e),
                                                    Ce({
                                                        conf_name: "mini_game_sdk_common",
                                                        conf_key: "config",
                                                    }).then(function (e) {
                                                        e && qe(e) && (t.updateConfig(e), Se.setSync(he, e));
                                                    }));
                                        } catch (e) {
                                            e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                            console.error(e);
                                        }
                                    },
                                },
                                {
                                    key: "updateConfig",
                                    value: function (e) {
                                        e.channelClaimActionList &&
                                            De(e.channelClaimActionList) &&
                                            (this.channelClaimActionList = e.channelClaimActionList),
                                            e.noClaimActionList &&
                                            De(e.noClaimActionList) &&
                                            (this.noClaimActionList = e.noClaimActionList),
                                            e.realTimeActionList &&
                                            De(e.realTimeActionList) &&
                                            (this.realTimeActionList = e.realTimeActionList),
                                            e.ticketInterval &&
                                            "number" == typeof e.ticketInterval &&
                                            1 < e.ticketInterval &&
                                            e.ticketInterval !== this.ticketInterval &&
                                            ((this.ticketInterval = e.ticketInterval), lt.publish(be)),
                                            e.requestTimeout &&
                                            "number" == typeof e.requestTimeout &&
                                            5e3 < e.requestTimeout &&
                                            (this.requestTimeout = e.requestTimeout);
                                    },
                                },
                            ]);
                            var ht,
                                gt,
                                vt = new mt(),
                                yt =
                                    ((gt = !(ht = true)),
                                        function () {
                                            var e;
                                            function t () {
                                                ht && lt.publish("TICKET");
                                            }
                                            gt ||
                                                ((gt = true),
                                                    lt.publish("START_APP"),
                                                    (e = setInterval(t, 1e3 * vt.getTicketInterval())),
                                                    lt.subscribe(be, function () {
                                                        e && clearInterval(e), (e = setInterval(t, 1e3 * vt.getTicketInterval()));
                                                    }),
                                                    wx.onShow(function (e) {
                                                        ht = true;
                                                        var t = "";
                                                        try {
                                                            t = JSON.stringify(e);
                                                        } catch (e) { }
                                                        lt.publish("ENTER_FOREGROUND", {
                                                            enter_options: t,
                                                        });
                                                    }),
                                                    wx.onHide(function () {
                                                        (ht = false), lt.publish("ENTER_BACKGROUND");
                                                    }));
                                        });
                            function mt () {
                                X(this, mt),
                                    (this.channelClaimActionList = ft),
                                    (this.noClaimActionList = dt),
                                    (this.realTimeActionList = ye.realTimeActionList),
                                    (this.ticketInterval = 60),
                                    (this.requestTimeout = ye.requestTimeout),
                                    this.loadConfig();
                            }
                            function _t (e) {
                                return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e;
                            }
                            (N =
                                "undefined" != typeof globalThis
                                    ? globalThis
                                    : "undefined" != typeof window
                                        ? window
                                        : "undefined" != typeof global
                                            ? global
                                            : "undefined" != typeof self
                                                ? self
                                                : {}),
                                (T = _t(function () {
                                    var e = null;
                                    function t (e) {
                                        return e && ("object" == Y(e) || "function" == typeof e);
                                    }
                                    function n (e) {
                                        if (null !== e && !t(e))
                                            throw new TypeError("Object prototype may only be an Object or null: " + e);
                                    }
                                    function i () {
                                        return null;
                                    }
                                    var r,
                                        o = Object,
                                        a = !(
                                            !o.create &&
                                            {
                                                __proto__: null,
                                            } instanceof o
                                        ),
                                        s =
                                            o.create ||
                                            (a
                                                ? function (e) {
                                                    return (
                                                        n(e),
                                                        {
                                                            __proto__: e,
                                                        }
                                                    );
                                                }
                                                : function (e) {
                                                    if ((n(e), null === e))
                                                        throw new SyntaxError(
                                                            "Native Object.create is required to create objects with null prototype"
                                                        );
                                                    function t () { }
                                                    return (t.prototype = e), new t();
                                                }),
                                        c =
                                            o.getPrototypeOf ||
                                            ([].__proto__ === Array.prototype
                                                ? function (e) {
                                                    return t((e = e.__proto__)) ? e : null;
                                                }
                                                : i);
                                    return (
                                        ((r = function (u, l) {
                                            if (void 0 === (this && this instanceof r ? this.constructor : void 0))
                                                throw new TypeError("Constructor Proxy requires 'new'");
                                            if (!t(u) || !t(l))
                                                throw new TypeError("Cannot create proxy with a non-object as target or handler");
                                            var p,
                                                f = function () { },
                                                d =
                                                    ((e = function () {
                                                        (u = null),
                                                            (f = function (e) {
                                                                throw new TypeError(
                                                                    "Cannot perform '".concat(e, "' on a proxy that has been revoked")
                                                                );
                                                            });
                                                    }),
                                                        setTimeout(function () {
                                                            e = null;
                                                        }, 0),
                                                        l);
                                            for (p in ((l = {
                                                get: null,
                                                set: null,
                                                apply: null,
                                                construct: null,
                                            }),
                                                d)) {
                                                if (!(p in l)) throw new TypeError("Proxy polyfill does not support trap '".concat(p, "'"));
                                                l[p] = d[p];
                                            }
                                            "function" == typeof d && (l.apply = d.apply.bind(d));
                                            var h,
                                                g,
                                                v = c(u),
                                                y = false,
                                                m = false,
                                                _ =
                                                    ("function" == typeof u
                                                        ? ((h = function () {
                                                            var e = this && this.constructor === h,
                                                                t = Array.prototype.slice.call(arguments);
                                                            return (
                                                                f(e ? "construct" : "apply"),
                                                                e && l.construct
                                                                    ? l.construct.call(this, u, t)
                                                                    : !e && l.apply
                                                                        ? l.apply(u, this, t)
                                                                        : e
                                                                            ? (t.unshift(u), new (u.bind.apply(u, t))())
                                                                            : u.apply(this, t)
                                                            );
                                                        }),
                                                            (y = true))
                                                        : u instanceof Array
                                                            ? ((h = []), (m = true))
                                                            : (h = a || null !== v ? s(v) : {}),
                                                        l.get
                                                            ? function (e) {
                                                                return f("get"), l.get(this, e, h);
                                                            }
                                                            : function (e) {
                                                                return f("get"), this[e];
                                                            }),
                                                k = l.set
                                                    ? function (e, t) {
                                                        f("set"), l.set(this, e, t, h);
                                                    }
                                                    : function (e, t) {
                                                        f("set"), (this[e] = t);
                                                    },
                                                b = o.getOwnPropertyNames(u),
                                                S = {};
                                            if (
                                                (b.forEach(function (e) {
                                                    var t;
                                                    ((y || m) && e in h) ||
                                                        ((t = {
                                                            enumerable: !!o.getOwnPropertyDescriptor(u, e).enumerable,
                                                            get: _.bind(u, e),
                                                            set: k.bind(u, e),
                                                        }),
                                                            o.defineProperty(h, e, t),
                                                            (S[e] = true));
                                                }),
                                                    (b = true),
                                                    (y || m) &&
                                                    ((g =
                                                        o.setPrototypeOf ||
                                                        ([].__proto__ === Array.prototype
                                                            ? function (e, t) {
                                                                return n(t), (e.__proto__ = t), e;
                                                            }
                                                            : i)),
                                                        (v && g(h, v)) || (b = false)),
                                                    l.get || !b)
                                            )
                                                for (var I in u)
                                                    S[I] ||
                                                        o.defineProperty(h, I, {
                                                            get: _.bind(u, I),
                                                        });
                                            return o.seal(u), o.seal(h), h;
                                        }).revocable = function (t, n) {
                                            return {
                                                proxy: new r(t, n),
                                                revoke: e,
                                            };
                                        }),
                                        r
                                    );
                                }));
                            var kt,
                                bt = {};
                            try {
                                kt = kt || T();
                            } catch (ne) {
                                ne = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(ne);
                                Et(ne);
                            }
                            function St (e, t, n, i) {
                                try {
                                    kt &&
                                        null != e &&
                                        e[t] &&
                                        (e[t] = new kt(e[t], {
                                            apply: function (e, t, r) {
                                                i &&
                                                    wt(function () {
                                                        i.apply(void 0, J(r));
                                                    });
                                                var o = !!((null != (o = r[0]) && o.success) || (null != (o = r[0]) && o.fail));
                                                return (
                                                    o &&
                                                    ["success", "fail"].forEach(function (e) {
                                                        if (r[0][e])
                                                            try {
                                                                r[0][e] = new kt(r[0][e], {
                                                                    apply: function (t, i, o) {
                                                                        return (
                                                                            wt(function () {
                                                                                n.apply(void 0, [e, r[0]].concat(J(o)));
                                                                            }),
                                                                            t.apply(i, o)
                                                                        );
                                                                    },
                                                                });
                                                            } catch (e) {
                                                                e =
                                                                    VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                        e
                                                                    );
                                                                Et(e);
                                                            }
                                                    }),
                                                    (e = e.apply(t, r)),
                                                    !o && e && "[object Promise]" === Object.prototype.toString.call(e)
                                                        ? e
                                                            .then(function (e) {
                                                                return (
                                                                    wt(function () {
                                                                        n("success", r[0], e);
                                                                    }),
                                                                    e
                                                                );
                                                            })
                                                            .catch(function (e) {
                                                                throw (
                                                                    (wt(function () {
                                                                        n("fail", r[0], e);
                                                                    }),
                                                                        e)
                                                                );
                                                            })
                                                        : e
                                                );
                                            },
                                        }));
                                } catch (e) {
                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                    Et(e);
                                }
                            }
                            function It (e, t, n) {
                                try {
                                    kt &&
                                        null != e &&
                                        e[t] &&
                                        (e[t] = new kt(e[t], {
                                            apply: function (e, t, i) {
                                                var r = "function" == typeof i[0];
                                                if (r)
                                                    try {
                                                        i[0] = new kt(i[0], {
                                                            apply: function (e, t, i) {
                                                                var r = e.call.apply(e, [t].concat(J(i)));
                                                                return (
                                                                    wt(function () {
                                                                        n(r);
                                                                    }),
                                                                    r
                                                                );
                                                            },
                                                        });
                                                    } catch (e) {
                                                        e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                        Et(e);
                                                    }
                                                var o = e.call.apply(e, [t].concat(J(i)));
                                                return (
                                                    r ||
                                                    wt(function () {
                                                        n(o);
                                                    }),
                                                    o
                                                );
                                            },
                                        }));
                                } catch (e) {
                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                    Et(e);
                                }
                            }
                            function At (e, t, n, i, r) {
                                var o = 1 < arguments.length && void 0 !== t ? t : "",
                                    a = 2 < arguments.length ? n : void 0,
                                    s = 3 < arguments.length && void 0 !== i ? i : [],
                                    c = 4 < arguments.length ? r : void 0;
                                try {
                                    kt &&
                                        null != e &&
                                        e[o] &&
                                        (e[o] = new kt(e[o], {
                                            apply: function (e, t, n) {
                                                var i = e.call.apply(e, [t].concat(J(n)));
                                                return (
                                                    (a && bt[o]) ||
                                                    (wt(function () {
                                                        null != c && c(i);
                                                    }),
                                                        s.forEach(function (e) {
                                                            var t = e.eventName,
                                                                n = e.isAsync;
                                                            (e = e.proxyEvent), (n ? St : It)(i, t, e);
                                                        })),
                                                    a && (bt[o] = true),
                                                    i
                                                );
                                            },
                                        }));
                                } catch (e) {
                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                    Et(e);
                                }
                            }
                            function wt (e) {
                                try {
                                    e();
                                } catch (e) {
                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                    Et(e);
                                }
                            }
                            function Et (e) {
                                Pe({
                                    log_type: "PROXY_ERROR",
                                    message: null == e ? void 0 : e.message,
                                    err_stack: null == e ? void 0 : e.stack,
                                });
                            }
                            var Ot = "SHARE",
                                Pt =
                                    ((xt = Mt = false),
                                        function () {
                                            xt ||
                                                ((xt = true),
                                                    wx.onHide(function () {
                                                        lt.publish("ENTER_BACKGROUND");
                                                    }));
                                        }),
                                Nt =
                                    (ee(jt, null, [
                                        {
                                            key: "isEmpty",
                                            value: function (e) {
                                                return !e || "" === e.trim();
                                            },
                                        },
                                        {
                                            key: "format",
                                            value: function (e) {
                                                for (var t = arguments.length, n = new Array(1 < t ? t - 1 : 0), i = 1; i < t; i++)
                                                    n[i - 1] = arguments[i];
                                                return e.replace(/\${(\d+)}/g, function (e, t) {
                                                    return n[t];
                                                });
                                            },
                                        },
                                        {
                                            key: "customStringify",
                                            value: function (e) {
                                                var t = [];
                                                return JSON.stringify(e, function (e, n) {
                                                    if (void 0 === n) return "undefined";
                                                    if ("object" == Y(n) && null !== n) {
                                                        if (-1 !== t.indexOf(n)) return "[Circular]";
                                                        t.push(n);
                                                    }
                                                    return n;
                                                });
                                            },
                                        },
                                    ]),
                                        jt),
                                Tt = /^([a-zA-Z][a-zA-Z\d_]{0,63})$/i,
                                Ct = /^ams_reserved_(.*)/i;
                            ee(Dt, null, [
                                {
                                    key: "validateActionType",
                                    value: function (e) {
                                        return Nt.isEmpty(e)
                                            ? (We.error(Dt.ERROR_ACTION_TYPE_NULL), false)
                                            : !!Tt.test(e) || (We.error(Dt.ERROR_ACTION_TYPE_INVALID), false);
                                    },
                                },
                                {
                                    key: "validateActionParam",
                                    value: function (e) {
                                        if (e) {
                                            if (!qe(e)) return We.error(Dt.ERROR_ACTION_PARAM_IS_NOT_OBJECT), false;
                                            for (var t in e) {
                                                if (Nt.isEmpty(t)) return We.error(Dt.ERROR_ACTION_PARAM_KEY_NULL), false;
                                                if (!Tt.test(t)) return We.error(Dt.ERROR_ACTION_PARAM_KEY_INVALID), false;
                                                Ct.test(t) && We.warn(Dt.WARN_ACTION_PARAM_KEY_RESERVED);
                                                var n = e[t];
                                                if (!Dt.isValidValue(n))
                                                    return We.error(Nt.format(Dt.ERROR_ACTION_PARAM_VALUE_INVALID, t, n)), false;
                                                if (De(n)) {
                                                    if (!Dt.isValidArrayValue(n)) {
                                                        for (var i = 0; i < n.length; i++)
                                                            We.error(
                                                                Nt.format(
                                                                    Dt.ERROR_ACTION_PARAM_VALUE_ARRAY_INVALID,
                                                                    t,
                                                                    Nt.customStringify(n),
                                                                    i,
                                                                    n[i]
                                                                )
                                                            );
                                                        return false;
                                                    }
                                                    if (!Dt.checkArrayElementTypes(n))
                                                        return We.error(Dt.ERROR_ACTION_PARAM_VALUE_ARRAY_TYPE_UNUNIQUE), false;
                                                }
                                            }
                                        }
                                        return true;
                                    },
                                },
                                {
                                    key: "isValidValue",
                                    value: function (e) {
                                        return "string" == typeof e || "number" == typeof e || "boolean" == typeof e || De(e);
                                    },
                                },
                                {
                                    key: "isValidArrayValue",
                                    value: function (e) {
                                        for (var t = 0; t < e.length; t++) {
                                            var n = e[t];
                                            if ("string" != typeof n && "number" != typeof n && "boolean" != typeof n) return false;
                                        }
                                        return true;
                                    },
                                },
                                {
                                    key: "checkArrayElementTypes",
                                    value: function (e) {
                                        if (e && !(e.length <= 1))
                                            for (var t = Y(e[0]), n = 1; n < e.length; n++) if (Y(e[n]) !== t) return false;
                                        return true;
                                    },
                                },
                            ]);
                            var xt,
                                Mt,
                                Rt = Dt;
                            function Dt () {
                                X(this, Dt);
                            }
                            function jt () {
                                X(this, jt);
                            }
                            function Lt (e, t) {
                                var n = (65535 & e) + (65535 & t);
                                return (((e >> 16) + (t >> 16) + (n >> 16)) << 16) | (65535 & n);
                            }
                            function qt (e, t, n, i, r, o) {
                                return Lt(((t = Lt(Lt(t, e), Lt(i, o))) << r) | (t >>> (32 - r)), n);
                            }
                            function Gt (e, t, n, i, r, o, a) {
                                return qt((t & n) | (~t & i), e, t, r, o, a);
                            }
                            function Ut (e, t, n, i, r, o, a) {
                                return qt((t & i) | (n & ~i), e, t, r, o, a);
                            }
                            function Ft (e, t, n, i, r, o, a) {
                                return qt(t ^ n ^ i, e, t, r, o, a);
                            }
                            function $t (e, t, n, i, r, o, a) {
                                return qt(n ^ (t | ~i), e, t, r, o, a);
                            }
                            function Jt (e, t) {
                                (e[t >> 5] |= 128 << t % 32), (e[14 + (((t + 64) >>> 9) << 4)] = t);
                                for (
                                    var n, i, r, o, a = 1732584193, s = -271733879, c = -1732584194, u = 271733878, l = 0;
                                    l < e.length;
                                    l += 16
                                )
                                    (a = Gt((n = a), (i = s), (r = c), (o = u), e[l], 7, -680876936)),
                                        (u = Gt(u, a, s, c, e[l + 1], 12, -389564586)),
                                        (c = Gt(c, u, a, s, e[l + 2], 17, 606105819)),
                                        (s = Gt(s, c, u, a, e[l + 3], 22, -1044525330)),
                                        (a = Gt(a, s, c, u, e[l + 4], 7, -176418897)),
                                        (u = Gt(u, a, s, c, e[l + 5], 12, 1200080426)),
                                        (c = Gt(c, u, a, s, e[l + 6], 17, -1473231341)),
                                        (s = Gt(s, c, u, a, e[l + 7], 22, -45705983)),
                                        (a = Gt(a, s, c, u, e[l + 8], 7, 1770035416)),
                                        (u = Gt(u, a, s, c, e[l + 9], 12, -1958414417)),
                                        (c = Gt(c, u, a, s, e[l + 10], 17, -42063)),
                                        (s = Gt(s, c, u, a, e[l + 11], 22, -1990404162)),
                                        (a = Gt(a, s, c, u, e[l + 12], 7, 1804603682)),
                                        (u = Gt(u, a, s, c, e[l + 13], 12, -40341101)),
                                        (c = Gt(c, u, a, s, e[l + 14], 17, -1502002290)),
                                        (a = Ut(a, (s = Gt(s, c, u, a, e[l + 15], 22, 1236535329)), c, u, e[l + 1], 5, -165796510)),
                                        (u = Ut(u, a, s, c, e[l + 6], 9, -1069501632)),
                                        (c = Ut(c, u, a, s, e[l + 11], 14, 643717713)),
                                        (s = Ut(s, c, u, a, e[l], 20, -373897302)),
                                        (a = Ut(a, s, c, u, e[l + 5], 5, -701558691)),
                                        (u = Ut(u, a, s, c, e[l + 10], 9, 38016083)),
                                        (c = Ut(c, u, a, s, e[l + 15], 14, -660478335)),
                                        (s = Ut(s, c, u, a, e[l + 4], 20, -405537848)),
                                        (a = Ut(a, s, c, u, e[l + 9], 5, 568446438)),
                                        (u = Ut(u, a, s, c, e[l + 14], 9, -1019803690)),
                                        (c = Ut(c, u, a, s, e[l + 3], 14, -187363961)),
                                        (s = Ut(s, c, u, a, e[l + 8], 20, 1163531501)),
                                        (a = Ut(a, s, c, u, e[l + 13], 5, -1444681467)),
                                        (u = Ut(u, a, s, c, e[l + 2], 9, -51403784)),
                                        (c = Ut(c, u, a, s, e[l + 7], 14, 1735328473)),
                                        (a = Ft(a, (s = Ut(s, c, u, a, e[l + 12], 20, -1926607734)), c, u, e[l + 5], 4, -378558)),
                                        (u = Ft(u, a, s, c, e[l + 8], 11, -2022574463)),
                                        (c = Ft(c, u, a, s, e[l + 11], 16, 1839030562)),
                                        (s = Ft(s, c, u, a, e[l + 14], 23, -35309556)),
                                        (a = Ft(a, s, c, u, e[l + 1], 4, -1530992060)),
                                        (u = Ft(u, a, s, c, e[l + 4], 11, 1272893353)),
                                        (c = Ft(c, u, a, s, e[l + 7], 16, -155497632)),
                                        (s = Ft(s, c, u, a, e[l + 10], 23, -1094730640)),
                                        (a = Ft(a, s, c, u, e[l + 13], 4, 681279174)),
                                        (u = Ft(u, a, s, c, e[l], 11, -358537222)),
                                        (c = Ft(c, u, a, s, e[l + 3], 16, -722521979)),
                                        (s = Ft(s, c, u, a, e[l + 6], 23, 76029189)),
                                        (a = Ft(a, s, c, u, e[l + 9], 4, -640364487)),
                                        (u = Ft(u, a, s, c, e[l + 12], 11, -421815835)),
                                        (c = Ft(c, u, a, s, e[l + 15], 16, 530742520)),
                                        (a = $t(a, (s = Ft(s, c, u, a, e[l + 2], 23, -995338651)), c, u, e[l], 6, -198630844)),
                                        (u = $t(u, a, s, c, e[l + 7], 10, 1126891415)),
                                        (c = $t(c, u, a, s, e[l + 14], 15, -1416354905)),
                                        (s = $t(s, c, u, a, e[l + 5], 21, -57434055)),
                                        (a = $t(a, s, c, u, e[l + 12], 6, 1700485571)),
                                        (u = $t(u, a, s, c, e[l + 3], 10, -1894986606)),
                                        (c = $t(c, u, a, s, e[l + 10], 15, -1051523)),
                                        (s = $t(s, c, u, a, e[l + 1], 21, -2054922799)),
                                        (a = $t(a, s, c, u, e[l + 8], 6, 1873313359)),
                                        (u = $t(u, a, s, c, e[l + 15], 10, -30611744)),
                                        (c = $t(c, u, a, s, e[l + 6], 15, -1560198380)),
                                        (s = $t(s, c, u, a, e[l + 13], 21, 1309151649)),
                                        (a = $t(a, s, c, u, e[l + 4], 6, -145523070)),
                                        (u = $t(u, a, s, c, e[l + 11], 10, -1120210379)),
                                        (c = $t(c, u, a, s, e[l + 2], 15, 718787259)),
                                        (s = $t(s, c, u, a, e[l + 9], 21, -343485551)),
                                        (a = Lt(a, n)),
                                        (s = Lt(s, i)),
                                        (c = Lt(c, r)),
                                        (u = Lt(u, o));
                                return [a, s, c, u];
                            }
                            function Vt (e) {
                                for (var t = "", n = 32 * e.length, i = 0; i < n; i += 8)
                                    t += String.fromCharCode((e[i >> 5] >>> i % 32) & 255);
                                return t;
                            }
                            function Ht (e) {
                                var t = [];
                                for (t[(e.length >> 2) - 1] = void 0, i = 0; i < t.length; i += 1) t[i] = 0;
                                for (var n = 8 * e.length, i = 0; i < n; i += 8) t[i >> 5] |= (255 & e.charCodeAt(i / 8)) << i % 32;
                                return t;
                            }
                            function Bt (e) {
                                for (var t, n = "0123456789abcdef", i = "", r = 0; r < e.length; r += 1)
                                    (t = e.charCodeAt(r)), (i += n.charAt((t >>> 4) & 15) + n.charAt(15 & t));
                                return i;
                            }
                            function Wt (e) {
                                return unescape(encodeURIComponent(e));
                            }
                            function Kt (e) {
                                return Vt(Jt(Ht((e = Wt(e))), 8 * e.length));
                            }
                            function zt (e, t) {
                                (e = Wt(e)), (t = Wt(t));
                                var n,
                                    i = Ht(e),
                                    r = [],
                                    o = [];
                                for (r[15] = o[15] = void 0, 16 < i.length && (i = Jt(i, 8 * e.length)), n = 0; n < 16; n += 1)
                                    (r[n] = 909522486 ^ i[n]), (o[n] = 1549556828 ^ i[n]);
                                return (e = Jt(r.concat(Ht(t)), 512 + 8 * t.length)), Vt(Jt(o.concat(e), 640));
                            }
                            function Qt (e, t, n) {
                                return t ? (n ? zt(t, e) : Bt(zt(t, e))) : n ? Kt(e) : Bt(Kt(e));
                            }
                            (Rt.ERROR_ACTION_TYPE_NULL = "trackaction_type"),
                                (Rt.ERROR_ACTION_TYPE_INVALID =
                                    "trackaction_type64"),
                                (Rt.ERROR_ACTION_PARAM_KEY_NULL = "trackaction_paramkey"),
                                (Rt.ERROR_ACTION_PARAM_KEY_INVALID =
                                    "trackaction_paramkey64"),
                                (Rt.WARN_ACTION_PARAM_KEY_RESERVED =
                                    "SDKkey'ams_reserved_'SDK"),
                                (Rt.ERROR_ACTION_PARAM_VALUE_INVALID =
                                    "trackaction_paramvalueString/Number/Boolean/Array[key=${0}, value=${1}]"),
                                (Rt.ERROR_ACTION_PARAM_VALUE_ARRAY_INVALID =
                                    "trackaction_paramvalueArrayArrayString/Number/Boolean[key=${0}, value=${1}, ${2}${3}]"),
                                (Rt.ERROR_ACTION_PARAM_VALUE_ARRAY_TYPE_UNUNIQUE =
                                    "trackaction_paramvalueArrayArray"),
                                (Rt.ERROR_ACTION_PARAM_IS_NOT_OBJECT = "action_param Object"),
                                (N = N),
                                (Xt = T =
                                {
                                    exports: {},
                                }).exports
                                    ? (Xt.exports = Qt)
                                    : (N.md5 = Qt);
                            var Yt = _t(T.exports),
                                Xt = "function" == typeof btoa;
                            function Zt (e) {
                                var t;
                                return e.length < 2
                                    ? (t = e.charCodeAt(0)) < 128
                                        ? e
                                        : t < 2048
                                            ? rn(192 | (t >>> 6)) + rn(128 | (63 & t))
                                            : rn(224 | ((t >>> 12) & 15)) + rn(128 | ((t >>> 6) & 63)) + rn(128 | (63 & t))
                                    : ((t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320)),
                                        rn(240 | ((t >>> 18) & 7)) +
                                        rn(128 | ((t >>> 12) & 63)) +
                                        rn(128 | ((t >>> 6) & 63)) +
                                        rn(128 | (63 & t)));
                            }
                            function en (e, t, n, i) {
                                for (var r, o = 1 < i ? void 0 : i ? ln(t, n) : t, a = e.length - 1; 0 <= a; a--)
                                    (r = e[a]) && (o = (i ? r(t, n, o) : r(o)) || o);
                                i && o && un(t, n, o);
                            }
                            (N = "function" == typeof Buffer), "function" == typeof TextDecoder && new TextDecoder();
                            var tn = "function" == typeof TextEncoder ? new TextEncoder() : void 0,
                                nn = Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),
                                rn =
                                    (nn.forEach(function (e, t) {
                                        return t;
                                    }),
                                        String.fromCharCode.bind(String)),
                                on =
                                    ("function" == typeof Uint8Array.from && Uint8Array.from.bind(Uint8Array),
                                        Xt
                                            ? function (e) {
                                                return btoa(e);
                                            }
                                            : N
                                                ? function (e) {
                                                    return Buffer.from(e, "binary").toString("base64");
                                                }
                                                : function (e) {
                                                    for (var t, n, i, r = "", o = e.length % 3, a = 0; a < e.length;) {
                                                        if (
                                                            255 < (t = e.charCodeAt(a++)) ||
                                                            255 < (n = e.charCodeAt(a++)) ||
                                                            255 < (i = e.charCodeAt(a++))
                                                        )
                                                            throw new TypeError("invalid character found");
                                                        r +=
                                                            nn[((t = (t << 16) | (n << 8) | i) >> 18) & 63] +
                                                            nn[(t >> 12) & 63] +
                                                            nn[(t >> 6) & 63] +
                                                            nn[63 & t];
                                                    }
                                                    return o ? r.slice(0, o - 3) + "===".substring(o) : r;
                                                }),
                                an = N
                                    ? function (e) {
                                        return Buffer.from(e).toString("base64");
                                    }
                                    : function (e) {
                                        for (var t = [], n = 0, i = e.length; n < i; n += 4096)
                                            t.push(rn.apply(null, e.subarray(n, n + 4096)));
                                        return on(t.join(""));
                                    },
                                sn = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,
                                cn = N
                                    ? function (e) {
                                        return Buffer.from(e, "utf8").toString("base64");
                                    }
                                    : tn
                                        ? function (e) {
                                            return an(tn.encode(e));
                                        }
                                        : function (e) {
                                            return on(e.replace(sn, Zt));
                                        },
                                un = Object.defineProperty,
                                ln = Object.getOwnPropertyDescriptor;
                            ee(
                                fn,
                                [
                                    {
                                        key: "batchSend",
                                        value: function () {
                                            var e,
                                                t,
                                                n = this.queueManager.getReportableActions(this.reportThreshold);
                                            n.length >= this.reportThreshold ||
                                                ((t =
                                                    (null == (e = this.configManager) ? void 0 : e.getRealTimeActionList()) ||
                                                    ye.realTimeActionList),
                                                    n.some(function (e) {
                                                        return -1 < t.indexOf(e.action_type) && !e.is_retry;
                                                    }))
                                                ? this.executeSend()
                                                : this.triggerExecuteSend(),
                                                this.startInspectTimer();
                                        },
                                    },
                                    {
                                        key: "flushSend",
                                        value: function () {
                                            this.executeSend();
                                        },
                                    },
                                    {
                                        key: "executeSend",
                                        value: function () {
                                            var e = this;
                                            if (fn.requestConcurrency <= fn.currentRequestCount) this.isNeedContinueSend = true;
                                            else {
                                                this.isNeedContinueSend = false;
                                                var t = (fn.requestConcurrency - fn.currentRequestCount) * this.cgiBatchSize,
                                                    n = this.queueManager.getReportableActions(t),
                                                    i = this.getBaseInfo();
                                                if (
                                                    (i.openid ||
                                                        i.unionid ||
                                                        (We.warn(" setOpenId  setUnionId ID"),
                                                            (n = n.filter(function (e) {
                                                                return null == e ? void 0 : e.ad_trace_id;
                                                            }))),
                                                        !(n.length <= 0))
                                                ) {
                                                    t < this.queueManager.getReportableActionsLength() && (this.isNeedContinueSend = true),
                                                        (fn.currentRequestCount += Math.ceil(n.length / this.cgiBatchSize));
                                                    for (var r = [], o = 0; o < n.length; o += this.cgiBatchSize) {
                                                        var a = this.generateActionReportParams(n.slice(o, o + this.cgiBatchSize));
                                                        r.push(this.report(a));
                                                    }
                                                    Promise.all(r)
                                                        .then(function (t) {
                                                            (t = t.some(function (e) {
                                                                return 0 <= e;
                                                            })),
                                                                e.isNeedContinueSend && t && e.executeSend();
                                                        })
                                                        .catch(function (t) {
                                                            We.error(t),
                                                                e.reportLog({
                                                                    message: "executeSend catch: ".concat(t.message),
                                                                    log_type: me,
                                                                    err_stack: t.stack,
                                                                });
                                                        });
                                                }
                                            }
                                        },
                                    },
                                    {
                                        key: "generateActionReportParams",
                                        value: function (e) {
                                            var t = [],
                                                n = [],
                                                i = this.getBaseInfo();
                                            return (
                                                e.forEach(function (e) {
                                                    n.push(e.action_id), delete (e = Object.assign({}, e)).inner_status, t.push(e);
                                                }),
                                                {
                                                    data: {
                                                        info: i,
                                                        actions: t,
                                                    },
                                                    actionIdList: n,
                                                }
                                            );
                                        },
                                    },
                                    {
                                        key: "dealSuccessData",
                                        value: function (e, t) {
                                            -1 < [51001, 51003].indexOf(null == e ? void 0 : e.code)
                                                ? this.queueManager.updateActionsForReportFail(t)
                                                : this.queueManager.removeActions(t),
                                                0 !== (null == e ? void 0 : e.code) &&
                                                (this.reportLog({
                                                    log_type: _e,
                                                    code: null == e ? void 0 : e.code,
                                                    message: "trace_id: "
                                                        .concat(null == e ? void 0 : e.trace_id, "msg: ")
                                                        .concat(null == e ? void 0 : e.message),
                                                }),
                                                    We.error("", e));
                                        },
                                    },
                                    {
                                        key: "dealFailData",
                                        value: function (e, t) {
                                            this.queueManager.updateActionsForReportFail(t),
                                                this.reportLog({
                                                    log_type: _e,
                                                    code: e.code,
                                                    message: e.message,
                                                }),
                                                We.error("", e);
                                        },
                                    },
                                    {
                                        key: "report",
                                        value: function (e) {
                                            var t = this,
                                                n = e.data,
                                                i = e.actionIdList;
                                            return (
                                                this.queueManager.updateActionsForReporting(i),
                                                We.debug &&
                                                (We.info(
                                                    ": ",
                                                    "".concat(
                                                        n.actions
                                                            .map(function (e) {
                                                                return e.action_type;
                                                            })
                                                            .join(""),
                                                        ""
                                                    )
                                                ),
                                                    We.info(": ", n)),
                                                new Promise(function (e) {
                                                    var r,
                                                        o,
                                                        a,
                                                        s,
                                                        c,
                                                        u = Date.now();
                                                    try {
                                                        var l = (function (e) {
                                                            var t = "",
                                                                n = null == e ? void 0 : e.appid,
                                                                i = null == e ? void 0 : e.secret_key,
                                                                r = null == e ? void 0 : e.sdk_version;
                                                            if (
                                                                ((e = null == e ? void 0 : e.timestamp),
                                                                    n && i && r && e && 32 === i.length)
                                                            )
                                                                for (var o = Yt(r + n + e), a = 0; a < 32; a++)
                                                                    t += (a % 2 == 0 ? i : o)[a];
                                                            return t;
                                                        })({
                                                            appid: null == (c = null == n ? void 0 : n.info) ? void 0 : c.appid,
                                                            secret_key:
                                                                null == (r = null == n ? void 0 : n.info) ? void 0 : r.secret_key,
                                                            sdk_version:
                                                                null == (o = null == n ? void 0 : n.info) ? void 0 : o.sdk_version,
                                                            timestamp: u,
                                                        }),
                                                            p = (function (e, t) {
                                                                return 1 < arguments.length && void 0 !== t && t
                                                                    ? cn(e)
                                                                        .replace(/=/g, "")
                                                                        .replace(/[+\/]/g, function (e) {
                                                                            return "+" == e ? "-" : "_";
                                                                        })
                                                                    : cn(e);
                                                            })(JSON.stringify(n)),
                                                            f = {
                                                                "Client-Time": u,
                                                                "Sign-Value": Yt(
                                                                    p +
                                                                    (null == (a = null == n ? void 0 : n.info)
                                                                        ? void 0
                                                                        : a.user_action_set_id) +
                                                                    (null == (s = null == n ? void 0 : n.info)
                                                                        ? void 0
                                                                        : s.secret_key) +
                                                                    l
                                                                ),
                                                                "Sign-Version": ye.signVersion,
                                                                "content-type": "text/plain;charset=UTF-8",
                                                            },
                                                            d = p;
                                                    } catch (l) {
                                                        l = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(l);
                                                        (f = {
                                                            "Client-Time": u,
                                                        }),
                                                            (d = n),
                                                            t.reportLog({
                                                                log_type: "SIGN_ERROR",
                                                                message: "sign error msg: ".concat(null == l ? void 0 : l.message),
                                                                err_stack: null == l ? void 0 : l.stack,
                                                            }),
                                                            We.error(l);
                                                    }
                                                    wx.request({
                                                        url: "https://api.datanexus.qq.com/data-nexus-cgi/miniprogram",
                                                        method: "POST",
                                                        timeout:
                                                            (null == (c = t.configManager) ? void 0 : c.getRequestTimeout()) ||
                                                            ye.requestTimeout,
                                                        header: f,
                                                        data: d,
                                                        success: function (n) {
                                                            We.devLog(
                                                                ":",
                                                                null == (r = null == n ? void 0 : n.data) ? void 0 : r.code
                                                            );
                                                            var r =
                                                                (null == (r = null == n ? void 0 : n.header) ? void 0 : r["Server-Time"]) ||
                                                                -1;
                                                            if (
                                                                (Ne.revise(r),
                                                                    --fn.currentRequestCount,
                                                                    200 === (null == n ? void 0 : n.statusCode))
                                                            )
                                                                t.dealSuccessData(null == n ? void 0 : n.data, i),
                                                                    e((null == n ? void 0 : n.data).code);
                                                            else {
                                                                r = "";
                                                                try {
                                                                    r =
                                                                        "object" == Y(null == n ? void 0 : n.data)
                                                                            ? JSON.stringify(null == n ? void 0 : n.data)
                                                                            : null == n
                                                                                ? void 0
                                                                                : n.data;
                                                                } catch (n) {
                                                                    n =
                                                                        VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                            n
                                                                        );
                                                                    We.error(n);
                                                                }
                                                                (n = {
                                                                    code:
                                                                        "number" == typeof (null == n ? void 0 : n.statusCode)
                                                                            ? -1 * n.statusCode
                                                                            : -888,
                                                                    message: "statusCode: "
                                                                        .concat(null == n ? void 0 : n.statusCode, ", data: ")
                                                                        .concat(r),
                                                                }),
                                                                    t.dealFailData(n, i),
                                                                    e(n.code);
                                                            }
                                                        },
                                                        fail: function (n) {
                                                            We.devLog(":", n),
                                                                --fn.currentRequestCount,
                                                                (n = {
                                                                    code:
                                                                        "number" == typeof (null == n ? void 0 : n.errno)
                                                                            ? -1 * n.errno
                                                                            : -999,
                                                                    message: null == n ? void 0 : n.errMsg,
                                                                }),
                                                                t.dealFailData(n, i),
                                                                e(n.code);
                                                        },
                                                    });
                                                })
                                            );
                                        },
                                    },
                                    {
                                        key: "startInspectTimer",
                                        value: function () {
                                            var e = this;
                                            clearTimeout(this.inspectTimer),
                                                (this.inspectTimer = setTimeout(function () {
                                                    fn.requestConcurrency <= fn.currentRequestCount &&
                                                        (fn.currentRequestCount = fn.requestConcurrency - 1),
                                                        e.executeSend(),
                                                        e.startInspectTimer();
                                                }, 1e3 * this.inspectDelay));
                                        },
                                    },
                                ],
                                [
                                    {
                                        key: "setRequestConcurrency",
                                        value: function (e) {
                                            "number" == typeof e
                                                ? e < 1
                                                    ? We.error("1")
                                                    : 10 < e
                                                        ? We.error("10")
                                                        : (fn.requestConcurrency = e)
                                                : We.error("");
                                        },
                                    },
                                ]
                            );
                            var pn = fn;
                            function fn (e) {
                                var t = this;
                                X(this, fn),
                                    (this.cgiBatchSize = ye.cgiBatchSize),
                                    (this.reportThreshold = ye.reportThreshold),
                                    (this.reportDelay = ye.reportDelay),
                                    (this.triggerExecuteSend = (function (e, t) {
                                        var n,
                                            i = 1 < arguments.length && void 0 !== t ? t : 0,
                                            r = [];
                                        return function () {
                                            for (var t = arguments.length, o = new Array(t), a = 0; a < t; a++) o[a] = arguments[a];
                                            return (
                                                clearTimeout(n),
                                                (n = setTimeout(function () {
                                                    var t = e.apply(void 0, o);
                                                    r.forEach(function (e) {
                                                        return e(t);
                                                    }),
                                                        (r = []);
                                                }, i)),
                                                new Promise(function (e) {
                                                    return r.push(e);
                                                })
                                            );
                                        };
                                    })(function () {
                                        t.executeSend();
                                    }, 1e3 * this.reportDelay)),
                                    (this.inspectDelay = ye.inspectDelay),
                                    (this.inspectTimer = void 0),
                                    (this.isNeedContinueSend = false),
                                    (this.getBaseInfo = e.getBaseInfo),
                                    (this.reportLog = e.reportLog),
                                    (this.queueManager = e.queueManager),
                                    (this.configManager = e.configManager),
                                    this.flushSend(),
                                    this.startInspectTimer();
                            }
                            (pn.currentRequestCount = 0),
                                (pn.requestConcurrency = ye.requestConcurrency),
                                en([Qe], pn.prototype, "batchSend", 1),
                                en([Qe], pn.prototype, "flushSend", 1),
                                en([Qe], pn.prototype, "executeSend", 1),
                                ee(kn, [
                                    {
                                        key: "install",
                                        value: function (e, t) {
                                            function n (t) {
                                                lt.subscribe(
                                                    t,
                                                    (function (t, n) {
                                                        var i = 1 < arguments.length && void 0 !== n ? n : {};
                                                        return function (n) {
                                                            e.track(
                                                                t,
                                                                Object.assign(
                                                                    i || {},
                                                                    1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {},
                                                                    $($({}, En, true), On, n)
                                                                )
                                                            );
                                                        };
                                                    })(t)
                                                );
                                            }
                                            n("TICKET"),
                                                n("START_APP"),
                                                n("ENTER_FOREGROUND"),
                                                n("ENTER_BACKGROUND"),
                                                "all" === t &&
                                                (n("LOGIN"),
                                                    n("ADD_TO_WISHLIST"),
                                                    n("SHARE"),
                                                    n("CREATE_GAME_CLUB"),
                                                    n("TAP_GAME_CLUB"),
                                                    n("CREATE_GAME_ROOM"),
                                                    n("JOIN_GAME_ROOM"),
                                                    n("START_PAY"),
                                                    n("FINISH_PAY"));
                                        },
                                    },
                                ]);
                            var dn = kn;
                            ee(_n, [
                                {
                                    key: "onPurchase",
                                    value: function (e) {
                                        "number" != typeof e && We.warn(""),
                                            e <= 0 && We.warn("0"),
                                            this.wrapTrack("PURCHASE", {
                                                value: e,
                                            });
                                    },
                                },
                                {
                                    key: "onEnterForeground",
                                    value: function () {
                                        this.wrapTrack("ENTER_FOREGROUND");
                                    },
                                },
                                {
                                    key: "onEnterBackground",
                                    value: function () {
                                        this.wrapTrack("ENTER_BACKGROUND");
                                    },
                                },
                                {
                                    key: "onAppStart",
                                    value: function () {
                                        this.wrapTrack("START_APP");
                                    },
                                },
                                {
                                    key: "onAppQuit",
                                    value: function () {
                                        this.wrapTrack("APP_QUIT");
                                    },
                                },
                                {
                                    key: "onAddToWishlist",
                                    value: function () {
                                        this.wrapTrack("ADD_TO_WISHLIST");
                                    },
                                },
                                {
                                    key: "wrapTrack",
                                    value: function (e, t) {
                                        this.track(e, Object.assign(t || {}, $({}, this.special_method_symbol, 1)));
                                    },
                                },
                            ]),
                                B(mn, _n),
                                (gn = W(mn)),
                                ee(mn, [
                                    {
                                        key: "onRegister",
                                        value: function () {
                                            this.wrapTrack("REGISTER");
                                        },
                                    },
                                    {
                                        key: "onCreateRole",
                                        value: function (e) {
                                            e && "string" != typeof e && We.warn(""),
                                                this.wrapTrack(
                                                    "CREATE_ROLE",
                                                    e
                                                        ? {
                                                            name: e,
                                                        }
                                                        : {}
                                                );
                                        },
                                    },
                                    {
                                        key: "onTutorialFinish",
                                        value: function () {
                                            this.wrapTrack("TUTORIAL_FINISH");
                                        },
                                    },
                                ]),
                                (T = mn);
                            var hn,
                                gn,
                                vn = "",
                                yn =
                                    ((hn = []),
                                    {
                                        requestActionList: function () {
                                            try {
                                                Ce({
                                                    conf_name: "data_nexus_common",
                                                    conf_key: "action_types",
                                                }).then(function (e) {
                                                    De(e) && (hn = e);
                                                });
                                            } catch (e) {
                                                e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                We.error(e);
                                            }
                                        },
                                        getActionList: function () {
                                            return hn;
                                        },
                                    });
                            function mn () {
                                return X(this, mn), gn.apply(this, arguments);
                            }
                            function _n () {
                                X(this, _n), (this.special_method_symbol = Symbol("special_method_symbol"));
                            }
                            function kn () {
                                X(this, kn);
                            }
                            function bn (e) {
                                try {
                                    e &&
                                        !/^[a-zA-Z0-9_\-]+$/.test(e) &&
                                        We.warn("SDKopenid".concat(e, "openid").concat(vn));
                                } catch (e) {
                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                    We.error(e);
                                }
                            }
                            function Sn (e, t, n, i) {
                                for (var r, o = 1 < i ? void 0 : i ? An(t, n) : t, a = e.length - 1; 0 <= a; a--)
                                    (r = e[a]) && (o = (i ? r(t, n, o) : r(o)) || o);
                                i && o && In(t, n, o);
                            }
                            var In = Object.defineProperty,
                                An = Object.getOwnPropertyDescriptor,
                                wn = Symbol("initializedInstance"),
                                En = Symbol("autoTrack"),
                                On = Symbol("actionTime");
                            B(Tn, T),
                                (Pn = W(Tn)),
                                ee(
                                    Tn,
                                    [
                                        {
                                            key: "track",
                                            value: function (e, t) {
                                                var n = Rt.validateActionType(e),
                                                    i = Rt.validateActionParam(t);
                                                n &&
                                                    i &&
                                                    (this.openid || this.unionid || We.warn(" openid  unionid"),
                                                        (n = ye.actionParamMaxLength),
                                                        JSON.stringify(t || {}).length > n
                                                            ? We.error("".concat(n, "").concat(e, " ").concat(t))
                                                            : ((i = !(null == t || !t[En])),
                                                                (n = this.createAction(e, t || {}, i)),
                                                                "release" !== (null == (e = Oe()) ? void 0 : e.envVersion) &&
                                                                (function (e, t) {
                                                                    try {
                                                                        if (!e.is_sdk_auto_track) {
                                                                            var n = e.action_type;
                                                                            try {
                                                                                var i = yn.getActionList();
                                                                                if (!i.includes(n)) {
                                                                                    var r,
                                                                                        o = (function (e) {
                                                                                            var t,
                                                                                                n,
                                                                                                i,
                                                                                                r,
                                                                                                o,
                                                                                                a =
                                                                                                    ("undefined" != typeof Symbol &&
                                                                                                        e[Symbol.iterator]) ||
                                                                                                    e["@@iterator"];
                                                                                            if (a)
                                                                                                return (
                                                                                                    (i = !(n = true)),
                                                                                                    {
                                                                                                        s: function () {
                                                                                                            a = a.call(e);
                                                                                                        },
                                                                                                        n: function () {
                                                                                                            var e = a.next();
                                                                                                            return (n = e.done), e;
                                                                                                        },
                                                                                                        e: function (e) {
                                                                                                            (i = true), (t = e);
                                                                                                        },
                                                                                                        f: function () {
                                                                                                            try {
                                                                                                                n ||
                                                                                                                    null == a.return ||
                                                                                                                    a.return();
                                                                                                            } finally {
                                                                                                                if (i) throw t;
                                                                                                            }
                                                                                                        },
                                                                                                    }
                                                                                                );
                                                                                            if (Array.isArray(e) || (a = V(e)))
                                                                                                return (
                                                                                                    a && (e = a),
                                                                                                    (r = 0),
                                                                                                    {
                                                                                                        s: (o = function () { }),
                                                                                                        n: function () {
                                                                                                            return r >= e.length
                                                                                                                ? {
                                                                                                                    done: true,
                                                                                                                }
                                                                                                                : {
                                                                                                                    done: false,
                                                                                                                    value: e[r++],
                                                                                                                };
                                                                                                        },
                                                                                                        e: function (e) {
                                                                                                            throw e;
                                                                                                        },
                                                                                                        f: o,
                                                                                                    }
                                                                                                );
                                                                                            throw new TypeError(
                                                                                                "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                                                                                            );
                                                                                        })(i);
                                                                                    try {
                                                                                        for (o.s(); !(r = o.n()).done;) {
                                                                                            var a = r.value;
                                                                                            if (
                                                                                                (function (e, t) {
                                                                                                    try {
                                                                                                        if (0 === e.length) return t.length;
                                                                                                        if (0 === t.length) return e.length;
                                                                                                        for (
                                                                                                            var n = [], i = 0;
                                                                                                            i <= t.length;
                                                                                                            i++
                                                                                                        )
                                                                                                            n[i] = [i];
                                                                                                        for (var r = 0; r <= e.length; r++)
                                                                                                            n[0][r] = r;
                                                                                                        for (var o = 1; o <= t.length; o++)
                                                                                                            for (
                                                                                                                var a = 1;
                                                                                                                a <= e.length;
                                                                                                                a++
                                                                                                            )
                                                                                                                t.charAt(o - 1) ===
                                                                                                                    e.charAt(a - 1)
                                                                                                                    ? (n[o][a] =
                                                                                                                        n[o - 1][a - 1])
                                                                                                                    : (n[o][a] = Math.min(
                                                                                                                        n[o - 1][a - 1] + 1,
                                                                                                                        n[o][a - 1] + 1,
                                                                                                                        n[o - 1][a] + 1
                                                                                                                    ));
                                                                                                        return n[t.length][e.length];
                                                                                                    } catch (n) {
                                                                                                        n =
                                                                                                            VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                                                                n
                                                                                                            );
                                                                                                        We.error(n);
                                                                                                    }
                                                                                                })(a, n) <=
                                                                                                parseInt((0.3 * a.length).toString())
                                                                                            ) {
                                                                                                We.warn(
                                                                                                    "SDK"
                                                                                                        .concat(
                                                                                                            n,
                                                                                                            ""
                                                                                                        )
                                                                                                        .concat(vn)
                                                                                                );
                                                                                                break;
                                                                                            }
                                                                                        }
                                                                                    } catch (n) {
                                                                                        n =
                                                                                            VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                                                n
                                                                                            );
                                                                                        o.e(n);
                                                                                    } finally {
                                                                                        o.f();
                                                                                    }
                                                                                }
                                                                            } catch (i) {
                                                                                i =
                                                                                    VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                                        i
                                                                                    );
                                                                                We.error(i);
                                                                            }
                                                                            var s,
                                                                                c,
                                                                                u,
                                                                                l = e;
                                                                            try {
                                                                                ["PURCHASE", "ADD_TO_CART"].includes(l.action_type) &&
                                                                                    l.action_param &&
                                                                                    Be(l.action_param, "value") &&
                                                                                    ("number" !=
                                                                                        typeof (null == (s = l.action_param) ? void 0 : s.value)
                                                                                        ? We.warn(
                                                                                            "SDK".concat(
                                                                                                l.action_type,
                                                                                                ""
                                                                                            )
                                                                                        )
                                                                                        : (null == (c = l.action_param) ? void 0 : c.value) <=
                                                                                            0
                                                                                            ? We.warn(
                                                                                                "SDK".concat(
                                                                                                    l.action_type,
                                                                                                    "0"
                                                                                                )
                                                                                            )
                                                                                            : (null == (u = l.action_param) ? void 0 : u.value) <
                                                                                            100 &&
                                                                                            We.warn(
                                                                                                "SDK"
                                                                                                    .concat(
                                                                                                        l.action_type,
                                                                                                        ""
                                                                                                    )
                                                                                                    .concat(vn)
                                                                                            ));
                                                                            } catch (l) {
                                                                                l =
                                                                                    VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                                        l
                                                                                    );
                                                                                We.error(l);
                                                                            }
                                                                        }
                                                                    } catch (e) {
                                                                        e =
                                                                            VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                                e
                                                                            );
                                                                        We.error(e);
                                                                    }
                                                                })(n),
                                                                null != (t = this.queueManage) && t.addAction(n),
                                                                null != (i = this.actionReporter) && i.batchSend()));
                                            },
                                        },
                                        {
                                            key: "flush",
                                            value: function () {
                                                var e;
                                                null != (e = this.actionReporter) && e.flushSend();
                                            },
                                        },
                                        {
                                            key: "setOpenId",
                                            value: function (e) {
                                                var t;
                                                e && "string" == typeof e
                                                    ? ((this.openid = e),
                                                        this.gameInfo.ad_trace_id && !Se.getSync(ge) && lt.publish("START_APP"),
                                                        this.flush(),
                                                        this.saveValidOpenidToStorage(),
                                                        "release" !== (null == (t = Oe()) ? void 0 : t.envVersion) && bn(e))
                                                    : We.error("openid ");
                                            },
                                        },
                                        {
                                            key: "setUnionId",
                                            value: function (e) {
                                                e && "string" == typeof e
                                                    ? ((this.unionid = e), this.flush())
                                                    : We.error("unionid ");
                                            },
                                        },
                                        {
                                            key: "setUserUniqueId",
                                            value: function (e) {
                                                e && "string" == typeof e ? (this.user_unique_id = e) : We.error("user_unique_id ");
                                            },
                                        },
                                        {
                                            key: "subscribeEvent",
                                            value: function () {
                                                var e = this;
                                                lt.subscribe("ENTER_BACKGROUND", function () {
                                                    var t;
                                                    null != (t = e.actionReporter) && t.flushSend(),
                                                        null != (t = e.queueManage) && t.reportLostNum();
                                                });
                                            },
                                        },
                                        {
                                            key: "getTrackBaseInfo",
                                            value: function () {
                                                var e,
                                                    t,
                                                    n = Oe();
                                                return Object.assign(
                                                    {},
                                                    this.deviceInfo,
                                                    ((e = this.config),
                                                        (t = {}),
                                                        [
                                                            "user_action_set_id",
                                                            "appid",
                                                            "openid",
                                                            "secret_key",
                                                            "user_unique_id",
                                                            "unionid",
                                                        ].forEach(function (n) {
                                                            Be(e, n) && (t[n] = e[n]);
                                                        }),
                                                        t),
                                                    {
                                                        local_id: Ae(),
                                                        sdk_name: this.sdk_name,
                                                        sdk_version: this.sdk_version,
                                                        openid: this.openid || Ee(),
                                                        unionid: this.unionid,
                                                        user_unique_id: this.user_unique_id,
                                                        inner_param: {
                                                            app_env_version: n.envVersion,
                                                            app_version: n.version,
                                                        },
                                                    }
                                                );
                                            },
                                        },
                                        {
                                            key: "createAction",
                                            value: function (e, t) {
                                                var n = 2 < arguments.length && void 0 !== arguments[2] && arguments[2],
                                                    i = (null != t && t[En] && delete t[En], Date.now());
                                                return (
                                                    null != t && t[On] && ((i = null == t ? void 0 : t[On]), delete t[On]),
                                                    (i = {
                                                        action_id: Ue(),
                                                        action_param: t,
                                                        action_time: i,
                                                        action_type: e,
                                                        is_retry: false,
                                                        is_sdk_auto_track: n,
                                                        retry_count: 0,
                                                        revised_action_time: Ne.getRevisedcurrentTimeMillis(),
                                                        log_id: ++this.log_id,
                                                        session_id: this.session_id,
                                                        pkg_channel_id: this.gameInfo.pkg_channel_id,
                                                        source_scene: this.gameInfo.source_scene,
                                                        network_type: we(),
                                                        ad_trace_id: this.gameInfo.ad_trace_id,
                                                        channel: this.getChannelByActionType(e),
                                                    }),
                                                    null != t &&
                                                    t[this.special_method_symbol] &&
                                                    (this.addActionInnerParam(i, "is_special_method", true),
                                                        delete t[this.special_method_symbol]),
                                                    -1 < vt.getChannelClaimActionList().indexOf(e) &&
                                                    this.gameInfo.launch_options &&
                                                    this.addActionInnerParam(i, "launch_options", this.gameInfo.launch_options),
                                                    i
                                                );
                                            },
                                        },
                                        {
                                            key: "addActionInnerParam",
                                            value: function (e, t, n) {
                                                e.inner_param && qe(e.inner_param) ? (e.inner_param[t] = n) : (e.inner_param = $({}, t, n));
                                            },
                                        },
                                        {
                                            key: "getChannelByActionType",
                                            value: function (e) {
                                                var t = "";
                                                return (
                                                    -1 < vt.getChannelClaimActionList().indexOf(e)
                                                        ? (t = this.gameInfo.channel || "")
                                                        : -1 < vt.getNoClaimActionList().indexOf(e) && (t = "UNKNOWN"),
                                                    t
                                                );
                                            },
                                        },
                                        {
                                            key: "reportLog",
                                            value: function (e) {
                                                var t = {
                                                    user_action_set_id: null == (t = this.config) ? void 0 : t.user_action_set_id,
                                                    appid: null == (t = this.config) ? void 0 : t.appid,
                                                    session_id: this.session_id,
                                                };
                                                Pe(Object.assign(t, e));
                                            },
                                        },
                                        {
                                            key: "useAutoTrack",
                                            value: function () {
                                                var e, t;
                                                null != (e = this.config) && e.auto_track
                                                    ? ((e = true),
                                                        "TRUE" === (null == (t = Se.getSync(de)) ? void 0 : t.ap)
                                                            ? (e = true)
                                                            : "FALSE" === (null == t ? void 0 : t.ap) && (e = false),
                                                        "devtools" === Ie().wx_platform && (e = true),
                                                        new dn().install(this, e ? "all" : "lifecycle"),
                                                        yt(),
                                                        e &&
                                                        (Mt ||
                                                            ((Mt = true),
                                                                St(wx, "login", function (e) {
                                                                    "success" === e && lt.publish("LOGIN");
                                                                }),
                                                                It(wx, "onAddToFavorites", function () {
                                                                    lt.publish("ADD_TO_WISHLIST");
                                                                }),
                                                                It(wx, "onShareTimeline", function () {
                                                                    lt.publish(Ot, {
                                                                        target: "TIME_LINE",
                                                                        trigger: "MENU",
                                                                    });
                                                                }),
                                                                It(wx, "onShareAppMessage", function () {
                                                                    lt.publish(Ot, {
                                                                        target: "APP_MESSAGE",
                                                                        trigger: "MENU",
                                                                    });
                                                                }),
                                                                It(wx, "shareAppMessage", function () {
                                                                    lt.publish(Ot, {
                                                                        target: "APP_MESSAGE",
                                                                        trigger: "BUTTON",
                                                                    });
                                                                }),
                                                                At(
                                                                    wx,
                                                                    "createGameClubButton",
                                                                    false,
                                                                    [
                                                                        {
                                                                            isAsync: false,
                                                                            eventName: "onTap",
                                                                            proxyEvent: function () {
                                                                                lt.publish("TAP_GAME_CLUB");
                                                                            },
                                                                        },
                                                                    ],
                                                                    function () {
                                                                        lt.publish("CREATE_GAME_CLUB");
                                                                    }
                                                                ),
                                                                At(wx, "getGameServerManager", true, [
                                                                    {
                                                                        isAsync: true,
                                                                        eventName: "createRoom",
                                                                        proxyEvent: function (e) {
                                                                            "success" === e && lt.publish("CREATE_GAME_ROOM");
                                                                        },
                                                                    },
                                                                    {
                                                                        isAsync: true,
                                                                        eventName: "joinRoom",
                                                                        proxyEvent: function (e) {
                                                                            "success" === e && lt.publish("JOIN_GAME_ROOM");
                                                                        },
                                                                    },
                                                                ]),
                                                                St(
                                                                    wx,
                                                                    "requestMidasPayment",
                                                                    function (e, t) {
                                                                        lt.publish("FINISH_PAY", {
                                                                            status: "success" === e ? "SUCCESS" : "FAIL",
                                                                            quantity: (null == t ? void 0 : t.buyQuantity) || 0,
                                                                            mode: (null == t ? void 0 : t.mode) || "",
                                                                            platform: (null == t ? void 0 : t.platform) || "",
                                                                            no: (null == t ? void 0 : t.outTradeNo) || "",
                                                                            payType: "Midas",
                                                                        });
                                                                    },
                                                                    function (e) {
                                                                        lt.publish("START_PAY", {
                                                                            quantity: (null == e ? void 0 : e.buyQuantity) || "",
                                                                            mode: (null == e ? void 0 : e.mode) || "",
                                                                            platform: (null == e ? void 0 : e.platform) || "",
                                                                            no: (null == e ? void 0 : e.outTradeNo) || "",
                                                                            payType: "Midas",
                                                                        });
                                                                    }
                                                                ))),
                                                        this.getAutoProxyRemoteConfig())
                                                    : Pt();
                                            },
                                        },
                                        {
                                            key: "getAutoProxyRemoteConfig",
                                            value: function () {
                                                var e,
                                                    t,
                                                    n = Ie();
                                                n.os &&
                                                    n.os_version &&
                                                    null != (e = this.config) &&
                                                    e.user_action_set_id &&
                                                    ((t = {
                                                        conf_name: "MG",
                                                        conf_param: {
                                                            user_action_set_id: null == (e = this.config) ? void 0 : e.user_action_set_id,
                                                            sdk_version: this.sdk_version,
                                                            os_type: (null == n ? void 0 : n.os) || "",
                                                            os_version: (function (e) {
                                                                try {
                                                                    return e && "string" == typeof e
                                                                        ? -1 === (e = e.replace(/\s/g, "")).indexOf(".")
                                                                            ? e
                                                                            : e.split(".").slice(0, 2).join(".")
                                                                        : "";
                                                                } catch (t) {
                                                                    t =
                                                                        VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                            t
                                                                        );
                                                                    return e;
                                                                }
                                                            })(n.os_version),
                                                            device_brand: (null == n ? void 0 : n.device_brand) || "",
                                                            weixin_lib_version: (null == n ? void 0 : n.wx_lib_version) || "",
                                                            weixin_version: (null == n ? void 0 : n.wx_version) || "",
                                                        },
                                                    }),
                                                        new Promise(function (e) {
                                                            wx.request({
                                                                method: "POST",
                                                                url: "https://api.datanexus.qq.com/data-nexus-config/v1/sdk/minigame/get",
                                                                data: t,
                                                                timeout: ye.requestTimeout,
                                                                success: function (t) {
                                                                    xe(t, e, "minigame/get"), Re(t);
                                                                },
                                                                fail: function (e) {
                                                                    Me(e, "minigame/get");
                                                                },
                                                            });
                                                        }).then(function (e) {
                                                            qe(e) && Se.setSync(de, e);
                                                        }));
                                            },
                                        },
                                        {
                                            key: "saveValidOpenidToStorage",
                                            value: function () {
                                                this.openid && /^[a-zA-Z0-9_-]{28,30}$/.test(this.openid) && Se.setSync(ge, this.openid);
                                            },
                                        },
                                    ],
                                    [
                                        {
                                            key: "setRequestConcurrency",
                                            value: function (e) {
                                                pn.setRequestConcurrency(e);
                                            },
                                        },
                                        {
                                            key: "setDebug",
                                            value: function (e) {
                                                We.debug = e;
                                            },
                                        },
                                    ]
                                );
                            var Pn,
                                Nn = Tn;
                            function Tn (e) {
                                var t, n, i, r, o, a, s;
                                return (
                                    X(this, Tn),
                                    ((t = Pn.call(this)).env = "production"),
                                    (t.sdk_version = "1.5.3"),
                                    (t.sdk_name = "@dn-sdk/minigame"),
                                    (t.deviceInfo = {}),
                                    (t.gameInfo = {}),
                                    (t.session_id = ""),
                                    (t.log_id = 0),
                                    (t.inited = false),
                                    null != wx && wx.createCanvas
                                        ? ((r = ye),
                                            Tn[wn].length >= r.maxSdkInstance
                                                ? We.error("")
                                                : ((i = (function (e) {
                                                    if (qe(e)) {
                                                        var t,
                                                            n = [
                                                                "user_action_set_id",
                                                                "secret_key",
                                                                "appid",
                                                                "openid",
                                                                "unionid",
                                                                "user_unique_id",
                                                                "auto_track",
                                                                "auto_attr",
                                                            ];
                                                        for (t in e)
                                                            n.includes(t) || We.warn("Invalid property '".concat(t, "' found in config"));
                                                        return "number" != typeof e.user_action_set_id
                                                            ? "user_action_set_id  number "
                                                            : e.user_action_set_id <= 0
                                                                ? "user_action_set_id  0"
                                                                : "string" != typeof e.secret_key
                                                                    ? "secret_key  string "
                                                                    : "" === e.secret_key.trim()
                                                                        ? " secret_key "
                                                                        : 32 !== e.secret_key.length
                                                                            ? "secret_key  32 "
                                                                            : "string" != typeof e.appid
                                                                                ? "appid  string "
                                                                                : "" !== e.appid.trim() || " appid";
                                                    }
                                                    return " object ";
                                                })(e)),
                                                    (n = Oe()),
                                                    true !== i
                                                        ? We.error(i)
                                                        : (i = null == n ? void 0 : n.appId) && i !== e.appid
                                                            ? We.error("appidappid")
                                                            : (Be((t.config = e), "auto_track") || (t.config.auto_track = ye.autoTrack),
                                                                (t.openid = e.openid),
                                                                (t.unionid = e.unionid),
                                                                (t.user_unique_id = e.user_unique_id),
                                                                t.saveValidOpenidToStorage(),
                                                                (i = e.user_action_set_id),
                                                                Tn[wn].includes(i)
                                                                    ? We.error("SDK")
                                                                    : ((t.reportLog = t.reportLog.bind(z(t))),
                                                                        (t.getTrackBaseInfo = t.getTrackBaseInfo.bind(z(t))),
                                                                        (t.deviceInfo = Ie()),
                                                                        (t.gameInfo = (function () {
                                                                            if (!ze)
                                                                                try {
                                                                                    var e = wx.getLaunchOptionsSync(),
                                                                                        t = e.query.gdt_vid || "";
                                                                                    t ? Se.setSync(pe, t) : (t = Se.getSync(pe) || ""),
                                                                                        (ze = {
                                                                                            source_scene: e.scene,
                                                                                            pkg_channel_id: e.query.wxgamepro || "",
                                                                                            ad_trace_id: t,
                                                                                            launch_options: JSON.stringify(e),
                                                                                            channel:
                                                                                                ((r = null == (n = e) ? void 0 : n.query),
                                                                                                    qe(r)
                                                                                                        ? ((i = ""),
                                                                                                            r.gdt_vid ||
                                                                                                                -1 <
                                                                                                                [1045, 1046, 1084].indexOf(
                                                                                                                    null == n ? void 0 : n.scene
                                                                                                                )
                                                                                                                ? (i = "TENCENT")
                                                                                                                : r.clue_token || (r.clickid && r.item_id)
                                                                                                                    ? (i = "BYTEDANCE")
                                                                                                                    : r.callback && "kuaishou" === r.ksChannel
                                                                                                                        ? (i = "KUAISHOU")
                                                                                                                        : r.bd_vid || (r.ai && r.d && r.q && r.c)
                                                                                                                            ? (i = "BAIDU")
                                                                                                                            : r.uctrackid
                                                                                                                                ? (i = "ALIBABA")
                                                                                                                                : (r.trackid ||
                                                                                                                                    r.imp ||
                                                                                                                                    (-1 <
                                                                                                                                        [1065, 1069, 1194].indexOf(
                                                                                                                                            null == n ? void 0 : n.scene
                                                                                                                                        ) &&
                                                                                                                                        (r.callback || r.u))) &&
                                                                                                                                (i = "OTHERS"),
                                                                                                            i)
                                                                                                        : ""),
                                                                                        });
                                                                                } catch (e) {
                                                                                    e =
                                                                                        VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                                            e
                                                                                        );
                                                                                    (ze = {}), We.log("", e);
                                                                                }
                                                                            var n, i, r;
                                                                            return ze;
                                                                        })()),
                                                                        (t.session_id = Ue()),
                                                                        (t.queueManage = new st({
                                                                            userActionSetId: i,
                                                                            maxLength: r.maxQueueLength,
                                                                            ogEvents: pt,
                                                                        })),
                                                                        (t.actionReporter = new pn({
                                                                            getBaseInfo: t.getTrackBaseInfo,
                                                                            reportLog: t.reportLog,
                                                                            queueManager: t.queueManage,
                                                                            configManager: vt,
                                                                        })),
                                                                        (t.inited = true),
                                                                        Tn[wn].push(i),
                                                                        t.useAutoTrack(),
                                                                        t.subscribeEvent(),
                                                                        "release" === (null == n ? void 0 : n.envVersion)
                                                                            ? We.info("")
                                                                            : ((r = {
                                                                                conf_name: "mini_game_sdk_common",
                                                                                conf_key: "version",
                                                                                sdk_version: t.sdk_version,
                                                                                default_download_url:
                                                                                    "https://sr-home-1257214331.cos.ap-guangzhou.myqcloud.com/sdk/dn-sdk-minigame/dn-sdk-minigame.zip",
                                                                                fail_handler: function () {
                                                                                    t.inited = false;
                                                                                },
                                                                            }),
                                                                                (o = r.sdk_version),
                                                                                (a = r.default_download_url),
                                                                                (s = r.fail_handler),
                                                                                Ce({
                                                                                    conf_name: r.conf_name,
                                                                                    conf_key: r.conf_key,
                                                                                })
                                                                                    .then(function (e) {
                                                                                        var t, n, i, r;
                                                                                        if (qe(e))
                                                                                            return (
                                                                                                (t = null == e ? void 0 : e.blackVersions),
                                                                                                (n = null == e ? void 0 : e.minVersion),
                                                                                                (i = null == e ? void 0 : e.bestVersion),
                                                                                                (e = null == e ? void 0 : e.downloadUrl),
                                                                                                (r = a),
                                                                                                e && /^https/.test(e) && (r = e),
                                                                                                De(t) && -1 < (null == t ? void 0 : t.indexOf(o))
                                                                                                    ? (null != s && s(),
                                                                                                        void We.error(
                                                                                                            "SDK".concat(
                                                                                                                r
                                                                                                            )
                                                                                                        ))
                                                                                                    : n && Fe(o, n) < 0
                                                                                                        ? (null != s && s(),
                                                                                                            void We.error(
                                                                                                                "SDK".concat(
                                                                                                                    r
                                                                                                                )
                                                                                                            ))
                                                                                                        : (i &&
                                                                                                            Fe(o, i) < 0 &&
                                                                                                            We.warn(
                                                                                                                "SDK".concat(
                                                                                                                    r
                                                                                                                )
                                                                                                            ),
                                                                                                            void We.info(""))
                                                                                            );
                                                                                        We.info("");
                                                                                    })
                                                                                    .catch(function () {
                                                                                        We.info("");
                                                                                    }),
                                                                                yn.requestActionList(),
                                                                                bn(e.openid))))))
                                        : We.error("SDK"),
                                    K(t)
                                );
                            }
                            (Nn[wn] = []),
                                Sn([Qe, Ye], Nn.prototype, "track", 1),
                                Sn([Qe, Ye], Nn.prototype, "flush", 1),
                                Sn([Qe], Nn.prototype, "setOpenId", 1),
                                Sn([Qe], Nn.prototype, "setUnionId", 1),
                                Sn([Qe], Nn.prototype, "setUserUniqueId", 1),
                                Sn([Qe], Nn.prototype, "subscribeEvent", 1),
                                Sn([Qe], Nn.prototype, "getTrackBaseInfo", 1),
                                Sn([Qe], Nn.prototype, "useAutoTrack", 1);
                            var Cn = (function () {
                                function e (t, n, i, r, o, a, c) {
                                    s(this, e),
                                        (this.data = t),
                                        (this.serverUrl = n),
                                        (this.callback = c),
                                        (this.debugMode = o),
                                        (this.platFormName = a),
                                        (this.tryCount = P.isNumber(i) ? i : 1),
                                        (this.permissionTryCount = 6),
                                        (this.timeout = P.isNumber(r) ? r : 3e3),
                                        (this.taClassName = "HttpTask");
                                }
                                return (
                                    u(e, [
                                        {
                                            key: "run",
                                            value: function () {
                                                var e,
                                                    t = this,
                                                    n = P.createExtraHeaders(),
                                                    i =
                                                        ((n["content-type"] = "application/json"),
                                                            "debug" === this.debugMode && (n["Turbo-Debug-Mode"] = 1),
                                                            "GravityEngine_ali_game" === this.platFormName ? "headers" : "header"),
                                                    r = O.request(
                                                        (l(
                                                            (e = {
                                                                url: this.serverUrl,
                                                                method: "POST",
                                                                data: this.data,
                                                            }),
                                                            i,
                                                            n
                                                        ),
                                                            l(e, "success", function (e) {
                                                                var n;
                                                                0 === (null == e || null == (n = e.data) ? void 0 : n.code)
                                                                    ? t.onSuccess(e)
                                                                    : t.onFailed(e);
                                                            }),
                                                            l(e, "fail", function (e) {
                                                                t.onFailed(e);
                                                            }),
                                                            e)
                                                    );
                                                setTimeout(function () {
                                                    if ((P.isObject(r) || P.isPromise(r)) && P.isFunction(r.abort))
                                                        try {
                                                            r.abort();
                                                        } catch (e) { }
                                                }, this.timeout);
                                            },
                                        },
                                        {
                                            key: "onSuccess",
                                            value: function (e) {
                                                var t, n;
                                                200 === e.statusCode
                                                    ? ((n = "Data Verified"),
                                                        null != e &&
                                                        null != (t = e.data) &&
                                                        null != (t = t.extra) &&
                                                        null != (t = t.errors) &&
                                                        t.length &&
                                                        (n = e.data.extra.errors),
                                                        this.callback({
                                                            code: null == e || null == (t = e.data) ? void 0 : t.code,
                                                            msg: n,
                                                        }))
                                                    : this.callback({
                                                        code: (null == e ? void 0 : e.statusCode) || -3,
                                                        msg: e.statusCode,
                                                    });
                                            },
                                        },
                                        {
                                            key: "onFailed",
                                            value: function (e) {
                                                var t,
                                                    n = this;
                                                0 < --this.tryCount
                                                    ? setTimeout(function () {
                                                        n.run();
                                                    }, 1e3)
                                                    : this.callback({
                                                        code: -3,
                                                        msg: ""
                                                            .concat(null == e || null == (t = e.data) ? void 0 : t.msg, "")
                                                            .concat(
                                                                null == e || null == (t = e.data) || null == (t = t.extra)
                                                                    ? void 0
                                                                    : t.error
                                                            ),
                                                    });
                                            },
                                        },
                                    ]),
                                    e
                                );
                            })(),
                                xn = new ((function () {
                                    function e () {
                                        s(this, e), (this.items = []), (this.isRunning = false), (this.showDebug = false);
                                    }
                                    return (
                                        u(e, [
                                            {
                                                key: "enqueue",
                                                value: function (e, t, n) {
                                                    var i = !(3 < arguments.length && void 0 !== arguments[3]) || arguments[3],
                                                        r = "debug" === n.debugMode,
                                                        o = this;
                                                    (e = new Cn(
                                                        JSON.stringify(e),
                                                        t,
                                                        n.maxRetries,
                                                        n.sendTimeout,
                                                        n.debugMode,
                                                        n.platFormName,
                                                        function (e) {
                                                            (o.isRunning = false),
                                                                P.isFunction(n.callback) && n.callback(e),
                                                                o._runNext(r),
                                                                r && G.info("code ".concat(e.code, " and msg is,"), e.msg);
                                                        }
                                                    )),
                                                        true === i ? (this.items.push(e), this._runNext(r)) : e.run();
                                                },
                                            },
                                            {
                                                key: "_dequeue",
                                                value: function () {
                                                    return this.items.shift();
                                                },
                                            },
                                            {
                                                key: "_runNext",
                                                value: function (e) {
                                                    if (0 < this.items.length && !this.isRunning)
                                                        if (((this.isRunning = true), e)) this._dequeue().run();
                                                        else {
                                                            for (
                                                                var t = this.items.splice(0, this.items.length),
                                                                n = ((e = t[0]), JSON.parse(e.data)),
                                                                i = 1;
                                                                i < t.length;
                                                                i++
                                                            ) {
                                                                var r = t[i];
                                                                (r = JSON.parse(r.data)),
                                                                    (n.event_list = n.event_list.concat(r.event_list));
                                                            }
                                                            var o = new Date().getTime();
                                                            (n.$flush_time = o),
                                                                new Cn(
                                                                    JSON.stringify(n),
                                                                    e.serverUrl,
                                                                    e.tryCount,
                                                                    e.timeout,
                                                                    null == e ? void 0 : e.debugMode,
                                                                    e.platFormName,
                                                                    e.callback
                                                                ).run();
                                                        }
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })())(),
                                Mn = {
                                    name: "GravityEngine",
                                    is_plugin: false,
                                    maxRetries: 3,
                                    sendTimeout: 5e3,
                                    enablePersistence: true,
                                    asyncPersistence: false,
                                    strict: false,
                                    debugMode: "none",
                                },
                                Rn = {
                                    properties: {
                                        $lib_version: g,
                                        $lib: "cocoscreator",
                                        $scene: "",
                                        $today_first_scene: "",
                                    },
                                    getSystemInfo: function (e) {
                                        var t = this;
                                        O.onNetworkStatusChange(function (e) {
                                            t.properties.$network_type = e.networkType;
                                        }),
                                            O.getNetworkType({
                                                success: function (e) {
                                                    t.properties.$network_type = e.networkType;
                                                },
                                                complete: function () {
                                                    O.getSystemInfo({
                                                        success: function (e) {
                                                            G.info(JSON.stringify(e, null, 4));
                                                            var n = {
                                                                $manufacturer: e.brand,
                                                                $brand: e.brand,
                                                                $model: e.model,
                                                                $screen_width: Number(e.screenWidth),
                                                                $screen_height: Number(e.screenHeight),
                                                                $system_language: e.language,
                                                                $os: e.platform,
                                                                $os_version: e.system,
                                                            };
                                                            P.extend(t.properties, n), P.setMpPlatform(e.mp_platform);
                                                        },
                                                        complete: function () {
                                                            e();
                                                        },
                                                    });
                                                },
                                            });
                                    },
                                },
                                Dn = (function () {
                                    function e (t, n) {
                                        var i = this;
                                        s(this, e),
                                            (this.enabled = t.enablePersistence),
                                            this.enabled
                                                ? (t.isChildInstance
                                                    ? ((this.name = t.persistenceName + "_" + t.name),
                                                        (this.nameOld = t.persistenceNameOld + "_" + t.name))
                                                    : ((this.name = t.persistenceName), (this.nameOld = t.persistenceNameOld)),
                                                    t.asyncPersistence
                                                        ? ((this._state = {}),
                                                            O.getStorage(this.name, true, function (e) {
                                                                P.isEmptyObject(e)
                                                                    ? O.getStorage(i.nameOld, true, function (e) {
                                                                        (i._state = P.extend2Layers({}, e, i._state)),
                                                                            i._init(t, n),
                                                                            i._save();
                                                                    })
                                                                    : ((i._state = P.extend2Layers({}, e, i._state)), i._init(t, n), i._save());
                                                            }))
                                                        : ((this._state = O.getStorage(this.name) || {}),
                                                            P.isEmptyObject(this._state) && (this._state = O.getStorage(this.nameOld) || {}),
                                                            this._init(t, n)))
                                                : ((this._state = {}), this._init(t, n));
                                    }
                                    return (
                                        u(e, [
                                            {
                                                key: "_init",
                                                value: function (e, t) {
                                                    this.getDistinctId() || this.setDistinctId(P.UUID()),
                                                        e.isChildInstance || this.getDeviceId() || this._setDeviceId(P.UUID()),
                                                        (this.initComplete = true),
                                                        "function" == typeof t && t(),
                                                        (t = null == (e = O.getStorage(this.name)) ? void 0 : e.current_first_scene_date);
                                                    var n = null == e ? void 0 : e.current_first_scene,
                                                        i = new Date().toLocaleDateString();
                                                    n && t && t === i
                                                        ? (Rn.properties.$today_first_scene = String(
                                                            null == e ? void 0 : e.current_first_scene
                                                        ))
                                                        : ((e = String(
                                                            (null == (n = O.getAppOptions()) ? void 0 : n.scene) ||
                                                            (null == (t = O.getAppOptions()) ? void 0 : t.from)
                                                        )),
                                                            (Rn.properties.$today_first_scene = e),
                                                            (this._state.current_first_scene = e),
                                                            (this._state.current_first_scene_date = i)),
                                                        this._save();
                                                },
                                            },
                                            {
                                                key: "_save",
                                                value: function () {
                                                    this.enabled &&
                                                        this.initComplete &&
                                                        O.setStorage(this.name, JSON.stringify(this._state));
                                                },
                                            },
                                            {
                                                key: "_set",
                                                value: function (e, t) {
                                                    var n,
                                                        i = this;
                                                    "string" == typeof e ? ((n = {})[e] = t) : "object" === r(e) && (n = e),
                                                        P.each(n, function (e, t) {
                                                            i._state[t] = e;
                                                        }),
                                                        this._save();
                                                },
                                            },
                                            {
                                                key: "_get",
                                                value: function (e) {
                                                    return this._state[e];
                                                },
                                            },
                                            {
                                                key: "setEventTimer",
                                                value: function (e, t) {
                                                    var n = this._state.event_timers || {};
                                                    (n[e] = t), this._set("event_timers", n);
                                                },
                                            },
                                            {
                                                key: "removeEventTimer",
                                                value: function (e) {
                                                    var t = (this._state.event_timers || {})[e];
                                                    return P.isUndefined(t) || (delete this._state.event_timers[e], this._save()), t;
                                                },
                                            },
                                            {
                                                key: "getDeviceId",
                                                value: function () {
                                                    return this._state.device_id;
                                                },
                                            },
                                            {
                                                key: "_setDeviceId",
                                                value: function (e) {
                                                    this.getDeviceId() ? G.warn("cannot modify the device id.") : this._set("device_id", e);
                                                },
                                            },
                                            {
                                                key: "getDistinctId",
                                                value: function () {
                                                    return this._state.distinct_id;
                                                },
                                            },
                                            {
                                                key: "setDistinctId",
                                                value: function (e) {
                                                    this._set("distinct_id", e);
                                                },
                                            },
                                            {
                                                key: "getAccountId",
                                                value: function () {
                                                    return this._state.account_id;
                                                },
                                            },
                                            {
                                                key: "setAccountId",
                                                value: function (e) {
                                                    this._set("account_id", e);
                                                },
                                            },
                                            {
                                                key: "getSuperProperties",
                                                value: function () {
                                                    return this._state.props || {};
                                                },
                                            },
                                            {
                                                key: "setSuperProperties",
                                                value: function (e, t) {
                                                    (t = t ? e : P.extend(this.getSuperProperties(), e)), this._set("props", t);
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })();
                            function jn () {
                                return O.getConfig().persistenceNameOld;
                            }
                            var Ln = (function () {
                                function e (t) {
                                    s(this, e),
                                        (t.appId = P.checkAppId((null == t ? void 0 : t.clientId) || "")),
                                        (t.accessToken = t.accessToken),
                                        t.accessToken || console.warn("GravityAnalytics: accessToken must be required"),
                                        (t.autoTrack = {
                                            appLaunch: true,
                                            appShow: true,
                                            appHide: true,
                                            pageShare: true,
                                        }),
                                        (this.platFormName = jn()),
                                        t.tencentSdkData &&
                                        "GravityEngine_wechat_game" === this.platFormName &&
                                        ((this.sdk = new Nn({
                                            user_action_set_id: t.tencentSdkData.user_action_set_id,
                                            secret_key: t.tencentSdkData.secret_key,
                                            appid: t.tencentSdkData.appid,
                                        })),
                                            null != (n = t.tencentSdkData) && n.enableDebug && this.sdk.setDebug(true),
                                            t.appId) &&
                                        (this.sdk.setOpenId(t.appId), this.sdk.onAppStart()),
                                        (t.serverUrl = "".concat(y, "/event/collect/?access_token=").concat(t.accessToken));
                                    var n = P.extend({}, Mn, O.getConfig());
                                    P.isObject(t) ? (this.config = P.extend(n, t)) : (this.config = n), this._init(this.config);
                                }
                                var t, n, r, o, c, p, f;
                                return (
                                    u(e, [
                                        {
                                            key: "_init",
                                            value: function (e) {
                                                var t = this,
                                                    n =
                                                        ((this.name = e.name),
                                                            (this.appId = e.clientId),
                                                            (this.accessToken = e.accessToken),
                                                            this.tencentSDKRegisterTrack(),
                                                            e.serverUrl || e.server_url),
                                                    i =
                                                        "GravityEngine_quick_mp" ===
                                                        ((this.serverUrl = n),
                                                            (this.serverDebugUrl = n),
                                                            (this.configUrl = n + "/config"),
                                                            (this.autoTrackProperties = {}),
                                                            (this._queue = []),
                                                            (this.config.syncBatchSize = 100),
                                                            (this.config.syncInterval = 60),
                                                            e.isChildInstance
                                                                ? (this._state = {})
                                                                : ((G.enabled = "debug" === e.debugMode),
                                                                    (this.instances = []),
                                                                    (this._state = {
                                                                        getSystemInfo: false,
                                                                        initComplete: false,
                                                                    }),
                                                                    Rn.getSystemInfo(function () {
                                                                        t._updateState({
                                                                            getSystemInfo: true,
                                                                        });
                                                                    }),
                                                                    O.setGlobal(this, this.name)),
                                                            (Rn.properties.$scene = String(
                                                                (null == (n = O.getAppOptions()) ? void 0 : n.scene) ||
                                                                (null == (n = O.getAppOptions()) ? void 0 : n.from)
                                                            )),
                                                            (this.store = new Dn(e, function () {
                                                                t.config.asyncPersistence &&
                                                                    P.isFunction(t.config.persistenceComplete) &&
                                                                    t.config.persistenceComplete(t),
                                                                    t._updateState();
                                                            })),
                                                            (this.enabled =
                                                                !P.isBoolean(this.store._get("ge_enabled")) ||
                                                                this.store._get("ge_enabled")),
                                                            (this.isOptOut =
                                                                !!P.isBoolean(this.store._get("ge_isOptOut")) &&
                                                                this.store._get("ge_isOptOut")),
                                                            (n = jn()));
                                                (i ||
                                                    "GravityEngine_wechat_game" === n ||
                                                    "GravityEngine_taobao_game" === n ||
                                                    "GravityEngine_tt_game" === n ||
                                                    "GravityEngine_ali_game" === n ||
                                                    n.includes("gravityengine_qg")) &&
                                                    this.track(i ? "$AppStart" : "$MPLaunch", {
                                                        $url_query: P.setQuery(this.getQuery()),
                                                    }),
                                                    e.isChildInstance || (this.autoTrack = O.initAutoTrackInstance(this, e));
                                            },
                                        },
                                        {
                                            key: "updateConfig",
                                            value: function (e, t) { },
                                        },
                                        {
                                            key: "initInstance",
                                            value: function (t, n) {
                                                if (!this.config.isChildInstance)
                                                    return P.isString(t) && t !== this.name && P.isUndefined(this[t])
                                                        ? ((n = new e(
                                                            P.extend(
                                                                {},
                                                                this.config,
                                                                {
                                                                    enablePersistence: false,
                                                                    isChildInstance: true,
                                                                    name: t,
                                                                },
                                                                n
                                                            )
                                                        )),
                                                            (this[t] = n),
                                                            this.instances.push(t),
                                                            (this[t]._state = this._state),
                                                            n)
                                                        : void G.warn("initInstance() failed due to the name is invalid: " + t);
                                                G.warn("initInstance() cannot be called on child instance");
                                            },
                                        },
                                        {
                                            key: "lightInstance",
                                            value: function (e) {
                                                return this[e];
                                            },
                                        },
                                        {
                                            key: "_setAutoTrackProperties",
                                            value: function (e) {
                                                P.extend(this.autoTrackProperties, e);
                                            },
                                        },
                                        {
                                            key: "setupAndStart",
                                            value: function (e) {
                                                var t = (null == e ? void 0 : e.clientId) && !this.appId;
                                                if (
                                                    (null != e &&
                                                        e.clientId &&
                                                        ((this.config.appId = e.clientId),
                                                            (this.appId = e.clientId),
                                                            this.sdk.setOpenId(this.appId)),
                                                        t && (this.sdk.onAppStart(), this.tencentSDKRegisterTrack()),
                                                        this._state.initComplete)
                                                )
                                                    return false;
                                                this._updateState({
                                                    initComplete: true,
                                                });
                                            },
                                        },
                                        {
                                            key: "_isReady",
                                            value: function () {
                                                return (
                                                    this._state.getSystemInfo &&
                                                    this._state.initComplete &&
                                                    this.store.initComplete &&
                                                    this.config.appId &&
                                                    this.config.accessToken
                                                );
                                            },
                                        },
                                        {
                                            key: "_updateState",
                                            value: function (e) {
                                                var t = this;
                                                P.isObject(e) && P.extend(this._state, e),
                                                    this._onStateChange(),
                                                    P.each(this.instances, function (e) {
                                                        t[e]._onStateChange();
                                                    });
                                            },
                                        },
                                        {
                                            key: "_onStateChange",
                                            value: function () {
                                                var e = this;
                                                this._isReady() &&
                                                    this._queue &&
                                                    0 < this._queue.length &&
                                                    (P.each(this._queue, function (t) {
                                                        e[t[0]].apply(e, C.call(t[1]));
                                                    }),
                                                        (this._queue = []));
                                            },
                                        },
                                        {
                                            key: "_hasDisabled",
                                            value: function () {
                                                var e = !this.enabled || this.isOptOut;
                                                return e && G.info("GravityEngine is Pause or Stop!"), e;
                                            },
                                        },
                                        {
                                            key: "_sendRequest",
                                            value: function (e, t, n) {
                                                if (!this._hasDisabled())
                                                    if (
                                                        !P.isUndefined(this.config.disableEventList) &&
                                                        this.config.disableEventList.includes(e.eventName)
                                                    )
                                                        G.info("disabled Event : " + e.eventName);
                                                    else {
                                                        t = P.isDate(t) ? t : new Date();
                                                        var i =
                                                            (((t = {
                                                                event_list: [
                                                                    {
                                                                        type: e.type,
                                                                        time: new Date(t).getTime(),
                                                                    },
                                                                ],
                                                            }).event_list[0].event = e.eventName),
                                                                "track" === e.type
                                                                    ? ((t.event_list[0].properties = this.getSendProperties()),
                                                                        (i = this.store.removeEventTimer(e.eventName)),
                                                                        P.isUndefined(i) ||
                                                                        ((i = new Date().getTime() - i),
                                                                            86400 < (i = parseFloat((i / 1e3).toFixed(3)))
                                                                                ? (i = 86400)
                                                                                : i < 0 && (i = 0),
                                                                            (t.event_list[0].properties.$event_duration = i)))
                                                                    : (t.event_list[0].properties = {}),
                                                                P.isObject(e.properties) &&
                                                                !P.isEmptyObject(e.properties) &&
                                                                P.extend(t.event_list[0].properties, e.properties),
                                                                P.searchObjDate(t.event_list[0]),
                                                                (t.client_id = this.appId),
                                                                G.info(JSON.stringify(t, null, 4)),
                                                                this.serverUrl);
                                                        if (
                                                            (P.isBoolean(this.config.enableEncrypt) &&
                                                                1 == this.config.enableEncrypt &&
                                                                (t.event_list[0] = P.generateEncryptyData(t.event_list[0], void 0)),
                                                                n)
                                                        ) {
                                                            var r;
                                                            (n = new FormData()),
                                                                "debug" === this.config.debugMode
                                                                    ? (n.append("source", "client"),
                                                                        n.append("appid", this.appId),
                                                                        n.append("deviceId", this.getDeviceId()),
                                                                        n.append("data", JSON.stringify(t.event_list[0])))
                                                                    : ((r = P.base64Encode(JSON.stringify(t))), n.append("data", r));
                                                            try {
                                                                navigator.sendBeacon(i, n);
                                                            } catch (e) { }
                                                            P.isFunction(e.onComplete) &&
                                                                e.onComplete({
                                                                    statusCode: 200,
                                                                });
                                                        } else
                                                            xn.enqueue(t, i, {
                                                                maxRetries: this.config.maxRetries,
                                                                sendTimeout: this.config.sendTimeout,
                                                                callback: e.onComplete,
                                                                debugMode: this.config.debugMode,
                                                                platFormName: this.platFormName,
                                                            });
                                                    }
                                            },
                                        },
                                        {
                                            key: "_isObjectParams",
                                            value: function (e) {
                                                return P.isObject(e) && P.isFunction(e.onComplete);
                                            },
                                        },
                                        {
                                            key: "track",
                                            value: function (e, t, n, i) {
                                                var r;
                                                this._hasDisabled() ||
                                                    (this._isObjectParams(e) &&
                                                        ((e = (r = e).eventName), (t = r.properties), (n = r.time), (i = r.onComplete)),
                                                        (null != (r = t) && r.$trace_id) || (t.$trace_id = P.UUID()),
                                                        (F.event(e) && F.properties(t)) || !this.config.strict
                                                            ? this._internalTrack(e, t, n, i)
                                                            : P.isFunction(i) &&
                                                            i({
                                                                code: -1,
                                                                msg: "invalid parameters",
                                                            }));
                                            },
                                        },
                                        {
                                            key: "_internalTrack",
                                            value: function (e, t, n, i, r) {
                                                this._hasDisabled() ||
                                                    ((n = P.isDate(n) ? n : new Date()),
                                                        this._isReady()
                                                            ? this._sendRequest(
                                                                {
                                                                    type: "track",
                                                                    eventName: e,
                                                                    properties: t,
                                                                    onComplete: i,
                                                                },
                                                                n,
                                                                r
                                                            )
                                                            : this._queue.push(["_internalTrack", [e, t, n, i]]));
                                            },
                                        },
                                        {
                                            key: "userSet",
                                            value: function (e, t, n) {
                                                var i;
                                                this._hasDisabled() ||
                                                    (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        F.propertiesMust(e) || !this.config.strict
                                                            ? ((t = P.isDate(t) ? t : new Date()),
                                                                this._isReady()
                                                                    ? this._sendRequest(
                                                                        {
                                                                            type: "profile",
                                                                            eventName: "profile_set",
                                                                            properties: e,
                                                                            onComplete: n,
                                                                        },
                                                                        t
                                                                    )
                                                                    : this._queue.push(["userSet", [e, t, n]]))
                                                            : (G.warn("calling userSet failed due to invalid arguments"),
                                                                P.isFunction(n) &&
                                                                n({
                                                                    code: -1,
                                                                    msg: "invalid parameters",
                                                                })));
                                            },
                                        },
                                        {
                                            key: "userSetOnce",
                                            value: function (e, t, n) {
                                                var i;
                                                this._hasDisabled() ||
                                                    (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        F.propertiesMust(e) || !this.config.strict
                                                            ? ((t = P.isDate(t) ? t : new Date()),
                                                                this._isReady()
                                                                    ? this._sendRequest(
                                                                        {
                                                                            type: "profile",
                                                                            eventName: "profile_set_once",
                                                                            properties: e,
                                                                            onComplete: n,
                                                                        },
                                                                        t
                                                                    )
                                                                    : this._queue.push(["userSetOnce", [e, t, n]]))
                                                            : (G.warn("calling userSetOnce failed due to invalid arguments"),
                                                                P.isFunction(n) &&
                                                                n({
                                                                    code: -1,
                                                                    msg: "invalid parameters",
                                                                })));
                                            },
                                        },
                                        {
                                            key: "userAdd",
                                            value: function (e, t, n) {
                                                var i;
                                                this._hasDisabled() ||
                                                    (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        F.propertiesMust(e) || !this.config.strict
                                                            ? ((t = P.isDate(t) ? t : new Date()),
                                                                this._isReady()
                                                                    ? this._sendRequest(
                                                                        {
                                                                            type: "profile",
                                                                            eventName: "profile_increment",
                                                                            properties: e,
                                                                            onComplete: n,
                                                                        },
                                                                        t
                                                                    )
                                                                    : this._queue.push(["userAdd", [e, t, n]]))
                                                            : (G.warn("calling userAdd failed due to invalid arguments"),
                                                                P.isFunction(n) &&
                                                                n({
                                                                    code: -1,
                                                                    msg: "invalid parameters",
                                                                })));
                                            },
                                        },
                                        {
                                            key: "userNumberMax",
                                            value: function (e, t, n) {
                                                if (!this._hasDisabled()) {
                                                    var i, r, o;
                                                    for (r in (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        e))
                                                        if ("number" != typeof e[r])
                                                            return (
                                                                (o = "The key ".concat(r, " must be type of number")),
                                                                console.warn(o),
                                                                void (
                                                                    P.isFunction(n) &&
                                                                    n({
                                                                        code: -1,
                                                                        msg: o,
                                                                    })
                                                                )
                                                            );
                                                    F.propertiesMust(e) || !this.config.strict
                                                        ? ((t = P.isDate(t) ? t : new Date()),
                                                            this._isReady()
                                                                ? this._sendRequest(
                                                                    {
                                                                        type: "profile",
                                                                        eventName: "profile_number_max",
                                                                        properties: e,
                                                                        onComplete: n,
                                                                    },
                                                                    t
                                                                )
                                                                : this._queue.push(["userNumberMax", [e, t, n]]))
                                                        : (G.warn("calling userNumberMax failed due to invalid arguments"),
                                                            P.isFunction(n) &&
                                                            n({
                                                                code: -1,
                                                                msg: "invalid parameters",
                                                            }));
                                                }
                                            },
                                        },
                                        {
                                            key: "userNumberMin",
                                            value: function (e, t, n) {
                                                if (!this._hasDisabled()) {
                                                    var i, r, o;
                                                    for (r in (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        e))
                                                        if ("number" != typeof e[r])
                                                            return (
                                                                (o = "The key ".concat(r, " must be type of number")),
                                                                console.warn(o),
                                                                void (
                                                                    P.isFunction(n) &&
                                                                    n({
                                                                        code: -1,
                                                                        msg: o,
                                                                    })
                                                                )
                                                            );
                                                    F.propertiesMust(e) || !this.config.strict
                                                        ? ((t = P.isDate(t) ? t : new Date()),
                                                            this._isReady()
                                                                ? this._sendRequest(
                                                                    {
                                                                        type: "profile",
                                                                        eventName: "profile_number_min",
                                                                        properties: e,
                                                                        onComplete: n,
                                                                    },
                                                                    t
                                                                )
                                                                : this._queue.push(["userNumberMin", [e, t, n]]))
                                                        : (G.warn("calling userNumberMin failed due to invalid arguments"),
                                                            P.isFunction(n) &&
                                                            n({
                                                                code: -1,
                                                                msg: "invalid parameters",
                                                            }));
                                                }
                                            },
                                        },
                                        {
                                            key: "userDel",
                                            value: function (e, t) {
                                                var n,
                                                    i = {};
                                                this._hasDisabled() ||
                                                    (this._isObjectParams(i) &&
                                                        ((i = (n = i).properties), (e = n.time), (t = n.onComplete)),
                                                        F.propertiesMust(i) || !this.config.strict
                                                            ? ((e = P.isDate(e) ? e : new Date()),
                                                                this._isReady()
                                                                    ? this._sendRequest(
                                                                        {
                                                                            type: "profile",
                                                                            eventName: "profile_delete",
                                                                            properties: i,
                                                                            onComplete: t,
                                                                        },
                                                                        e
                                                                    )
                                                                    : this._queue.push(["userDel", [i, e, t]]))
                                                            : (G.warn("calling userDel failed due to invalid arguments"),
                                                                P.isFunction(t) &&
                                                                t({
                                                                    code: -1,
                                                                    msg: "invalid parameters",
                                                                })));
                                            },
                                        },
                                        {
                                            key: "userAppend",
                                            value: function (e, t, n) {
                                                var i;
                                                this._hasDisabled() ||
                                                    (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        F.propertiesMust(e) || !this.config.strict
                                                            ? ((t = P.isDate(t) ? t : new Date()),
                                                                this._isReady()
                                                                    ? this._sendRequest(
                                                                        {
                                                                            type: "profile",
                                                                            eventName: "profile_append",
                                                                            properties: e,
                                                                            onComplete: n,
                                                                        },
                                                                        t
                                                                    )
                                                                    : this._queue.push(["userAppend", [e, t, n]]))
                                                            : (G.warn("calling userAppend failed due to invalid arguments"),
                                                                P.isFunction(n) &&
                                                                n({
                                                                    code: -1,
                                                                    msg: "invalid parameters",
                                                                })));
                                            },
                                        },
                                        {
                                            key: "userUniqAppend",
                                            value: function (e, t, n) {
                                                var i;
                                                this._hasDisabled() ||
                                                    (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        F.userAppendProperties(e) || !this.config.strict
                                                            ? ((t = P.isDate(t) ? t : new Date()),
                                                                this._isReady()
                                                                    ? this._sendRequest(
                                                                        {
                                                                            type: "profile",
                                                                            eventName: "profile_uniq_append",
                                                                            properties: e,
                                                                            onComplete: n,
                                                                        },
                                                                        t
                                                                    )
                                                                    : this._queue.push(["userUniqAppend", [e, t, n]]))
                                                            : (G.warn("calling userAppend failed due to invalid arguments"),
                                                                P.isFunction(n) &&
                                                                n({
                                                                    code: -1,
                                                                    msg: "invalid parameters",
                                                                })));
                                            },
                                        },
                                        {
                                            key: "userUnset",
                                            value: function (e, t, n) {
                                                var i;
                                                (e = l({}, e, null)),
                                                    this._hasDisabled() ||
                                                    (this._isObjectParams(e) &&
                                                        ((e = (i = e).properties), (t = i.time), (n = i.onComplete)),
                                                        F.propertiesMust(e) || !this.config.strict
                                                            ? ((t = P.isDate(t) ? t : new Date()),
                                                                this._isReady()
                                                                    ? this._sendRequest(
                                                                        {
                                                                            type: "profile",
                                                                            eventName: "profile_unset",
                                                                            properties: e,
                                                                            onComplete: n,
                                                                        },
                                                                        t
                                                                    )
                                                                    : this._queue.push(["userUnset", [e, t, n]]))
                                                            : (G.warn("calling userUnset failed due to invalid arguments"),
                                                                P.isFunction(n) &&
                                                                n({
                                                                    code: -1,
                                                                    msg: "invalid parameters",
                                                                })));
                                            },
                                        },
                                        {
                                            key: "getQuickAppInfo",
                                            value: function () {
                                                return new Promise(function (e, t) {
                                                    var n;
                                                    O.getQuickDevice({
                                                        success:
                                                            ((n = a(
                                                                i().mark(function t (n) {
                                                                    var r;
                                                                    return i().wrap(function (t) {
                                                                        for (; ;)
                                                                            switch ((t.prev = t.next)) {
                                                                                case 0:
                                                                                    return (
                                                                                        (r = {
                                                                                            os_name: "android",
                                                                                            android_id: n.user,
                                                                                            imei: n.device,
                                                                                            oaid: n.oaid,
                                                                                            mac: n.mac,
                                                                                            android_version: n.system,
                                                                                            api_version: n.osVersionCode,
                                                                                            rom: n.vendorOsName,
                                                                                            rom_version: n.vendorOsVersion,
                                                                                            phone_brand: n.manufacturer,
                                                                                            phone_model: n.model,
                                                                                        }),
                                                                                        t.abrupt("return", e(r))
                                                                                    );

                                                                                case 2:
                                                                                case "end":
                                                                                    return t.stop();
                                                                            }
                                                                    }, t);
                                                                })
                                                            )),
                                                                function (e) {
                                                                    return n.apply(this, arguments);
                                                                }),
                                                    });
                                                });
                                            },
                                        },
                                        {
                                            key: "getQuickGameInfo",
                                            value: function () {
                                                return new Promise(function (e) {
                                                    var t = jn();
                                                    O.getQuickDevice({
                                                        platform: t,
                                                        success: function (t) {
                                                            return e(t);
                                                        },
                                                    });
                                                });
                                            },
                                        },
                                        {
                                            key: "uploadQuickAppDeviceInfo",
                                            value: function () {
                                                var e = this;
                                                return new Promise(function (t, n) {
                                                    var r;
                                                    O.getQuickDevice({
                                                        success:
                                                            ((r = a(
                                                                i().mark(function r (o) {
                                                                    var a, s;
                                                                    return i().wrap(function (i) {
                                                                        for (; ;)
                                                                            switch ((i.prev = i.next)) {
                                                                                case 0:
                                                                                    return (
                                                                                        (a = {
                                                                                            os_name: "android",
                                                                                            android_id: o.user,
                                                                                            imei: o.device,
                                                                                            oaid: o.oaid,
                                                                                            mac: o.mac,
                                                                                            android_version: o.system,
                                                                                            api_version: o.osVersionCode,
                                                                                            rom: o.vendorOsName,
                                                                                            rom_version: o.vendorOsVersion,
                                                                                            phone_brand: o.manufacturer,
                                                                                            phone_model: o.model,
                                                                                        }),
                                                                                        (s = ""
                                                                                            .concat(
                                                                                                y,
                                                                                                "/user/device_info/?access_token="
                                                                                            )
                                                                                            .concat(e.accessToken, "&client_id=")
                                                                                            .concat(e.appId)),
                                                                                        (i.next = 4),
                                                                                        e.sendNetWork(s, {
                                                                                            data: a,
                                                                                        })
                                                                                    );

                                                                                case 4:
                                                                                    return (
                                                                                        (s = i.sent),
                                                                                        i.abrupt("return", (0 === s.code ? t : n)(s))
                                                                                    );

                                                                                case 6:
                                                                                case "end":
                                                                                    return i.stop();
                                                                            }
                                                                    }, r);
                                                                })
                                                            )),
                                                                function (e) {
                                                                    return r.apply(this, arguments);
                                                                }),
                                                    });
                                                });
                                            },
                                        },
                                        {
                                            key: "uploadQuickGameDeviceInfo",
                                            value: function () {
                                                var e = this;
                                                return new Promise(function (t, n) {
                                                    var r,
                                                        o = jn();
                                                    O.getQuickDevice({
                                                        platform: o,
                                                        success:
                                                            ((r = a(
                                                                i().mark(function r (o) {
                                                                    var a, s;
                                                                    return i().wrap(function (i) {
                                                                        for (; ;)
                                                                            switch ((i.prev = i.next)) {
                                                                                case 0:
                                                                                    return (
                                                                                        (a = o),
                                                                                        (s = ""
                                                                                            .concat(
                                                                                                y,
                                                                                                "/user/device_info/?access_token="
                                                                                            )
                                                                                            .concat(e.accessToken, "&client_id=")
                                                                                            .concat(e.appId)),
                                                                                        (i.next = 4),
                                                                                        e.sendNetWork(s, {
                                                                                            data: a,
                                                                                        })
                                                                                    );

                                                                                case 4:
                                                                                    return (
                                                                                        (s = i.sent),
                                                                                        i.abrupt("return", (0 === s.code ? t : n)(s))
                                                                                    );

                                                                                case 6:
                                                                                case "end":
                                                                                    return i.stop();
                                                                            }
                                                                    }, r);
                                                                })
                                                            )),
                                                                function (e) {
                                                                    return r.apply(this, arguments);
                                                                }),
                                                    });
                                                });
                                            },
                                        },
                                        {
                                            key: "logoutEvent",
                                            value: function () {
                                                this.track("$MPLogout", {});
                                            },
                                        },
                                        {
                                            key: "loginEvent",
                                            value: function () {
                                                this.track("$MPLogin", {});
                                            },
                                        },
                                        {
                                            key: "registerEvent",
                                            value: function () {
                                                "GravityEngine_quick_mp" === jn()
                                                    ? this.track("$AppRegister", {})
                                                    : this.track("$MPRegister", {});
                                            },
                                        },
                                        {
                                            key: "payEvent",
                                            value: function (e, t, n, i, r) {
                                                var o = this;
                                                if ("number" != typeof e) throw new Error("pay_amount must be a number");
                                                if ("string" != typeof t) throw new Error("pay_type must be a string");
                                                if ("string" != typeof n) throw new Error("order_id must be a string");
                                                if ("string" != typeof i) throw new Error("pay_reason must be a string");
                                                if ("string" != typeof r) throw new Error("pay_method must be a string");
                                                return new Promise(function (a, s) {
                                                    o.track(
                                                        "$PayEvent",
                                                        {
                                                            $pay_amount: e,
                                                            $pay_type: t,
                                                            $order_id: n,
                                                            $pay_reason: i,
                                                            $pay_method: r,
                                                        },
                                                        null,
                                                        function () {
                                                            a();
                                                        }
                                                    );
                                                });
                                            },
                                        },
                                        {
                                            key: "bindTAThirdPlatform",
                                            value: function (e, t) {
                                                if (!e && !t) throw new Error("taAccountId or taDistinctId must be required");
                                                if (e && "string" != typeof e) throw new Error("taAccountId must be a string");
                                                if (t && "string" != typeof t) throw new Error("taDistinctId must be a string");
                                                this.track("$BindThirdPlatform", {
                                                    $third_platform_type: "ta",
                                                    $ta_account_id: e,
                                                    $ta_distinct_id: t,
                                                });
                                            },
                                        },
                                        {
                                            key: "adShowEvent",
                                            value: function (e, t, n) {
                                                var i = jn(),
                                                    r = "GravityEngine_ali_game" === i ? "alipay" : "wechat";
                                                if (
                                                    "GravityEngine_wechat" === i ||
                                                    "GravityEngine_wechat_game" === i ||
                                                    "GravityEngine_ali_game" === i
                                                ) {
                                                    if ("string" != typeof e) throw new Error("ad_type must be a string");
                                                    if ("string" != typeof t) throw new Error("ad_unit_id must be a string");
                                                    if ("wechat" === r && !t.startsWith("adunit-"))
                                                        throw new Error("ad_unit_id");
                                                    (i = {
                                                        $ad_type: e,
                                                        $ad_unit_id: t,
                                                        $adn_type: r,
                                                    }),
                                                        "[object Object]" === Object.prototype.toString.call(n) && Object.assign(i, n),
                                                        this.track("$AdShow", i);
                                                }
                                            },
                                        },
                                        {
                                            key: "getQuery",
                                            value: function () {
                                                try {
                                                    var e;
                                                    return (
                                                        (null != O &&
                                                            O.getAppOptions &&
                                                            null != (e = O.getAppOptions()) &&
                                                            e.query &&
                                                            O.getAppOptions().query) ||
                                                        {}
                                                    );
                                                } catch (e) {
                                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                    return {};
                                                }
                                            },
                                        },
                                        {
                                            key: "sendNetWork",
                                            value: function (e, t) {
                                                var n = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : "POST";
                                                return new Promise(function (i, r) {
                                                    O.request({
                                                        url: e,
                                                        method: n,
                                                        data: "string" == typeof t ? t : JSON.stringify(t),
                                                        header: {
                                                            "content-type": "application/json",
                                                        },
                                                        success: function (e) {
                                                            200 === e.statusCode || 200 === e.status ? i(e.data) : r(e);
                                                        },
                                                        fail: function (e) {
                                                            r(e);
                                                        },
                                                    });
                                                });
                                            },
                                        },
                                        {
                                            key: "_errorPromise",
                                            value: function (e) {
                                                return Promise.reject(new Error(e));
                                            },
                                        },
                                        {
                                            key: "initializeWithHistoryUserInfo",
                                            value:
                                                ((f = a(
                                                    i().mark(function e () {
                                                        var t,
                                                            n,
                                                            r = arguments;
                                                        return i().wrap(
                                                            function (e) {
                                                                for (; ;)
                                                                    switch ((e.prev = e.next)) {
                                                                        case 0:
                                                                            return (
                                                                                (t = 0 < r.length && void 0 !== r[0] ? r[0] : {}),
                                                                                (n = 1 < r.length ? r[1] : void 0),
                                                                                e.abrupt("return", this.initialize(t, n))
                                                                            );

                                                                        case 3:
                                                                        case "end":
                                                                            return e.stop();
                                                                    }
                                                            },
                                                            e,
                                                            this
                                                        );
                                                    })
                                                )),
                                                    function () {
                                                        return f.apply(this, arguments);
                                                    }),
                                        },
                                        {
                                            key: "initialize",
                                            value:
                                                ((p = a(
                                                    i().mark(function e () {
                                                        var t,
                                                            n,
                                                            r = this,
                                                            o = arguments;
                                                        return i().wrap(function (e) {
                                                            for (; ;)
                                                                switch ((e.prev = e.next)) {
                                                                    case 0:
                                                                        return (
                                                                            (t = 0 < o.length && void 0 !== o[0] ? o[0] : {}),
                                                                            (n = 1 < o.length ? o[1] : void 0),
                                                                            e.abrupt(
                                                                                "return",
                                                                                new Promise(
                                                                                    (function () {
                                                                                        var e = a(
                                                                                            i().mark(function e (o, s) {
                                                                                                return i().wrap(function (e) {
                                                                                                    for (; ;)
                                                                                                        switch ((e.prev = e.next)) {
                                                                                                            case 0:
                                                                                                                try {
                                                                                                                    O.getStorage(
                                                                                                                        "is_ge_registered",
                                                                                                                        true,
                                                                                                                        (function () {
                                                                                                                            var e = a(
                                                                                                                                i().mark(
                                                                                                                                    function e (
                                                                                                                                        a
                                                                                                                                    ) {
                                                                                                                                        var c,
                                                                                                                                            u,
                                                                                                                                            l,
                                                                                                                                            p,
                                                                                                                                            f,
                                                                                                                                            d,
                                                                                                                                            h,
                                                                                                                                            g,
                                                                                                                                            v,
                                                                                                                                            m,
                                                                                                                                            _,
                                                                                                                                            k,
                                                                                                                                            b;
                                                                                                                                        return i().wrap(
                                                                                                                                            function (
                                                                                                                                                e
                                                                                                                                            ) {
                                                                                                                                                for (; ;)
                                                                                                                                                    switch (
                                                                                                                                                    (e.prev =
                                                                                                                                                        e.next)
                                                                                                                                                    ) {
                                                                                                                                                        case 0:
                                                                                                                                                            if (
                                                                                                                                                                ((u =
                                                                                                                                                                    ""),
                                                                                                                                                                    r
                                                                                                                                                                        ._state
                                                                                                                                                                        .initComplete
                                                                                                                                                                        ? null !=
                                                                                                                                                                            t &&
                                                                                                                                                                            t.name
                                                                                                                                                                            ? (null !=
                                                                                                                                                                                t &&
                                                                                                                                                                                t.version) ||
                                                                                                                                                                                0 ===
                                                                                                                                                                                (null ==
                                                                                                                                                                                    t
                                                                                                                                                                                    ? void 0
                                                                                                                                                                                    : t.version)
                                                                                                                                                                                ? P.isNumber(
                                                                                                                                                                                    null ==
                                                                                                                                                                                        t
                                                                                                                                                                                        ? void 0
                                                                                                                                                                                        : t.version
                                                                                                                                                                                ) &&
                                                                                                                                                                                    "number" ==
                                                                                                                                                                                    typeof (null ==
                                                                                                                                                                                        t
                                                                                                                                                                                        ? void 0
                                                                                                                                                                                        : t.version)
                                                                                                                                                                                    ? void 0 !==
                                                                                                                                                                                    n &&
                                                                                                                                                                                    ("[object Object]" !==
                                                                                                                                                                                        Object.prototype.toString.call(
                                                                                                                                                                                            n
                                                                                                                                                                                        )
                                                                                                                                                                                        ? (u =
                                                                                                                                                                                            "history_info must be type: Object")
                                                                                                                                                                                        : null !=
                                                                                                                                                                                            n &&
                                                                                                                                                                                            n.company
                                                                                                                                                                                            ? "string" !=
                                                                                                                                                                                                typeof n.company
                                                                                                                                                                                                ? (u =
                                                                                                                                                                                                    "history_info.company must be type: String")
                                                                                                                                                                                                : (null !=
                                                                                                                                                                                                    n &&
                                                                                                                                                                                                    n.create_time) ||
                                                                                                                                                                                                    0 ===
                                                                                                                                                                                                    n.create_time
                                                                                                                                                                                                    ? (P.isNumber(
                                                                                                                                                                                                        n.create_time
                                                                                                                                                                                                    ) &&
                                                                                                                                                                                                        "number" ==
                                                                                                                                                                                                        typeof n.create_time) ||
                                                                                                                                                                                                    (u =
                                                                                                                                                                                                        "history_info.create_time must be type: Number")
                                                                                                                                                                                                    : (u =
                                                                                                                                                                                                        "history_info.create_time must be required")
                                                                                                                                                                                            : (u =
                                                                                                                                                                                                "history_info.company must be required"))
                                                                                                                                                                                    : (u =
                                                                                                                                                                                        "version must be type: Number")
                                                                                                                                                                                : (u =
                                                                                                                                                                                    "version must be required")
                                                                                                                                                                            : (u =
                                                                                                                                                                                "name must be required")
                                                                                                                                                                        : (u =
                                                                                                                                                                            "initialize must be called after setupAndStart"),
                                                                                                                                                                    u)
                                                                                                                                                            )
                                                                                                                                                                return e.abrupt(
                                                                                                                                                                    "return",
                                                                                                                                                                    s(
                                                                                                                                                                        u
                                                                                                                                                                    )
                                                                                                                                                                );
                                                                                                                                                            e.next = 4;
                                                                                                                                                            break;

                                                                                                                                                        case 4:
                                                                                                                                                            if (
                                                                                                                                                                ((c =
                                                                                                                                                                    r.getQuery()),
                                                                                                                                                                    (u =
                                                                                                                                                                        jn()),
                                                                                                                                                                    (p =
                                                                                                                                                                        u.includes(
                                                                                                                                                                            "GravityEngine_ali"
                                                                                                                                                                        )),
                                                                                                                                                                    (l =
                                                                                                                                                                        (null ==
                                                                                                                                                                            t
                                                                                                                                                                            ? void 0
                                                                                                                                                                            : t.channel) ||
                                                                                                                                                                        "base_channel"),
                                                                                                                                                                    (f =
                                                                                                                                                                        (null ==
                                                                                                                                                                            t
                                                                                                                                                                            ? void 0
                                                                                                                                                                            : t.enable_sync_attribution) ||
                                                                                                                                                                        false),
                                                                                                                                                                    (p =
                                                                                                                                                                    {
                                                                                                                                                                        client_id:
                                                                                                                                                                            r.appId,
                                                                                                                                                                        name: t.name,
                                                                                                                                                                        channel:
                                                                                                                                                                            p &&
                                                                                                                                                                                null !=
                                                                                                                                                                                c &&
                                                                                                                                                                                c.channel
                                                                                                                                                                                ? c.channel
                                                                                                                                                                                : l,
                                                                                                                                                                        version:
                                                                                                                                                                            t.version,
                                                                                                                                                                        wx_openid:
                                                                                                                                                                            (null ==
                                                                                                                                                                                t
                                                                                                                                                                                ? void 0
                                                                                                                                                                                : t.openid) ||
                                                                                                                                                                            (null ==
                                                                                                                                                                                t
                                                                                                                                                                                ? void 0
                                                                                                                                                                                : t.wx_openid) ||
                                                                                                                                                                            r.appId ||
                                                                                                                                                                            "",
                                                                                                                                                                        wx_unionid:
                                                                                                                                                                            (null ==
                                                                                                                                                                                t
                                                                                                                                                                                ? void 0
                                                                                                                                                                                : t.wx_unionid) ||
                                                                                                                                                                            "",
                                                                                                                                                                        promoted_object_id:
                                                                                                                                                                            (null ==
                                                                                                                                                                                t
                                                                                                                                                                                ? void 0
                                                                                                                                                                                : t.promoted_object_id) ||
                                                                                                                                                                            "",
                                                                                                                                                                        need_return_attribution:
                                                                                                                                                                            f,
                                                                                                                                                                        ad_data:
                                                                                                                                                                            c,
                                                                                                                                                                    }),
                                                                                                                                                                    n &&
                                                                                                                                                                    (p.history_info =
                                                                                                                                                                        n),
                                                                                                                                                                    "GravityEngine_quick_mp" ===
                                                                                                                                                                    (f =
                                                                                                                                                                        jn()))
                                                                                                                                                            )
                                                                                                                                                                return (
                                                                                                                                                                    (e.next = 15),
                                                                                                                                                                    r.getQuickAppInfo()
                                                                                                                                                                );
                                                                                                                                                            e.next = 16;
                                                                                                                                                            break;

                                                                                                                                                        case 15:
                                                                                                                                                            p.device_info =
                                                                                                                                                                e.sent;

                                                                                                                                                        case 16:
                                                                                                                                                            if (
                                                                                                                                                                f.includes(
                                                                                                                                                                    "gravityengine_qg"
                                                                                                                                                                )
                                                                                                                                                            )
                                                                                                                                                                return (
                                                                                                                                                                    (e.next = 19),
                                                                                                                                                                    r.getQuickGameInfo()
                                                                                                                                                                );
                                                                                                                                                            e.next = 20;
                                                                                                                                                            break;

                                                                                                                                                        case 19:
                                                                                                                                                            p.device_info =
                                                                                                                                                                e.sent;

                                                                                                                                                        case 20:
                                                                                                                                                            return (
                                                                                                                                                                (h =
                                                                                                                                                                    ""
                                                                                                                                                                        .concat(
                                                                                                                                                                            y,
                                                                                                                                                                            "/user/initialize/?access_token="
                                                                                                                                                                        )
                                                                                                                                                                        .concat(
                                                                                                                                                                            r.accessToken,
                                                                                                                                                                            "&client_id="
                                                                                                                                                                        )
                                                                                                                                                                        .concat(
                                                                                                                                                                            r.appId
                                                                                                                                                                        )),
                                                                                                                                                                (e.next = 23),
                                                                                                                                                                r.sendNetWork(
                                                                                                                                                                    h,
                                                                                                                                                                    p
                                                                                                                                                                )
                                                                                                                                                            );

                                                                                                                                                        case 23:
                                                                                                                                                            if (
                                                                                                                                                                0 !==
                                                                                                                                                                (d =
                                                                                                                                                                    e.sent)
                                                                                                                                                                    .code
                                                                                                                                                            )
                                                                                                                                                                return e.abrupt(
                                                                                                                                                                    "return",
                                                                                                                                                                    s(
                                                                                                                                                                        d
                                                                                                                                                                    )
                                                                                                                                                                );
                                                                                                                                                            e.next = 26;
                                                                                                                                                            break;

                                                                                                                                                        case 26:
                                                                                                                                                            return (
                                                                                                                                                                (h =
                                                                                                                                                                    Rn.properties),
                                                                                                                                                                (g =
                                                                                                                                                                    new Date()),
                                                                                                                                                                (v =
                                                                                                                                                                    g.getFullYear()),
                                                                                                                                                                (m =
                                                                                                                                                                    (
                                                                                                                                                                        "0" +
                                                                                                                                                                        (g.getMonth() +
                                                                                                                                                                            1)
                                                                                                                                                                    ).slice(
                                                                                                                                                                        -2
                                                                                                                                                                    )),
                                                                                                                                                                (_ =
                                                                                                                                                                    (
                                                                                                                                                                        "0" +
                                                                                                                                                                        g.getDate()
                                                                                                                                                                    ).slice(
                                                                                                                                                                        -2
                                                                                                                                                                    )),
                                                                                                                                                                (k =
                                                                                                                                                                    (
                                                                                                                                                                        "0" +
                                                                                                                                                                        g.getHours()
                                                                                                                                                                    ).slice(
                                                                                                                                                                        -2
                                                                                                                                                                    )),
                                                                                                                                                                (b =
                                                                                                                                                                    (
                                                                                                                                                                        "0" +
                                                                                                                                                                        g.getMinutes()
                                                                                                                                                                    ).slice(
                                                                                                                                                                        -2
                                                                                                                                                                    )),
                                                                                                                                                                (g =
                                                                                                                                                                    (
                                                                                                                                                                        "0" +
                                                                                                                                                                        g.getSeconds()
                                                                                                                                                                    ).slice(
                                                                                                                                                                        -2
                                                                                                                                                                    )),
                                                                                                                                                                (v =
                                                                                                                                                                    ""
                                                                                                                                                                        .concat(
                                                                                                                                                                            v,
                                                                                                                                                                            "-"
                                                                                                                                                                        )
                                                                                                                                                                        .concat(
                                                                                                                                                                            m,
                                                                                                                                                                            "-"
                                                                                                                                                                        )
                                                                                                                                                                        .concat(
                                                                                                                                                                            _,
                                                                                                                                                                            " "
                                                                                                                                                                        )
                                                                                                                                                                        .concat(
                                                                                                                                                                            k,
                                                                                                                                                                            ":"
                                                                                                                                                                        )
                                                                                                                                                                        .concat(
                                                                                                                                                                            b,
                                                                                                                                                                            ":"
                                                                                                                                                                        )
                                                                                                                                                                        .concat(
                                                                                                                                                                            g
                                                                                                                                                                        )),
                                                                                                                                                                "Y" !==
                                                                                                                                                                a &&
                                                                                                                                                                (r.userSetOnce(
                                                                                                                                                                    {
                                                                                                                                                                        $channel:
                                                                                                                                                                            l,
                                                                                                                                                                        $manufacturer:
                                                                                                                                                                            h.$manufacturer,
                                                                                                                                                                        $model: h.$model,
                                                                                                                                                                        $brand: h.$brand,
                                                                                                                                                                        $os: h.$os,
                                                                                                                                                                        $first_visit_time:
                                                                                                                                                                            v,
                                                                                                                                                                        $first_scene:
                                                                                                                                                                            String(
                                                                                                                                                                                null ==
                                                                                                                                                                                    (m =
                                                                                                                                                                                        O.getAppOptions())
                                                                                                                                                                                    ? void 0
                                                                                                                                                                                    : m.scene
                                                                                                                                                                            ),
                                                                                                                                                                        $gravity_referee_openid:
                                                                                                                                                                            (null ==
                                                                                                                                                                                c
                                                                                                                                                                                ? void 0
                                                                                                                                                                                : c.gravity_referee_openid) ||
                                                                                                                                                                            void 0,
                                                                                                                                                                    }
                                                                                                                                                                ),
                                                                                                                                                                    (_ =
                                                                                                                                                                        P.setQuery(
                                                                                                                                                                            r.getQuery()
                                                                                                                                                                        )),
                                                                                                                                                                    (k =
                                                                                                                                                                        "GravityEngine_quick_mp" ===
                                                                                                                                                                            f
                                                                                                                                                                            ? "$AppStart"
                                                                                                                                                                            : "$MPLaunch"),
                                                                                                                                                                    (b =
                                                                                                                                                                    {
                                                                                                                                                                        $url_query:
                                                                                                                                                                            _,
                                                                                                                                                                    }),
                                                                                                                                                                    r.track(
                                                                                                                                                                        k,
                                                                                                                                                                        b
                                                                                                                                                                    ),
                                                                                                                                                                    r.track(
                                                                                                                                                                        "$MPShow",
                                                                                                                                                                        b
                                                                                                                                                                    ),
                                                                                                                                                                    r.tencentSDKRegisterTrack()),
                                                                                                                                                                O.setStorage(
                                                                                                                                                                    "is_ge_registered",
                                                                                                                                                                    JSON.stringify(
                                                                                                                                                                        "Y"
                                                                                                                                                                    )
                                                                                                                                                                ),
                                                                                                                                                                e.abrupt(
                                                                                                                                                                    "return",
                                                                                                                                                                    o(
                                                                                                                                                                        d
                                                                                                                                                                    )
                                                                                                                                                                )
                                                                                                                                                            );

                                                                                                                                                        case 38:
                                                                                                                                                        case "end":
                                                                                                                                                            return e.stop();
                                                                                                                                                    }
                                                                                                                                            },
                                                                                                                                            e
                                                                                                                                        );
                                                                                                                                    }
                                                                                                                                )
                                                                                                                            );
                                                                                                                            return function (
                                                                                                                                t
                                                                                                                            ) {
                                                                                                                                return e.apply(
                                                                                                                                    this,
                                                                                                                                    arguments
                                                                                                                                );
                                                                                                                            };
                                                                                                                        })()
                                                                                                                    );
                                                                                                                } catch (e) {
                                                                                                                    e =
                                                                                                                        VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(
                                                                                                                            e
                                                                                                                        );
                                                                                                                    s(e);
                                                                                                                }

                                                                                                            case 1:
                                                                                                            case "end":
                                                                                                                return e.stop();
                                                                                                        }
                                                                                                }, e);
                                                                                            })
                                                                                        );
                                                                                        return function (t, n) {
                                                                                            return e.apply(this, arguments);
                                                                                        };
                                                                                    })()
                                                                                )
                                                                            )
                                                                        );

                                                                    case 3:
                                                                    case "end":
                                                                        return e.stop();
                                                                }
                                                        }, e);
                                                    })
                                                )),
                                                    function () {
                                                        return p.apply(this, arguments);
                                                    }),
                                        },
                                        {
                                            key: "authorizeOpenID",
                                            value: function (e) {
                                                this.identify(e);
                                            },
                                        },
                                        {
                                            key: "identify",
                                            value: function (e) {
                                                if (!this._hasDisabled()) {
                                                    if ("number" == typeof e) e = String(e);
                                                    else if ("string" != typeof e) return false;
                                                    this.store.setDistinctId(e);
                                                }
                                            },
                                        },
                                        {
                                            key: "getDistinctId",
                                            value: function () {
                                                return this.store.getDistinctId();
                                            },
                                        },
                                        {
                                            key: "login",
                                            value: function (e) {
                                                if (!this._hasDisabled()) {
                                                    if ("number" == typeof e) e = String(e);
                                                    else if ("string" != typeof e) return false;
                                                    this.store.setAccountId(e);
                                                }
                                            },
                                        },
                                        {
                                            key: "getAccountId",
                                            value: function () {
                                                return this.store.getAccountId();
                                            },
                                        },
                                        {
                                            key: "logout",
                                            value: function () {
                                                this._hasDisabled() || this.store.setAccountId(null);
                                            },
                                        },
                                        {
                                            key: "setSuperProperties",
                                            value: function (e) {
                                                this._hasDisabled() ||
                                                    (F.propertiesMust(e) || !this.config.strict
                                                        ? this.store.setSuperProperties(e)
                                                        : G.warn("setSuperProperties parameter must be a valid property value"));
                                            },
                                        },
                                        {
                                            key: "clearSuperProperties",
                                            value: function () {
                                                this._hasDisabled() || this.store.setSuperProperties({}, true);
                                            },
                                        },
                                        {
                                            key: "unsetSuperProperty",
                                            value: function (e) {
                                                var t;
                                                this._hasDisabled() ||
                                                    (P.isString(e) &&
                                                        (delete (t = this.getSuperProperties())[e],
                                                            this.store.setSuperProperties(t, true)));
                                            },
                                        },
                                        {
                                            key: "getSuperProperties",
                                            value: function () {
                                                return this.store.getSuperProperties();
                                            },
                                        },
                                        {
                                            key: "getSendProperties",
                                            value: function () {
                                                try {
                                                    var e,
                                                        t = P.extend(
                                                            {},
                                                            Rn.properties,
                                                            this.autoTrackProperties,
                                                            this.store.getSuperProperties(),
                                                            this.dynamicProperties ? this.dynamicProperties() : {}
                                                        );
                                                    for (e in t) "string" == typeof t[e] && (t[e] = t[e].substring(0, 8192));
                                                    return t;
                                                } catch (e) {
                                                    e = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(e);
                                                    return {};
                                                }
                                            },
                                        },
                                        {
                                            key: "getPresetProperties",
                                            value: function () {
                                                var e = Rn.properties,
                                                    t = {},
                                                    n = e.$system_language;
                                                return (
                                                    (t.system_language = P.isUndefined(n) ? "" : n),
                                                    (n = e.$os),
                                                    (t.os = P.isUndefined(n) ? "" : n),
                                                    (n = e.$screen_width),
                                                    (t.screenWidth = P.isUndefined(n) ? 0 : n),
                                                    (n = e.$screen_height),
                                                    (t.screenHeight = P.isUndefined(n) ? 0 : n),
                                                    (n = e.$network_type),
                                                    (t.networkType = P.isUndefined(n) ? "" : n),
                                                    (n = e.$model),
                                                    (t.deviceModel = P.isUndefined(n) ? "" : n),
                                                    (n = e.$os_version),
                                                    (t.osVersion = P.isUndefined(n) ? "" : n),
                                                    (t.deviceId = this.getDeviceId()),
                                                    (n = 0 - new Date().getTimezoneOffset() / 60),
                                                    (t.zoneOffset = n),
                                                    (n = e.$manufacturer),
                                                    (t.manufacturer = P.isUndefined(n) ? "" : n),
                                                    (n = e.$manufacturer),
                                                    (t.brand = P.isUndefined(n) ? "" : n),
                                                    (t.toEventPresetProperties = function () {
                                                        var e;
                                                        return {
                                                            $app_id: this.appId,
                                                            $model: t.deviceModel,
                                                            $screen_width: t.screenWidth,
                                                            $screen_height: t.screenHeight,
                                                            $system_language: t.system_language,
                                                            $os: t.os,
                                                            $os_version: t.osVersion,
                                                            $network_type: t.networkType,
                                                            $manufacturer: t.manufacturer,
                                                            $brand: t.manufacturer,
                                                            $scene: String(
                                                                (null == (e = O.getAppOptions()) ? void 0 : e.scene) ||
                                                                (null == (e = O.getAppOptions()) ? void 0 : e.from)
                                                            ),
                                                        };
                                                    }),
                                                    t
                                                );
                                            },
                                        },
                                        {
                                            key: "setDynamicSuperProperties",
                                            value: function (e) {
                                                this._hasDisabled() ||
                                                    ("function" == typeof e
                                                        ? F.properties(e()) || !this.config.strict
                                                            ? (this.dynamicProperties = e)
                                                            : G.warn("A dynamic public property must return a valid property value")
                                                        : G.warn("setDynamicSuperProperties parameter must be a function type"));
                                            },
                                        },
                                        {
                                            key: "timeEvent",
                                            value: function (e, t) {
                                                this._hasDisabled() ||
                                                    ((t = P.isDate(t) ? t : new Date()),
                                                        this._isReady()
                                                            ? F.event(e) || !this.config.strict
                                                                ? this.store.setEventTimer(e, t.getTime())
                                                                : G.warn("calling timeEvent failed due to invalid eventName: " + e)
                                                            : this._queue.push(["timeEvent", [e, t]]));
                                            },
                                        },
                                        {
                                            key: "getDeviceId",
                                            value: function () {
                                                return Rn.properties.$device_id;
                                            },
                                        },
                                        {
                                            key: "enableTracking",
                                            value: function (e) {
                                                (this.enabled = e), this.store._set("ta_enabled", e);
                                            },
                                        },
                                        {
                                            key: "optOutTracking",
                                            value: function () {
                                                this.store.setSuperProperties({}, true),
                                                    this.store.setDistinctId(P.UUID()),
                                                    this.store.setAccountId(null),
                                                    this._queue.splice(0, this._queue.length),
                                                    (this.isOptOut = true),
                                                    this.store._set("ge_isOptOut", true);
                                            },
                                        },
                                        {
                                            key: "optOutTrackingAndDeleteUser",
                                            value: function () {
                                                var e = new Date();
                                                this._sendRequest(
                                                    {
                                                        type: "user_del",
                                                    },
                                                    e
                                                ),
                                                    this.optOutTracking();
                                            },
                                        },
                                        {
                                            key: "optInTracking",
                                            value: function () {
                                                (this.isOptOut = false), this.store._set("ge_isOptOut", false);
                                            },
                                        },
                                        {
                                            key: "setTrackStatus",
                                            value: function (e) {
                                                switch (e) {
                                                    case "PAUSE":
                                                        (this.eventSaveOnly = false), this.optInTracking(), this.enableTracking(false);
                                                        break;

                                                    case "STOP":
                                                        (this.eventSaveOnly = false), this.optOutTracking(true);
                                                        break;

                                                    default:
                                                        (this.eventSaveOnly = false), this.optInTracking(), this.enableTracking(true);
                                                }
                                            },
                                        },
                                        {
                                            key: "getCommonOpenId",
                                            value: function (e, t) {
                                                var n = this;
                                                return new Promise(
                                                    (function () {
                                                        var r = a(
                                                            i().mark(function r (o, a) {
                                                                var s, c;
                                                                return i().wrap(
                                                                    function (i) {
                                                                        for (; ;)
                                                                            switch ((i.prev = i.next)) {
                                                                                case 0:
                                                                                    if (((i.prev = 0), e)) {
                                                                                        i.next = 3;
                                                                                        break;
                                                                                    }
                                                                                    return i.abrupt("return", a("code is required"));

                                                                                case 3:
                                                                                    return (
                                                                                        (c =
                                                                                            "https://backend.gravity-engine.com/event_center/api/v1/base/"
                                                                                                .concat(
                                                                                                    t,
                                                                                                    "/code2Session/?access_token="
                                                                                                )
                                                                                                .concat(n.accessToken)),
                                                                                        (i.next = 6),
                                                                                        n.sendNetWork(c, {
                                                                                            code: e,
                                                                                        })
                                                                                    );

                                                                                case 6:
                                                                                    return (
                                                                                        (c = i.sent),
                                                                                        i.abrupt(
                                                                                            "return",
                                                                                            0 === c.code &&
                                                                                                null != c &&
                                                                                                null != (s = c.data) &&
                                                                                                s.resp
                                                                                                ? o(c.data.resp)
                                                                                                : a(c)
                                                                                        )
                                                                                    );

                                                                                case 10:
                                                                                    return (
                                                                                        (i.prev = 10),
                                                                                        (i.t0 = i.catch(0)),
                                                                                        i.abrupt("return", a(i.t0))
                                                                                    );

                                                                                case 13:
                                                                                case "end":
                                                                                    return i.stop();
                                                                            }
                                                                    },
                                                                    r,
                                                                    null,
                                                                    [[0, 10]]
                                                                );
                                                            })
                                                        );
                                                        return function (e, t) {
                                                            return r.apply(this, arguments);
                                                        };
                                                    })()
                                                );
                                            },
                                        },
                                        {
                                            key: "getWechatOpenId",
                                            value: function (e) {
                                                return this.getCommonOpenId(e, "wx");
                                            },
                                        },
                                        {
                                            key: "getKuaishouOpenId",
                                            value: function (e) {
                                                return this.getCommonOpenId(e, "ks");
                                            },
                                        },
                                        {
                                            key: "getDouyinOpenId",
                                            value: function (e) {
                                                return this.getCommonOpenId(e, "dy");
                                            },
                                        },
                                        {
                                            key: "tencentSDKRegisterTrack",
                                            value: function () {
                                                var e = this;
                                                this.sdk &&
                                                    this.appId &&
                                                    this.checkUserInfo().then(function (t) {
                                                        "register" ===
                                                            (t = (null == t || null == (t = t.data) ? void 0 : t.action) || "")
                                                            ? (e.sdk.onRegister(), e.setupUserInfo("register"))
                                                            : "re_active" === t &&
                                                            "number" ==
                                                            typeof (null == (t = e.config) || null == (t = t.tencentSdkData)
                                                                ? void 0
                                                                : t.silentPeriod) &&
                                                            (e.sdk.track("RE_ACTIVE", {
                                                                backFlowDay: e.config.tencentSdkData.silentPeriod,
                                                            }),
                                                                e.setupUserInfo("re_active"));
                                                    });
                                            },
                                        },
                                        {
                                            key: "checkUserInfo",
                                            value: function () {
                                                var e,
                                                    t = this,
                                                    n =
                                                        (null == (e = this.config) || null == (e = e.tencentSdkData)
                                                            ? void 0
                                                            : e.silentPeriod) || 7;
                                                return new Promise(
                                                    (function () {
                                                        var e = a(
                                                            i().mark(function e (r, o) {
                                                                var a;
                                                                return i().wrap(function (e) {
                                                                    for (; ;)
                                                                        switch ((e.prev = e.next)) {
                                                                            case 0:
                                                                                return (
                                                                                    (a =
                                                                                        "https://backend.gravity-engine.com/event_center/api/v1/event/tencent_sdk/?access_token="
                                                                                            .concat(t.accessToken, "&client_id=")
                                                                                            .concat(t.appId, "&backFlowDay=")
                                                                                            .concat(n)),
                                                                                    (e.next = 3),
                                                                                    t.sendNetWork(a, {}, "get")
                                                                                );

                                                                            case 3:
                                                                                return (
                                                                                    (a = e.sent),
                                                                                    e.abrupt("return", (0 === a.code ? r : o)(a))
                                                                                );

                                                                            case 5:
                                                                            case "end":
                                                                                return e.stop();
                                                                        }
                                                                }, e);
                                                            })
                                                        );
                                                        return function (t, n) {
                                                            return e.apply(this, arguments);
                                                        };
                                                    })()
                                                );
                                            },
                                        },
                                        {
                                            key: "setupUserInfo",
                                            value: function (e) {
                                                var t = this;
                                                return new Promise(
                                                    (function () {
                                                        var n = a(
                                                            i().mark(function n (r, o) {
                                                                var a;
                                                                return i().wrap(function (n) {
                                                                    for (; ;)
                                                                        switch ((n.prev = n.next)) {
                                                                            case 0:
                                                                                if (e) {
                                                                                    n.next = 2;
                                                                                    break;
                                                                                }
                                                                                return n.abrupt("return", o("action is required"));

                                                                            case 2:
                                                                                return (
                                                                                    (a =
                                                                                        "https://backend.gravity-engine.com/event_center/api/v1/event/tencent_sdk/?access_token="
                                                                                            .concat(t.accessToken, "&client_id=")
                                                                                            .concat(t.appId)),
                                                                                    (n.next = 5),
                                                                                    t.sendNetWork(
                                                                                        a,
                                                                                        {
                                                                                            postback_list: [
                                                                                                {
                                                                                                    action: e,
                                                                                                },
                                                                                            ],
                                                                                        },
                                                                                        "post"
                                                                                    )
                                                                                );

                                                                            case 5:
                                                                                return (
                                                                                    (a = n.sent),
                                                                                    n.abrupt("return", (0 === a.code ? r : o)(a))
                                                                                );

                                                                            case 7:
                                                                            case "end":
                                                                                return n.stop();
                                                                        }
                                                                }, n);
                                                            })
                                                        );
                                                        return function (e, t) {
                                                            return n.apply(this, arguments);
                                                        };
                                                    })()
                                                );
                                            },
                                        },
                                        {
                                            key: "queryDryRunInfo",
                                            value: function (e) {
                                                var t = this;
                                                return new Promise(
                                                    (function () {
                                                        var n = a(
                                                            i().mark(function n (r, o) {
                                                                var a;
                                                                return i().wrap(function (n) {
                                                                    for (; ;)
                                                                        switch ((n.prev = n.next)) {
                                                                            case 0:
                                                                                if (e) {
                                                                                    n.next = 2;
                                                                                    break;
                                                                                }
                                                                                return n.abrupt("return", o("traceId is required"));

                                                                            case 2:
                                                                                return (
                                                                                    (a =
                                                                                        "https://backend.gravity-engine.com/event_center/api/v1/event/postback_info/?access_token="
                                                                                            .concat(t.accessToken, "&client_id=")
                                                                                            .concat(t.appId, "&trace_id=")
                                                                                            .concat(e)),
                                                                                    (n.next = 5),
                                                                                    t.sendNetWork(a, {}, "get")
                                                                                );

                                                                            case 5:
                                                                                return (
                                                                                    (a = n.sent),
                                                                                    n.abrupt("return", (0 === a.code ? r : o)(a))
                                                                                );

                                                                            case 7:
                                                                            case "end":
                                                                                return n.stop();
                                                                        }
                                                                }, n);
                                                            })
                                                        );
                                                        return function (e, t) {
                                                            return n.apply(this, arguments);
                                                        };
                                                    })()
                                                );
                                            },
                                        },
                                        {
                                            key: "sendDryRunResult",
                                            value: function (e, t) {
                                                var n = this;
                                                return new Promise(
                                                    (function () {
                                                        var r = a(
                                                            i().mark(function r (o, a) {
                                                                var s;
                                                                return i().wrap(function (i) {
                                                                    for (; ;)
                                                                        switch ((i.prev = i.next)) {
                                                                            case 0:
                                                                                if (e) {
                                                                                    i.next = 2;
                                                                                    break;
                                                                                }
                                                                                return i.abrupt("return", a("traceId is required"));

                                                                            case 2:
                                                                                if (t) {
                                                                                    i.next = 4;
                                                                                    break;
                                                                                }
                                                                                return i.abrupt("return", a("action is required"));

                                                                            case 4:
                                                                                return (
                                                                                    (s =
                                                                                        "https://backend.gravity-engine.com/event_center/api/v1/event/postback_info/?access_token="
                                                                                            .concat(n.accessToken, "&client_id=")
                                                                                            .concat(n.appId)),
                                                                                    (i.next = 7),
                                                                                    n.sendNetWork(
                                                                                        s,
                                                                                        {
                                                                                            postback_list: [
                                                                                                {
                                                                                                    trace_id: e,
                                                                                                    action: t,
                                                                                                },
                                                                                            ],
                                                                                        },
                                                                                        "post"
                                                                                    )
                                                                                );

                                                                            case 7:
                                                                                return (
                                                                                    (s = i.sent),
                                                                                    i.abrupt("return", (0 === s.code ? o : a)(s))
                                                                                );

                                                                            case 9:
                                                                            case "end":
                                                                                return i.stop();
                                                                        }
                                                                }, r);
                                                            })
                                                        );
                                                        return function (e, t) {
                                                            return r.apply(this, arguments);
                                                        };
                                                    })()
                                                );
                                            },
                                        },
                                        {
                                            key: "onPayEvent",
                                            value: function (e, t, n, i, r) {
                                                var o = 5 < arguments.length && void 0 !== arguments[5] && arguments[5];
                                                this.sdk && this.sdk.onPurchase(e), o || this.payEvent(e, t, n, i, r);
                                            },
                                        },
                                        {
                                            key: "getDryRunPostBackList",
                                            value:
                                                ((c = a(
                                                    i().mark(function e (t) {
                                                        var n;
                                                        return i().wrap(
                                                            function (e) {
                                                                for (; ;)
                                                                    switch ((e.prev = e.next)) {
                                                                        case 0:
                                                                            return (e.prev = 0), (e.next = 3), this.queryDryRunInfo(t);

                                                                        case 3:
                                                                            return (
                                                                                (n = e.sent),
                                                                                e.abrupt(
                                                                                    "return",
                                                                                    (null == n || null == (n = n.data)
                                                                                        ? void 0
                                                                                        : n.postback_list) || []
                                                                                )
                                                                            );

                                                                        case 7:
                                                                            return (
                                                                                (e.prev = 7),
                                                                                (e.t0 = e.catch(0)),
                                                                                e.abrupt("return", [])
                                                                            );

                                                                        case 10:
                                                                        case "end":
                                                                            return e.stop();
                                                                    }
                                                            },
                                                            e,
                                                            this,
                                                            [[0, 7]]
                                                        );
                                                    })
                                                )),
                                                    function (e) {
                                                        return c.apply(this, arguments);
                                                    }),
                                        },
                                        {
                                            key: "getDryRunPostBackItem",
                                            value:
                                                ((o = a(
                                                    i().mark(function e (t, n) {
                                                        var r, o, a, s;
                                                        return i().wrap(
                                                            function (e) {
                                                                for (; ;)
                                                                    switch ((e.prev = e.next)) {
                                                                        case 0:
                                                                            (r = 0), (o = 4), (a = []);

                                                                        case 3:
                                                                            if (0 === a.length && r < o)
                                                                                return (e.next = 6), P.sleep(1e3);
                                                                            e.next = 13;
                                                                            break;

                                                                        case 6:
                                                                            return (e.next = 8), this.getDryRunPostBackList(n, r);

                                                                        case 8:
                                                                            (a = e.sent), console.log("" + r, a), r++, (e.next = 3);
                                                                            break;

                                                                        case 13:
                                                                            if (a.length) {
                                                                                e.next = 15;
                                                                                break;
                                                                            }
                                                                            return e.abrupt("return", void 0);

                                                                        case 15:
                                                                            return (
                                                                                (s = a.find(function (e) {
                                                                                    return e.action === t && e.trace_id === n;
                                                                                })),
                                                                                e.abrupt("return", s)
                                                                            );

                                                                        case 17:
                                                                        case "end":
                                                                            return e.stop();
                                                                    }
                                                            },
                                                            e,
                                                            this
                                                        );
                                                    })
                                                )),
                                                    function (e, t) {
                                                        return o.apply(this, arguments);
                                                    }),
                                        },
                                        {
                                            key: "onPayEventInDryRunMode",
                                            value:
                                                ((r = a(
                                                    i().mark(function e (t, n, r, o, a) {
                                                        var s, c;
                                                        return i().wrap(
                                                            function (e) {
                                                                for (; ;)
                                                                    switch ((e.prev = e.next)) {
                                                                        case 0:
                                                                            return (
                                                                                this.payEvent(t, n, r, o, a),
                                                                                (s = r),
                                                                                (e.next = 4),
                                                                                this.getDryRunPostBackItem("pay", s)
                                                                            );

                                                                        case 4:
                                                                            (c = e.sent) &&
                                                                                (this.sdk && this.sdk.onPurchase(c.postback_value),
                                                                                    this.sendDryRunResult(s, c.action));

                                                                        case 6:
                                                                        case "end":
                                                                            return e.stop();
                                                                    }
                                                            },
                                                            e,
                                                            this
                                                        );
                                                    })
                                                )),
                                                    function (e, t, n, i, o) {
                                                        return r.apply(this, arguments);
                                                    }),
                                        },
                                        {
                                            key: "onTutorialFinishEventInDryRunMode",
                                            value:
                                                ((n = a(
                                                    i().mark(function e (t) {
                                                        return i().wrap(
                                                            function (e) {
                                                                for (; ;)
                                                                    switch ((e.prev = e.next)) {
                                                                        case 0:
                                                                            return (
                                                                                (e.next = 2),
                                                                                this.getDryRunPostBackItem("tutorial_finish", t)
                                                                            );

                                                                        case 2:
                                                                            e.sent && this.sdk && this.sdk.onTutorialFinish();

                                                                        case 4:
                                                                        case "end":
                                                                            return e.stop();
                                                                    }
                                                            },
                                                            e,
                                                            this
                                                        );
                                                    })
                                                )),
                                                    function (e) {
                                                        return n.apply(this, arguments);
                                                    }),
                                        },
                                        {
                                            key: "onCreateRoleEventInDryRunMode",
                                            value:
                                                ((t = a(
                                                    i().mark(function e (t, n) {
                                                        return i().wrap(
                                                            function (e) {
                                                                for (; ;)
                                                                    switch ((e.prev = e.next)) {
                                                                        case 0:
                                                                            return (
                                                                                (e.next = 2),
                                                                                this.getDryRunPostBackItem("create_role", n)
                                                                            );

                                                                        case 2:
                                                                            e.sent && this.sdk && this.sdk.onCreateRole(t);

                                                                        case 4:
                                                                        case "end":
                                                                            return e.stop();
                                                                    }
                                                            },
                                                            e,
                                                            this
                                                        );
                                                    })
                                                )),
                                                    function (e, n) {
                                                        return t.apply(this, arguments);
                                                    }),
                                        },
                                        {
                                            key: "onUpdateLevelEvent",
                                            value: function (e) {
                                                this.sdk &&
                                                    this.sdk.track("UPDATE_LEVEL", {
                                                        level: e,
                                                    }),
                                                    this.track("$UpdateLevel", {
                                                        $user_level: e,
                                                    });
                                            },
                                        },
                                        {
                                            key: "onRegisterEvent",
                                            value: function () {
                                                this.sdk && this.sdk.onRegister(), this.registerEvent();
                                            },
                                        },
                                        {
                                            key: "onCreateRoleEvent",
                                            value: function (e) {
                                                this.sdk && this.sdk.onCreateRole(e),
                                                    this.track("$CreateRole", {
                                                        $role_name: e,
                                                    });
                                            },
                                        },
                                        {
                                            key: "onTutorialFinishEvent",
                                            value: function () {
                                                this.sdk && this.sdk.onTutorialFinish(), this.track("$TutorialFinish", {});
                                            },
                                        },
                                        {
                                            key: "onViewMallContentEvent",
                                            value: function () {
                                                this.sdk &&
                                                    this.sdk.track("VIEW_CONTENT", {
                                                        item: "Mall",
                                                    }),
                                                    this.track("$ViewMallContent", {});
                                            },
                                        },
                                        {
                                            key: "onViewActivityContentEvent",
                                            value: function () {
                                                this.sdk &&
                                                    this.sdk.track("VIEW_CONTENT", {
                                                        item: "Activity",
                                                    }),
                                                    this.track("$ViewActivityContent", {});
                                            },
                                        },
                                        {
                                            key: "onAddToWishListEvent",
                                            value: function () {
                                                this.sdk &&
                                                    this.sdk.track("ADD_TO_WISHLIST", {
                                                        type:
                                                            0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : "default",
                                                    }),
                                                    this.track("$MPAddFavorites", {
                                                        $url_path: "",
                                                    });
                                            },
                                        },
                                        {
                                            key: "onShareEvent",
                                            value: function (e) {
                                                this.sdk &&
                                                    this.sdk.track("SHARE", {
                                                        target: e,
                                                    }),
                                                    this.track("$MPShare", {
                                                        $share_depth: 1,
                                                        $share_method: "",
                                                        $share_target: e,
                                                    });
                                            },
                                        },
                                    ]),
                                    e
                                );
                            })(),
                                qn = {
                                    name: "GravityEngine",
                                    enableLog: true,
                                    enableNative: false,
                                };
                            return (
                                (Xt = (function () {
                                    function e (t) {
                                        s(this, e),
                                            (t.appId = P.checkAppId(t.clientId)),
                                            (t.accessToken = t.accessToken),
                                            t.appId
                                                ? t.accessToken || console.warn("GravityAnalytics: accessToken must be required")
                                                : console.warn("GravityAnalytics: clientId must be required"),
                                            (t.serverUrl = "".concat(y, "/event/collect/?access_token=").concat(t.accessToken));
                                        var n = P.extend({}, qn, O.getConfig());
                                        P.isObject(t) ? (this.config = P.extend(n, t)) : (this.config = n), this._init(this.config);
                                    }
                                    var t;
                                    return (
                                        u(e, [
                                            {
                                                key: "_isNativePlatform",
                                                value: function () {
                                                    return !((!this._isIOS() && !this._isAndroid()) || !this.config.enableNative);
                                                },
                                            },
                                            {
                                                key: "_isIOS",
                                                value: function () {
                                                    return !(!cc.sys.isNative || "iOS" !== cc.sys.os);
                                                },
                                            },
                                            {
                                                key: "_isAndroid",
                                                value: function () {
                                                    return !(!cc.sys.isNative || "Android" !== cc.sys.os);
                                                },
                                            },
                                            {
                                                key: "_init",
                                                value: function (e) {
                                                    (this.name = e.name), (this.appId = e.clientId), (this.accessToken = e.accessToken);
                                                    var t = e.serverUrl || e.server_url;
                                                    if (((this.serverUrl = t), this._isNativePlatform())) this.initInstanceForNative();
                                                    else
                                                        try {
                                                            this.geJs = new GravityAnalyticsAPIForJS(e);
                                                        } catch (t) {
                                                            t = VM2_INTERNAL_STATE_DO_NOT_USE_OR_PROGRAM_WILL_FAIL.handleException(t);
                                                            this.geJs = new Ln(e);
                                                        }
                                                },
                                            },
                                            {
                                                key: "setupAndStart",
                                                value: function (e) {
                                                    var t, n;
                                                    this._isNativePlatform()
                                                        ? ((t = window),
                                                            (n = this),
                                                            (t.__autoTrackCallback = function (e) {
                                                                return P.isFunction(n.config.autoTrack.callback)
                                                                    ? ((e = n.config.autoTrack.callback(e)), JSON.stringify(e))
                                                                    : "{}";
                                                            }),
                                                            this.setupAndStartForNative())
                                                        : this.geJs.setupAndStart(e);
                                                },
                                            },
                                            {
                                                key: "track",
                                                value: function (e, t, n, i) {
                                                    this._isNativePlatform() ? this.trackForNative(e, t, n) : this.geJs.track(e, t, n, i);
                                                },
                                            },
                                            {
                                                key: "initializeWithHistoryUserInfo",
                                                value:
                                                    ((t = a(
                                                        i().mark(function e () {
                                                            var t,
                                                                n,
                                                                r = arguments;
                                                            return i().wrap(
                                                                function (e) {
                                                                    for (; ;)
                                                                        switch ((e.prev = e.next)) {
                                                                            case 0:
                                                                                if (
                                                                                    ((t = 0 < r.length && void 0 !== r[0] ? r[0] : {}),
                                                                                        (n = 1 < r.length ? r[1] : void 0),
                                                                                        this._isNativePlatform())
                                                                                )
                                                                                    return e.abrupt(
                                                                                        "return",
                                                                                        new Promise(function (e, t) {
                                                                                            t("");
                                                                                        })
                                                                                    );
                                                                                e.next = 4;
                                                                                break;

                                                                            case 4:
                                                                                return e.abrupt(
                                                                                    "return",
                                                                                    this.geJs.initializeWithHistoryUserInfo(t, n)
                                                                                );

                                                                            case 5:
                                                                            case "end":
                                                                                return e.stop();
                                                                        }
                                                                },
                                                                e,
                                                                this
                                                            );
                                                        })
                                                    )),
                                                        function () {
                                                            return t.apply(this, arguments);
                                                        }),
                                            },
                                            {
                                                key: "initialize",
                                                value: function () {
                                                    var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : {},
                                                        t = 1 < arguments.length ? arguments[1] : void 0;
                                                    if (!this._isNativePlatform()) return this.geJs.initialize(e, t);
                                                    this.initializeForNative(e);
                                                },
                                            },
                                            {
                                                key: "registerEvent",
                                                value: function () {
                                                    if (!this._isNativePlatform()) return this.geJs.registerEvent();
                                                    this.trackForNative("$AppRegister", {});
                                                },
                                            },
                                            {
                                                key: "loginEvent",
                                                value: function () {
                                                    if (!this._isNativePlatform()) return this.geJs.loginEvent();
                                                },
                                            },
                                            {
                                                key: "logoutEvent",
                                                value: function () {
                                                    if (!this._isNativePlatform()) return this.geJs.logoutEvent();
                                                },
                                            },
                                            {
                                                key: "payEvent",
                                                value: function (e, t, n, i, r) {
                                                    if (!this._isNativePlatform()) return this.geJs.payEvent(e, t, n, i, r);
                                                    if ("number" != typeof e) throw new Error("pay_amount must be a number");
                                                    if ("string" != typeof t) throw new Error("pay_type must be a string");
                                                    if ("string" != typeof n) throw new Error("order_id must be a string");
                                                    if ("string" != typeof i) throw new Error("pay_reason must be a string");
                                                    if ("string" != typeof r) throw new Error("pay_method must be a string");
                                                    this.trackForNative("$PayEvent", {
                                                        $pay_amount: e,
                                                        $pay_type: t,
                                                        $order_id: n,
                                                        $pay_reason: i,
                                                        $pay_method: r,
                                                    });
                                                },
                                            },
                                            {
                                                key: "bindTAThirdPlatform",
                                                value: function (e, t) {
                                                    if (!this._isNativePlatform()) return this.geJs.bindTAThirdPlatform(e, t);
                                                    if (!e && !t) throw new Error("taAccountId or taDistinctId must be required");
                                                    if (e && "string" != typeof e) throw new Error("taAccountId must be a string");
                                                    if (t && "string" != typeof t) throw new Error("taDistinctId must be a string");
                                                    this.trackForNative("$BindThirdPlatform", {
                                                        $third_platform_type: "ta",
                                                        $ta_account_id: e,
                                                        $ta_distinct_id: t,
                                                    });
                                                },
                                            },
                                            {
                                                key: "adShowEvent",
                                                value: function (e, t, n) {
                                                    if (!this._isNativePlatform()) return this.geJs.adShowEvent(e, t, n);
                                                    if ("string" != typeof e) throw new Error("ad_type must be a string");
                                                    if ("string" != typeof t) throw new Error("ad_unit_id must be a string");
                                                    (e = {
                                                        $ad_type: e,
                                                        $ad_unit_id: t,
                                                    }),
                                                        "[object Object]" === Object.prototype.toString.call(n) && Object.assign(e, n),
                                                        this.trackForNative("$AdShow", e);
                                                },
                                            },
                                            {
                                                key: "userSet",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform() ? this.userSetForNative(e, t) : this.geJs.userSet(e, t, n);
                                                },
                                            },
                                            {
                                                key: "userSetOnce",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform()
                                                        ? this.userSetOnceForNative(e, t)
                                                        : this.geJs.userSetOnce(e, t, n);
                                                },
                                            },
                                            {
                                                key: "userUnset",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform() ? this.userUnsetForNative(e, t) : this.geJs.userUnset(e, t, n);
                                                },
                                            },
                                            {
                                                key: "userDel",
                                                value: function (e, t) {
                                                    this._isNativePlatform() ? this.userDelForNative(e) : this.geJs.userDel(e, t);
                                                },
                                            },
                                            {
                                                key: "userAdd",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform() ? this.userAddForNative(e, t) : this.geJs.userAdd(e, t, n);
                                                },
                                            },
                                            {
                                                key: "userNumberMax",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform()
                                                        ? this.userNumberMaxForNative(e, t)
                                                        : this.geJs.userNumberMax(e, t, n);
                                                },
                                            },
                                            {
                                                key: "userNumberMin",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform()
                                                        ? this.userNumberMinForNative(e, t)
                                                        : this.geJs.userNumberMin(e, t, n);
                                                },
                                            },
                                            {
                                                key: "userAppend",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform()
                                                        ? this.userAppendForNative(e, t)
                                                        : this.geJs.userAppend(e, t, n);
                                                },
                                            },
                                            {
                                                key: "userUniqAppend",
                                                value: function (e, t, n) {
                                                    this._isNativePlatform()
                                                        ? this.userUniqAppendForNative(e, t)
                                                        : this.geJs.userUniqAppend(e, t, n);
                                                },
                                            },
                                            {
                                                key: "authorizeOpenID",
                                                value: function (e) {
                                                    this.identify(e);
                                                },
                                            },
                                            {
                                                key: "identify",
                                                value: function (e) {
                                                    this._isNativePlatform() ? this.identifyForNative(e) : this.geJs.identify(e);
                                                },
                                            },
                                            {
                                                key: "getDistinctId",
                                                value: function () {
                                                    if (this._isNativePlatform()) throw new Error("not support this method");
                                                    return this.geJs.getDistinctId();
                                                },
                                            },
                                            {
                                                key: "login",
                                                value: function (e) {
                                                    this._isNativePlatform() || this.geJs.login(e);
                                                },
                                            },
                                            {
                                                key: "getAccountId",
                                                value: function () {
                                                    if (this._isNativePlatform()) throw new Error("not support this method");
                                                    return this.geJs.getAccountId();
                                                },
                                            },
                                            {
                                                key: "logout",
                                                value: function () {
                                                    if (this._isNativePlatform()) throw new Error("not support this method");
                                                    this.geJs.logout();
                                                },
                                            },
                                            {
                                                key: "setSuperProperties",
                                                value: function (e) {
                                                    this._isNativePlatform()
                                                        ? this.setSuperPropertiesForNative(e)
                                                        : this.geJs.setSuperProperties(e);
                                                },
                                            },
                                            {
                                                key: "clearSuperProperties",
                                                value: function () {
                                                    this._isNativePlatform()
                                                        ? this.clearSuperPropertiesForNative()
                                                        : this.geJs.clearSuperProperties();
                                                },
                                            },
                                            {
                                                key: "unsetSuperProperty",
                                                value: function (e) {
                                                    this._isNativePlatform()
                                                        ? this.unsetSuperPropertyForNative(e)
                                                        : this.geJs.unsetSuperProperty(e);
                                                },
                                            },
                                            {
                                                key: "getSuperProperties",
                                                value: function () {
                                                    return this._isNativePlatform()
                                                        ? this.getSuperPropertiesForNative()
                                                        : this.geJs.getSuperProperties();
                                                },
                                            },
                                            {
                                                key: "getPresetProperties",
                                                value: function () {
                                                    var e, t, n, i;
                                                    return this._isNativePlatform()
                                                        ? ((e = this.getPresetPropertiesForNative()),
                                                            (t = {}),
                                                            (i = e.$system_language),
                                                            (t.system_language = P.isUndefined(i) ? "" : i),
                                                            (i = e.$os),
                                                            (t.os = P.isUndefined(i) ? "" : i),
                                                            (i = e.$screen_width),
                                                            (t.screenWidth = P.isUndefined(i) ? 0 : i),
                                                            (i = e.$screen_height),
                                                            (t.screenHeight = P.isUndefined(i) ? 0 : i),
                                                            (i = e.$network_type),
                                                            (t.networkType = P.isUndefined(i) ? "" : i),
                                                            (i = e.$device_model),
                                                            (t.deviceModel = P.isUndefined(i) ? "" : i),
                                                            (i = e.$os_version),
                                                            (t.osVersion = P.isUndefined(i) ? "" : i),
                                                            (t.deviceId = this.getDeviceId()),
                                                            (n = 0 - new Date().getTimezoneOffset() / 60),
                                                            (t.zoneOffset = n),
                                                            (i = e.$manufacturer),
                                                            (t.manufacturer = P.isUndefined(i) ? "" : i),
                                                            (i = e.$manufacturer),
                                                            (t.brand = P.isUndefined(i) ? "" : i),
                                                            (t.toEventPresetProperties = function () {
                                                                return {
                                                                    $device_model: t.deviceModel,
                                                                    $device_id: t.deviceId,
                                                                    $screen_width: t.screenWidth,
                                                                    $screen_height: t.screenHeight,
                                                                    $system_language: t.system_language,
                                                                    $os: t.os,
                                                                    $os_version: t.osVersion,
                                                                    $network_type: t.networkType,
                                                                    $zone_offset: n,
                                                                    $manufacturer: t.manufacturer,
                                                                    $brand: t.manufacturer,
                                                                };
                                                            }),
                                                            t)
                                                        : this.geJs.getPresetProperties();
                                                },
                                            },
                                            {
                                                key: "setDynamicSuperProperties",
                                                value: function (e) {
                                                    this._isNativePlatform()
                                                        ? "function" == typeof e
                                                            ? ((this.dynamicProperties = e),
                                                                (window.__dynamicPropertiesForNative = function (t) {
                                                                    return (
                                                                        console.log("__dynamicPropertiesForNative: native msg: ", t),
                                                                        (t = e()),
                                                                        (t = P.encodeDates(t)),
                                                                        JSON.stringify(t)
                                                                    );
                                                                }),
                                                                this.setDynamicSuperPropertiesForNative("__dynamicPropertiesForNative"))
                                                            : logger.warn("setDynamicSuperProperties parameter must be a function type")
                                                        : this.geJs.setDynamicSuperProperties(e);
                                                },
                                            },
                                            {
                                                key: "timeEvent",
                                                value: function (e, t) {
                                                    return this._isNativePlatform()
                                                        ? this.timeEventForNative(e)
                                                        : this.geJs.timeEvent(e, t);
                                                },
                                            },
                                            {
                                                key: "getDeviceId",
                                                value: function () {
                                                    return this._isNativePlatform() ? this.getDeviceIdForNative() : this.geJs.getDeviceId();
                                                },
                                            },
                                            {
                                                key: "setTrackStatus",
                                                value: function (e) {
                                                    this._isNativePlatform()
                                                        ? this.setTrackStatusForNative(e)
                                                        : this.geJs.setTrackStatus(e);
                                                },
                                            },
                                            {
                                                key: "trackForNative",
                                                value: function (e, t, n) {
                                                    (n = P.isDate(n) ? n.getTime() : ""),
                                                        P.isUndefined(t) && (t = {}),
                                                        (t = P.extend(t, this.dynamicProperties ? this.dynamicProperties() : {})),
                                                        (n = {
                                                            eventName: e,
                                                            properties: (t = P.encodeDates(t)),
                                                            time: n,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "track",
                                                                "(Ljava/lang/String;)V",
                                                                JSON.stringify(n)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "track:properties:time:appId:",
                                                                e,
                                                                JSON.stringify(t),
                                                                formatTime,
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "timeEventForNative",
                                                value: function (e) {
                                                    var t = {
                                                        eventName: e,
                                                    };
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "timeEvent",
                                                            "(Ljava/lang/String;Ljava/lang/String;)V",
                                                            JSON.stringify(t)
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "timeEvent:appId:",
                                                            e,
                                                            appId
                                                        );
                                                },
                                            },
                                            {
                                                key: "loginForNative",
                                                value: function (e, t) {
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "login",
                                                            "(Ljava/lang/String;Ljava/lang/String;)V",
                                                            e,
                                                            t
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "login:appId:",
                                                            e,
                                                            t
                                                        );
                                                },
                                            },
                                            {
                                                key: "logoutForNative",
                                                value: function (e) {
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "logout",
                                                            "(Ljava/lang/String;)V",
                                                            e
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod("GravityEngineCocosCreatorAPI", "logout:", e);
                                                },
                                            },
                                            {
                                                key: "setSuperPropertiesForNative",
                                                value: function (e) {
                                                    var t = {
                                                        properties: (e = P.encodeDates(e)),
                                                    };
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "setSuperProperties",
                                                            "(Ljava/lang/String;)V",
                                                            JSON.stringify(t)
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "setSuperProperties:appId:",
                                                            JSON.stringify(e),
                                                            appId
                                                        );
                                                },
                                            },
                                            {
                                                key: "getSuperPropertiesForNative",
                                                value: function () {
                                                    var e = "{}";
                                                    return (
                                                        this._isAndroid()
                                                            ? (e = jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "getSuperProperties",
                                                                "(Ljava/lang/String;)V",
                                                                ""
                                                            ))
                                                            : this._isIOS() &&
                                                            (e = jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "getSuperProperties:",
                                                                appId
                                                            )),
                                                        JSON.parse(e)
                                                    );
                                                },
                                            },
                                            {
                                                key: "unsetSuperPropertyForNative",
                                                value: function (e) {
                                                    var t = {
                                                        property: e,
                                                    };
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "unsetSuperProperty",
                                                            "(Ljava/lang/String;Ljava/lang/String;)V",
                                                            JSON.stringify(t)
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "unsetSuperProperty:appId:",
                                                            e,
                                                            appId
                                                        );
                                                },
                                            },
                                            {
                                                key: "clearSuperPropertiesForNative",
                                                value: function () {
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "clearSuperProperties",
                                                            "(Ljava/lang/String;)V",
                                                            "appId"
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "clearSuperProperties:",
                                                            appId
                                                        );
                                                },
                                            },
                                            {
                                                key: "userSetForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (t = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userSet",
                                                                "(Ljava/lang/String;)V",
                                                                JSON.stringify(t)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userSet:appId:",
                                                                JSON.stringify(e),
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userSetOnceForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (t = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userSetOnce",
                                                                "(Ljava/lang/String;)V",
                                                                JSON.stringify(t)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userSetOnce:appId:",
                                                                JSON.stringify(e),
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userAppendForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (t = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userAppend",
                                                                "(Ljava/lang/String;)V",
                                                                JSON.stringify(t)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userAppend:appId:",
                                                                JSON.stringify(e),
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userUniqAppendForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (t = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userUniqAppend",
                                                                "(Ljava/lang/String;)V",
                                                                JSON.stringify(t)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userUniqAppend:appId:",
                                                                JSON.stringify(e),
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userAddForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (t = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userAdd",
                                                                "(Ljava/lang/String;Ljava/lang/String;)V",
                                                                JSON.stringify(t)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userAdd:appId:",
                                                                JSON.stringify(e),
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userNumberMaxForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (t = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userNumberMax",
                                                                "(Ljava/lang/String;Ljava/lang/String;)V",
                                                                JSON.stringify(t)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userNumberMax:appId:",
                                                                JSON.stringify(e),
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userNumberMinForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (t = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userNumberMin",
                                                                "(Ljava/lang/String;Ljava/lang/String;)V",
                                                                JSON.stringify(t)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userNumberMin:appId:",
                                                                JSON.stringify(e),
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userUnsetForNative",
                                                value: function (e, t) {
                                                    (t = P.isDate(t) ? t.getTime() : ""),
                                                        (e = {
                                                            properties: (e = P.encodeDates(e)),
                                                            time: t,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userUnset",
                                                                "(Ljava/lang/String;Ljava/lang/String;)V",
                                                                JSON.stringify(e)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userUnset:appId:",
                                                                property,
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "userDelForNative",
                                                value: function (e) {
                                                    (e = {
                                                        time: P.isDate(e) ? e.getTime() : "",
                                                    }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "userDel",
                                                                "(Ljava/lang/String;)V",
                                                                JSON.stringify(e)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "userDel:",
                                                                appId
                                                            );
                                                },
                                            },
                                            {
                                                key: "authorizeOpenIDForNative",
                                                value: function (e, t) {
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "authorizeOpenID",
                                                            "(Ljava/lang/String;Ljava/lang/String;)V",
                                                            e,
                                                            t
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "authorizeOpenID:appId:",
                                                            e,
                                                            t
                                                        );
                                                },
                                            },
                                            {
                                                key: "identifyForNative",
                                                value: function (e) {
                                                    var t = {
                                                        distinctId: e,
                                                    };
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "identify",
                                                            "(Ljava/lang/String;)V",
                                                            JSON.stringify(t)
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "identify:appId:",
                                                            e,
                                                            appId
                                                        );
                                                },
                                            },
                                            {
                                                key: "initInstanceForNative",
                                                value: function () {
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "setCustomerLibInfo",
                                                            "(Ljava/lang/String;Ljava/lang/String;)V",
                                                            v,
                                                            g
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "setCustomerLibInfoWithLibName:libVersion:",
                                                            v,
                                                            g
                                                        );
                                                },
                                            },
                                            {
                                                key: "setupAndStartForNative",
                                                value: function () {
                                                    var e = 0,
                                                        t = ("debug" === this.config.debugMode && (e = 1), {});
                                                    P.isObject(this.config.secretKey) &&
                                                        ((t.publicKey = this.config.secretKey.publicKey),
                                                            (t.version = this.config.secretKey.version),
                                                            (t.symmetricEncryption = "AES"),
                                                            (t.asymmetricEncryption = "RSA")),
                                                        (e = {
                                                            accessToken: this.config.accessToken,
                                                            mode: e,
                                                            enableEncrypt: this.config.enableEncrypt,
                                                            secretKey: t,
                                                            timeZone: this.config.timeZone,
                                                        }),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "setupAndStart",
                                                                "(Ljava/lang/String;)V",
                                                                JSON.stringify(e)
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "startGravityAnalytics:",
                                                                JSON.stringify(e)
                                                            );
                                                },
                                            },
                                            {
                                                key: "initializeForNative",
                                                value: function (e) {
                                                    var t = this.config.accessToken,
                                                        n = (null == e ? void 0 : e.channel) || "";
                                                    (e = (null == e ? void 0 : e.enable_sync_attribution) || false),
                                                        this._isAndroid()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "initialize",
                                                                "(Ljava/lang/String;Ljava/lang/String;Z)V",
                                                                t,
                                                                n,
                                                                e
                                                            )
                                                            : this._isIOS() &&
                                                            jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "setCustomerLibInfoWithLibName:libVersion:",
                                                                v,
                                                                g
                                                            );
                                                },
                                            },
                                            {
                                                key: "setDynamicSuperPropertiesForNative",
                                                value: function (e, t) {
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "setDynamicSuperProperties",
                                                            "(Ljava/lang/String;Ljava/lang/String;)V",
                                                            e,
                                                            t
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "setDynamicSuperProperties:appId:",
                                                            e,
                                                            t
                                                        );
                                                },
                                            },
                                            {
                                                key: "getDeviceIdForNative",
                                                value: function () {
                                                    return this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "getDeviceId",
                                                            "(Ljava/lang/String;)Ljava/lang/String;",
                                                            ""
                                                        )
                                                        : this._isIOS()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "getDeviceId:",
                                                                appId
                                                            )
                                                            : void 0;
                                                },
                                            },
                                            {
                                                key: "getDistinctIdForNative",
                                                value: function (e) {
                                                    return this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "getDistinctId",
                                                            "(Ljava/lang/String;)Ljava/lang/String;",
                                                            e
                                                        )
                                                        : this._isIOS()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "getDistinctId:",
                                                                e
                                                            )
                                                            : void 0;
                                                },
                                            },
                                            {
                                                key: "getAccountIdForNative",
                                                value: function (e) {
                                                    return this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "getAccountId",
                                                            "(Ljava/lang/String;)Ljava/lang/String;",
                                                            e
                                                        )
                                                        : this._isIOS()
                                                            ? jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "getAccountId:",
                                                                e
                                                            )
                                                            : void 0;
                                                },
                                            },
                                            {
                                                key: "getPresetPropertiesForNative",
                                                value: function () {
                                                    var e = "{}";
                                                    return (
                                                        this._isAndroid()
                                                            ? (e = jsb.reflection.callStaticMethod(
                                                                "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                                "getPresetProperties",
                                                                "(Ljava/lang/String;)Ljava/lang/String;",
                                                                ""
                                                            ))
                                                            : this._isIOS() &&
                                                            (e = jsb.reflection.callStaticMethod(
                                                                "GravityEngineCocosCreatorAPI",
                                                                "getPresetProperties:",
                                                                appId
                                                            )),
                                                        JSON.parse(e)
                                                    );
                                                },
                                            },
                                            {
                                                key: "setTrackStatusForNative",
                                                value: function (e) {
                                                    var t = {
                                                        status: e,
                                                    };
                                                    this._isAndroid()
                                                        ? jsb.reflection.callStaticMethod(
                                                            "cn/gravity/engine/GravityEngineCocosCreatorAPI",
                                                            "setTrackStatus",
                                                            "(Ljava/lang/String;Ljava/lang/String;)V",
                                                            JSON.stringify(t)
                                                        )
                                                        : this._isIOS() &&
                                                        jsb.reflection.callStaticMethod(
                                                            "GravityEngineCocosCreatorAPI",
                                                            "setTrackStatus:appId:",
                                                            e,
                                                            appId
                                                        );
                                                },
                                            },
                                            {
                                                key: "getWechatOpenId",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.getWechatOpenId(e);
                                                },
                                            },
                                            {
                                                key: "getKuaishouOpenId",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.getKuaishouOpenId(e);
                                                },
                                            },
                                            {
                                                key: "getDouyinOpenId",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.getDouyinOpenId(e);
                                                },
                                            },
                                            {
                                                key: "tencentSDKRegisterTrack",
                                                value: function () {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.tencentSDKRegisterTrack();
                                                },
                                            },
                                            {
                                                key: "checkUserInfo",
                                                value: function () {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.checkUserInfo();
                                                },
                                            },
                                            {
                                                key: "setupUserInfo",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.setupUserInfo(e);
                                                },
                                            },
                                            {
                                                key: "queryDryRunInfo",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.queryDryRunInfo(e);
                                                },
                                            },
                                            {
                                                key: "sendDryRunResult",
                                                value: function (e, t) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.sendDryRunResult(e, t);
                                                },
                                            },
                                            {
                                                key: "onPayEvent",
                                                value: function (e, t, n, i, r) {
                                                    var o = 5 < arguments.length && void 0 !== arguments[5] && arguments[5];
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onPayEvent(e, t, n, i, r, o);
                                                },
                                            },
                                            {
                                                key: "onPayEventInDryRunMode",
                                                value: function (e, t, n, i, r) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onPayEventInDryRunMode(e, t, n, i, r);
                                                },
                                            },
                                            {
                                                key: "onTutorialFinishEventInDryRunMode",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onTutorialFinishEventInDryRunMode(e);
                                                },
                                            },
                                            {
                                                key: "onCreateRoleEventInDryRunMode",
                                                value: function (e, t) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onCreateRoleEventInDryRunMode(e, t);
                                                },
                                            },
                                            {
                                                key: "onUpdateLevelEvent",
                                                value: function (e, t) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onUpdateLevelEvent(e, t);
                                                },
                                            },
                                            {
                                                key: "onRegisterEvent",
                                                value: function () {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onRegisterEvent();
                                                },
                                            },
                                            {
                                                key: "onCreateRoleEvent",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onCreateRoleEvent(e);
                                                },
                                            },
                                            {
                                                key: "onTutorialFinishEvent",
                                                value: function () {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onTutorialFinishEvent();
                                                },
                                            },
                                            {
                                                key: "onViewMallContentEvent",
                                                value: function () {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onViewMallContentEvent();
                                                },
                                            },
                                            {
                                                key: "onViewActivityContentEvent",
                                                value: function () {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onViewActivityContentEvent();
                                                },
                                            },
                                            {
                                                key: "onAddToWishListEvent",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onAddToWishListEvent(e);
                                                },
                                            },
                                            {
                                                key: "onShareEvent",
                                                value: function (e) {
                                                    return this._isNativePlatform()
                                                        ? new Promise(function (e, t) {
                                                            t("");
                                                        })
                                                        : this.geJs.onShareEvent(e);
                                                },
                                            },
                                        ]),
                                        e
                                    );
                                })()),
                                (window.GravityAnalyticsAPI = Xt),
                                (window.GravityAnalyticsAPIForJS = Ln),
                                Xt
                            );
                        }),
                        "object" == n(t) && void 0 !== r
                            ? (r.exports = c())
                            : "function" == typeof define && define.amd
                                ? define(c)
                                : ((s = s || self).gravityengine = c()),
                        e("default", r.exports);
                },
                {}
            );
        },
    };
});
